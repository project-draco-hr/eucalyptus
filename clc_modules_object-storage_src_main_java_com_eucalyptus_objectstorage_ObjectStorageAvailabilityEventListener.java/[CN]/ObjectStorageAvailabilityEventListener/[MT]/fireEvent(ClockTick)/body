{
  if (BootstrapArgs.isCloudController() && Bootstrap.isOperational()) {
    try {
      ObjectStorageGatewayInfo osgInfo=ObjectStorageGatewayInfo.getObjectStorageGatewayInfo();
      long capacity=0;
      if (osgInfo != null) {
        capacity=osgInfo.getStorageMaxTotalCapacity();
      }
      ListenerRegistry.getInstance().fireEvent(new ResourceAvailabilityEvent(StorageWalrus,new Availability(capacity,Math.max(0,capacity - (long)Math.ceil((double)ObjectStorageQuotaUtil.countTotalObjectSize() / FileUtils.ONE_GB)))));
    }
 catch (    Exception ex) {
      logger.error(ex,ex);
    }
  }
}

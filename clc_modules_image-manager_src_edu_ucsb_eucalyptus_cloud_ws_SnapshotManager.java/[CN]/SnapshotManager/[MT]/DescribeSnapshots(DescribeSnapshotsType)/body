{
  DescribeSnapshotsResponseType reply=(DescribeSnapshotsResponseType)request.getReply();
  EntityWrapper<Snapshot> db=getEntityWrapper();
  String userName=request.isAdministrator() ? null : request.getUserId();
  List<Snapshot> Snapshots=db.query(Snapshot.ownedBy(userName));
  for (  Snapshot v : Snapshots) {
    if (request.getSnapshotSet().isEmpty() || request.getSnapshotSet().contains(v.getDisplayName())) {
      reply.getSnapshotSet().add(v.morph(new edu.ucsb.eucalyptus.msgs.Snapshot()));
    }
  }
  db.commit();
  return reply;
}

{
  LOG.debug(EventRecord.caller(this.getClass(),this.state.getReference(),this.toString()));
  if (!this.state.compareAndSet(expectedState,newState,expectedMark,newMark)) {
    throw new IllegalStateException(String.format("Cannot mark address as %s:%s when it is %s (not %s): %s",newState,initialTransition.getName(),this.state.getReference(),expectedState,this.toString()));
  }
  LOG.debug("Before transition: " + this);
  LOG.debug("Top-half of transition is: " + initialTransition.getName());
  initialTransition.apply();
  LOG.debug("Started transition: " + this);
  this.transition=deferedTransition;
  LOG.debug("Bottom-half of transition: " + this.transition.getName());
  return true;
}

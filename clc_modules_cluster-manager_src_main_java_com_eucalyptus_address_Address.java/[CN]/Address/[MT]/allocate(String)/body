{
  this.transition(State.unallocated,State.allocated,false,true,new SplitTransition(Transition.allocating){
    public void top(){
      Address.this.instanceId=UNASSIGNED_INSTANCEID;
      Address.this.instanceAddress=UNASSIGNED_INSTANCEADDR;
      Address.this.userId=userId;
      try {
        Addresses.getInstance().enable(Address.this.name);
      }
 catch (      NoSuchElementException e) {
        try {
          Addresses.getInstance().register(Address.this);
        }
 catch (        NoSuchElementException e1) {
          LOG.debug(e);
        }
      }
      if (!Address.this.isSystemOwned()) {
        Address.addAddress(Address.this);
      }
      EventRecord.here(Address.class,EventClass.ADDRESS,EventType.ADDRESS_ALLOCATE,"user=" + Address.this.userId,"address=" + Address.this.name,Address.this.isSystemOwned() ? "SYSTEM" : "USER").info();
      Address.this.state.attemptMark(State.allocated,false);
      super.bottom();
    }
    public void bottom(){
    }
  }
);
  return this;
}

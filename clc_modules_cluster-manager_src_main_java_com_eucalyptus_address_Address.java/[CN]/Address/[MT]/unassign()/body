{
  this.transition(State.assigned,State.allocated,false,true,new SplitTransition(Transition.unassigning){
    public void top(){
      if (!Address.this.isSystemOwned()) {
        EventRecord.here(Address.class,EventClass.ADDRESS,EventType.ADDRESS_UNASSIGN,"user=" + Address.this.userId).append("address=" + Address.this.name,"instance=" + Address.this.instanceId,"instance-address=").append(Address.this.instanceAddress,"SYSTEM").info();
      }
 else {
        try {
          VmInstance vm=VmInstances.getInstance().lookup(Address.this.getInstanceId());
          EventRecord.here(Address.class,EventClass.ADDRESS,EventType.ADDRESS_UNASSIGN,"user=" + vm.getOwnerId()).append("address=" + Address.this.name,"instance=" + Address.this.instanceId,"instance-address=").append(Address.this.instanceAddress,"SYSTEM").info();
        }
 catch (        NoSuchElementException e) {
          EventRecord.here(Address.class,EventClass.ADDRESS,EventType.ADDRESS_UNASSIGN,"user=<unknown>").append("address=" + Address.this.name,"instance=" + Address.this.instanceId,"instance-address=").append(Address.this.instanceAddress,"SYSTEM").info();
        }
      }
    }
    public void bottom(){
      Address.this.instanceId=UNASSIGNED_INSTANCEID;
      Address.this.instanceAddress=UNASSIGNED_INSTANCEADDR;
    }
  }
);
  return this;
}

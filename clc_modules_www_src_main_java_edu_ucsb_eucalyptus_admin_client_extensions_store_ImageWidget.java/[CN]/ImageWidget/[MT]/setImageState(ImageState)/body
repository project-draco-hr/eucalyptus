{
  this.imageState=imageState;
  if (imageState.getStatus() == ImageState.Status.UNKNOWN || (imageState.getStatus() == ImageState.Status.UNINSTALLED && !imageState.hasAction(ImageState.Action.INSTALL))) {
    GWT.log("ERROR: Received unknown image status.",null);
    commandPanel.setVisible(false);
  }
 else {
    updateButtonImage(imageState.getStatus());
    Integer percentage=imageState.getProgressPercentage();
    if (percentage == null) {
      progressPanel.setVisible(false);
    }
 else {
      progressBar.setPercentage(percentage);
      progressPanel.setVisible(true);
    }
    setHowToRunVisible(imageState.getEMI() != null);
    setShowErrorVisible(imageState.getErrorMessage() != null);
    setCancelVisible(imageState.hasAction(ImageState.Action.CANCEL));
    setUpgradeIconVisible(imageState.isUpgrade());
  }
}

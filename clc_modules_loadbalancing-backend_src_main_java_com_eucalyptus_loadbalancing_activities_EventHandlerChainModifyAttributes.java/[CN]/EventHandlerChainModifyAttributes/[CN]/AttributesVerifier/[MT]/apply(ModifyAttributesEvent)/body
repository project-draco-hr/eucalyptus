{
  final AccessLog accessLog=evt.getAttributes().getAccessLog();
  if (accessLog == null)   return;
  final boolean accessLogEnabled=accessLog.getEnabled();
  if (accessLogEnabled) {
    final String bucketName=accessLog.getS3BucketName();
    final Integer emitInterval=com.google.common.base.Objects.firstNonNull(accessLog.getEmitInterval(),60);
    if (!ObjectStorageGateway.checkBucketNameValidity(bucketName)) {
      throw new EventHandlerException("Invalid bucket name specified");
    }
    if (emitInterval < 5 || emitInterval > 60) {
      throw new EventHandlerException("Access log's emit interval must be between 5 and 60 minutes");
    }
  }
  if (accessLog.getS3BucketPrefix() != null) {
    accessLog.setS3BucketPrefix(StringEscapeUtils.escapeJavaScript(accessLog.getS3BucketPrefix()));
  }
}

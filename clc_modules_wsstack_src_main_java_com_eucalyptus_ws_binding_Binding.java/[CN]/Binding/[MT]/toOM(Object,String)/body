{
  final OMFactory factory=OMAbstractFactory.getOMFactory();
  if (param == null) {
    throw new RuntimeException("Cannot bind null value");
  }
 else   if (!(param instanceof IMarshallable)) {
    throw new RuntimeException("No JiBX <mapping> defined for class " + param.getClass());
  }
  if (this.bindingFactory == null) {
    try {
      this.bindingFactory=BindingDirectory.getFactory(this.name,param.getClass());
    }
 catch (    final JiBXException e) {
      Binding.LOG.error(e,e);
      throw new RuntimeException(this.bindingErrorMsg);
    }
  }
  final IMarshallable mrshable=(IMarshallable)param;
  final OMDataSource src=new JiBXDataSource(mrshable,this.bindingFactory);
  final int index=mrshable.JiBX_getIndex();
  final OMNamespace appns=factory.createOMNamespace(this.bindingFactory.getElementNamespaces()[index],"");
  OMElement retVal=factory.createOMElement(src,this.bindingFactory.getElementNames()[index],appns);
  final String origNs=retVal.getNamespace().getNamespaceURI();
  if ((altNs != null) && !altNs.equals(origNs)) {
    try {
      final ByteArrayOutputStream bos=new ByteArrayOutputStream();
      final XMLStreamWriter xmlStream=XMLOutputFactory.newInstance().createXMLStreamWriter(bos);
      retVal.serialize(xmlStream);
      xmlStream.flush();
      xmlStream.close();
      String retString=bos.toString();
      retString=retString.replaceAll(origNs,altNs);
      final ByteArrayInputStream bis=new ByteArrayInputStream(retString.getBytes());
      final StAXOMBuilder stAXOMBuilder=new StAXOMBuilder(bis);
      retVal=stAXOMBuilder.getDocumentElement();
    }
 catch (    final XMLStreamException e) {
      Binding.LOG.error(e,e);
    }
  }
  return retVal;
}

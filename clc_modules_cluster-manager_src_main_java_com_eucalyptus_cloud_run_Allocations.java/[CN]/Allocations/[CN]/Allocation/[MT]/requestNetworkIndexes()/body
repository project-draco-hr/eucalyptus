{
  NetworkGroup net=this.getPrimaryNetwork();
  ExtantNetwork extantNetwork=net.extantNetwork();
  assertThat(net,notNullValue());
  assertThat(extantNetwork,notNullValue());
  for (  ResourceToken rscToken : this.allocationTokens) {
    try {
      SetReference<PrivateNetworkIndex,VmInstance> addrIndex=extantNetwork.allocateNetworkIndex();
      rscToken.setNetworkIndex(addrIndex);
    }
 catch (    Exception ex) {
      throw new NotEnoughResourcesAvailable("Not enough addresses left in the network subnet assigned to requested group: " + net,ex);
    }
  }
}

{
  this.context=Contexts.lookup();
  this.minCount=1;
  this.maxCount=1;
  this.usePrivateAddressing=isUsePrivateAddressing;
  this.ownerFullName=this.context.getUserFullName();
  this.reservationId=reservationId;
  this.reservationIndex=UniqueIds.nextIndex(VmInstance.class,(long)this.maxCount);
  this.instanceIds=Maps.newHashMap();
  this.instanceIds.put(0,instanceId);
  this.instanceUuids=Maps.newHashMap();
  this.instanceUuids.put(0,instanceUuid);
  this.userData=userData;
  this.partition=partition;
  this.sshKeyPair=(sshKeyPair != null ? sshKeyPair : KeyPairs.noKey());
  this.bootSet=bootSet;
  this.expiration=expiration;
  this.vmType=vmType;
  this.monitoring=monitoring;
  this.clientToken=clientToken;
  this.nameOrArn=nameOrArn;
  this.networkGroups=new HashMap<String,NetworkGroup>(){
{
      for (      NetworkGroup g : networkGroups) {
        if (Allocation.this.primaryNetwork == null) {
          Allocation.this.primaryNetwork=g;
        }
        put(g.getDisplayName(),g);
      }
    }
  }
;
  this.request=new RunInstancesType(){
{
      this.setMinCount(1);
      this.setMaxCount(1);
      this.setImageId(bootSet.getMachine().getDisplayName());
      this.setAvailabilityZone(partition.getName());
      this.getGroupSet().addAll(Allocation.this.networkGroups.keySet());
      this.setInstanceType(vmType.getName());
    }
  }
;
}

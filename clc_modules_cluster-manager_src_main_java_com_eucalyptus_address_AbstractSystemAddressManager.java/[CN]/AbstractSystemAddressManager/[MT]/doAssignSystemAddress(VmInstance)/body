{
  final String instanceId=vm.getInstanceId();
  final Address addr=this.allocateSystemAddress(vm.lookupPartition());
  final Callback.Success<BaseMessage> onSuccess=new Callback.Success<BaseMessage>(){
    @Override public void fire(    final BaseMessage response){
      Addresses.updatePublicIpByInstanceId(instanceId,addr.getName());
    }
  }
;
  AddressingDispatcher.dispatch(AsyncRequests.newRequest(addr.assign(vm).getCallback()).then(onSuccess),vm.getPartition());
}

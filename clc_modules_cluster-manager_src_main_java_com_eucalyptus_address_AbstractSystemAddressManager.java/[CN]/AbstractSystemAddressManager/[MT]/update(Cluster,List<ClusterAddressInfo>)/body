{
  if (!cluster.getState().isAddressingInitialized()) {
    Helper.loadStoredAddresses(cluster);
    cluster.getState().setAddressingInitialized(true);
  }
  for (  final ClusterAddressInfo addrInfo : ccList) {
    try {
      final Address address=Helper.lookupOrCreate(cluster,addrInfo);
      if (address.isAssigned() && !address.isPending()) {
        if (FakePrincipals.nobodyFullName().equals(address.getOwner())) {
          Helper.markAsAllocated(cluster,addrInfo,address);
        }
        try {
          final VmInstance vm=VmInstances.lookupByInstanceIp(addrInfo.getInstanceIp());
          cluster.getState().clearOrphan(addrInfo);
        }
 catch (        final NoSuchElementException e) {
          InetAddress addr=null;
          try {
            addr=Inet4Address.getByName(addrInfo.getInstanceIp());
          }
 catch (          final UnknownHostException e1) {
            LOG.debug(e1,e1);
          }
          if ((addr == null) || !addr.isLoopbackAddress()) {
            cluster.getState().handleOrphan(addrInfo);
          }
        }
      }
 else       if (address.isAllocated() && FakePrincipals.nobodyFullName().equals(address.getOwner()) && !address.isPending()) {
        Helper.markAsAllocated(cluster,addrInfo,address);
      }
    }
 catch (    final Exception e) {
      LOG.debug(e,e);
    }
  }
}

{
  Address addr=null;
  try {
    addr=Addresses.getInstance().lookupDisabled(address);
    LOG.trace("Found address in the inactive set cache: " + addr);
  }
 catch (  final NoSuchElementException e1) {
    try {
      addr=Addresses.getInstance().lookup(address);
      LOG.trace("Found address in the active set cache: " + addr);
    }
 catch (    final NoSuchElementException e) {
    }
  }
  if (addr == null) {
    VmInstance vm=!assign ? null : maybeFindVm(null,address,null);
    addr=vm != null ? new Address(Principals.systemFullName(),address,vm.getInstanceUuid(),vm.getInstanceId(),vm.getPrivateAddress()) : new Address(address);
  }
  return addr;
}

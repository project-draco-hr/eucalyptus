{
  try {
    Entities.asTransaction(VmInstance.class,new Function<String,String>(){
      @Override public String apply(      String input){
        try {
          VmInstance entity=Entities.uniqueResult(VmInstance.named(null,input));
          Entities.delete(entity);
        }
 catch (        final NoSuchElementException ex) {
          LOG.debug("Instance not found for deletion: " + instanceId);
          Logs.extreme().error(ex,ex);
        }
catch (        final Exception ex) {
          LOG.error("Error deleting instance: " + instanceId + "; "+ ex);
          Logs.extreme().error(ex,ex);
        }
        return input;
      }
    }
,VmInstances.TX_RETRIES).apply(instanceId);
  }
 catch (  Exception ex) {
    LOG.error(ex);
    Logs.extreme().error(ex,ex);
  }
  terminateDescribeCache.remove(instanceId);
  terminateCache.remove(instanceId);
}

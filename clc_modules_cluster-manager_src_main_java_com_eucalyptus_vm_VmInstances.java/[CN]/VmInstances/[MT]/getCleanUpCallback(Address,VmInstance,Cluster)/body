{
  final UnconditionalCallback cleanup=new UnconditionalCallback(){
    @Override public void fire(){
      if (address != null) {
        try {
          if (address.isSystemOwned()) {
            EventRecord.caller(VmInstances.class,EventType.VM_TERMINATING,"SYSTEM_ADDRESS",address.toString()).debug();
            Addresses.release(address);
          }
 else {
            EventRecord.caller(VmInstances.class,EventType.VM_TERMINATING,"USER_ADDRESS",address.toString()).debug();
            AsyncRequests.newRequest(address.unassign().getCallback()).dispatch(vm.getPartition());
          }
        }
 catch (        final IllegalStateException e) {
        }
catch (        final Throwable e) {
          LOG.debug(e,e);
        }
      }
    }
  }
;
  return cleanup;
}

{
  EntityTransaction db=Entities.get(VmInstance.class);
  try {
    VmInstance vm=(VmInstance)Entities.createCriteria(VmInstance.class).add(Example.create(VmInstance.create()).enableLike(MatchMode.EXACT)).createCriteria("networkConfig").add(Example.create(VmNetworkConfig.createWithPrivateIp(ip)).enableLike(MatchMode.EXACT)).setCacheable(true).setMaxResults(1).setFetchSize(1).setFirstResult(0).uniqueResult();
    db.commit();
    return vm;
  }
 catch (  Exception ex) {
    Logs.exhaust().error(ex,ex);
    db.rollback();
    throw new NoSuchElementException(ex.getMessage());
  }
}

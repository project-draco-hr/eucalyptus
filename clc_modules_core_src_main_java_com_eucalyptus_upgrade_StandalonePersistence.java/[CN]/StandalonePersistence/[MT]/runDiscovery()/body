{
  runSetupDiscovery();
  for (  File script : Objects.firstNonNull(SubDirectory.UPGRADE.getFile().listFiles(),new File[0])) {
    if (!script.getPath().endsWith(".groovy")) {
      LOG.debug("Skipping " + script.getAbsolutePath() + " due to file extension.");
      continue;
    }
    LOG.debug("Trying to load what looks like an upgrade script: " + script.getAbsolutePath());
    try {
      UpgradeScript u=Groovyness.newInstance(script.getAbsolutePath());
      registerUpgradeScript(u);
    }
 catch (    ScriptExecutionFailedException e) {
      LOG.error(e,e);
      e.printStackTrace();
      System.exit(-1);
    }
  }
}

{
  EntityWrapper<ImageCacheInfo> db=new EntityWrapper<ImageCacheInfo>();
  ImageCacheInfo searchImageCacheInfo=new ImageCacheInfo(bucketName,manifestKey);
  List<ImageCacheInfo> imageCacheInfos=db.query(searchImageCacheInfo);
  if (imageCacheInfos.size() == 0) {
    String decryptedImageKey=decryptImage(bucketName,manifestKey,userId,isAdministrator);
    ImageCacheInfo foundImageCacheInfo=new ImageCacheInfo(bucketName,manifestKey);
    foundImageCacheInfo.setImageName(decryptedImageKey);
    foundImageCacheInfo.setInCache(false);
    foundImageCacheInfo.setCaching(true);
    foundImageCacheInfo.setUseCount(0);
    foundImageCacheInfo.setSize(0L);
    db.add(foundImageCacheInfo);
    db.commit();
    ImageCacher imageCacher=new ImageCacher(bucketName,manifestKey,decryptedImageKey);
    imageCacher.run();
  }
}

{
  CreateBucketResponseType reply=(CreateBucketResponseType)request.getReply();
  String userId=request.getUserId();
  String bucketName=request.getBucket();
  String locationConstraint=request.getLocationConstraint();
  if (userId == null) {
    throw new AccessDeniedException(bucketName);
  }
  AccessControlListType accessControlList=request.getAccessControlList();
  if (accessControlList == null) {
    accessControlList=new AccessControlListType();
  }
  makeBucket(userId,bucketName,locationConstraint,accessControlList,request.isAdministrator());
  try {
    storageManager.createBucket(bucketName);
  }
 catch (  IOException ex) {
    LOG.error(ex);
    throw new EucalyptusCloudException(bucketName);
  }
  reply.setBucket(bucketName);
  return reply;
}

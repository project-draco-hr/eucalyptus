{
  try (TransactionResource tran=Entities.transactionFor(LifecycleRule.class)){
    BucketLifecycleManagers.getInstance().deleteLifecycleRules(bucketName,tran);
    if (rules != null && rules.size() > 0) {
      for (      com.eucalyptus.storage.msgs.s3.LifecycleRule ruleInfo : rules) {
        LifecycleRule converted=convertLifecycleRule(ruleInfo,bucketName);
        Entities.merge(converted);
      }
    }
    tran.commit();
  }
 catch (  Exception ex) {
    LOG.error("caught exception while managing object lifecycle for bucket - " + bucketName + ", with error - "+ ex.getMessage());
    throw new ObjectStorageException("InternalServerError","An exception was caught while managing the object lifecycle for bucket - " + bucketName,"Bucket",bucketName,HttpResponseStatus.INTERNAL_SERVER_ERROR);
  }
}

{
  for (  StackResourceEntity stackResourceEntity : StackResourceEntityManager.getStackResources(stack.getStackName())) {
    Resource resource=null;
    if (stackResourceEntity.getResourceType().equals("AWS::EC2::Instance")) {
      AWSEC2Instance awsec2Instance=new AWSEC2Instance();
      awsec2Instance.setOwnerUserId(userId);
      awsec2Instance.setLogicalResourceId(stackResourceEntity.getLogicalResourceId());
      awsec2Instance.setType(stackResourceEntity.getResourceType());
      awsec2Instance.setPhysicalResourceId(awsec2Instance.getPhysicalResourceId());
      resource=awsec2Instance;
    }
    try {
      resource.delete();
    }
 catch (    Exception ex) {
    }
  }
  StackResourceEntityManager.deleteStackResources(stack.getStackName());
  StackEventEntityManager.deleteStackEvents(stack.getStackName());
  StackEntityManager.deleteStack(stack.getStackName());
}

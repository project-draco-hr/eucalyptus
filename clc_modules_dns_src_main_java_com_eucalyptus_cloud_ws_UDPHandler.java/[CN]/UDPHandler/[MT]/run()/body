{
  final short udpLength=512;
  while (Bootstrap.isOperational()) {
    if (socket.isClosed()) {
      LOG.info("Exiting due to closed socket");
      return;
    }
    try {
      byte[] in=new byte[udpLength];
      DatagramPacket indp=new DatagramPacket(in,in.length);
      indp.setLength(in.length);
      try {
        socket.receive(indp);
      }
 catch (      InterruptedIOException e) {
        continue;
      }
      try {
        Threads.enqueue(Dns.class,UDPHandler.class,new UDPWorker(this.socket,indp,in));
      }
 catch (      Exception ex) {
        LOG.error("failed to run dns UDP worker");
      }
    }
 catch (    IOException e) {
      LOG.trace(e);
    }
  }
}

{
  String corrId=null;
  if (msg == null) {
    this.correlationId=UUID.randomUUID().toString();
  }
 else {
    corrId=msg.correlationId;
  }
  if (subCorrelationId == null) {
    subCorrelationId=String.format("%f",Math.random()).substring(2);
  }
  this.userId=FakePrincipals.SYSTEM_USER_ERN.getUserName();
  this.effectiveUserId=FakePrincipals.SYSTEM_USER_ERN.getUserName();
  this.correlationId=corrId + "-" + subCorrelationId;
  Contexts.child(corrId,this.correlationId);
  return (TYPE)this;
}

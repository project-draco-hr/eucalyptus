{
  Class msgClass=this.getClass();
  while (!msgClass.getSimpleName().endsWith("Type")) {
    msgClass=msgClass.getSuperclass();
  }
  TYPE reply=null;
  String replyType=msgClass.getName().replaceAll("Type","") + "ResponseType";
  try {
    Class responseClass=ClassLoader.getSystemClassLoader().loadClass(replyType);
    reply=(TYPE)responseClass.newInstance();
  }
 catch (  Exception e) {
    LOG.debug(e,e);
    throw new TypeNotPresentException(correlationId,e);
  }
  reply.setCorrelationId(this.getCorrelationId());
  reply.setUserId(this.getUserId());
  reply.setEffectiveUserId(this.getEffectiveUserId());
  return reply;
}

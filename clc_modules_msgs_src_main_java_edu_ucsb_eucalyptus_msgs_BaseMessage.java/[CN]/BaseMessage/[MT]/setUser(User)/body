{
  if (user == null) {
    this.account=null;
    this.user=null;
    this.userId=null;
    this.effectiveUserId=null;
  }
 else {
    try {
      this.account=user.getAccount();
    }
 catch (    AuthException ex) {
    }
    this.user=user;
    this.userId=user.getId();
    this.effectiveUserId=this.isAdministrator() ? User.SYSTEM.getName() : user.getId();
  }
  return this;
}

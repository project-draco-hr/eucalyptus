{
  if (t instanceof Error) {
    return new CheckException(correlationId,t.getMessage(),t,Severity.FATAL,config);
  }
 else   if (Severity.WARNING.ordinal() > severity.ordinal() && t instanceof RuntimeException) {
    return new CheckException(correlationId,t.getMessage(),t,Severity.WARNING,config);
  }
 else   if (t instanceof CheckException) {
    return new CheckException(correlationId,t.getMessage(),t,severity,config);
  }
 else {
    return new CheckException(correlationId,t.getMessage(),t,Severity.DEBUG,config);
  }
}

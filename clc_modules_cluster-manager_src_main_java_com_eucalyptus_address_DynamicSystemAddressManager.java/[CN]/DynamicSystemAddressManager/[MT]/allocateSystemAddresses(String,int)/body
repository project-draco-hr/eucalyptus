{
  List<Address> addressList=Lists.newArrayList();
  if (Addresses.getInstance().listDisabledValues().size() < count)   throw new NotEnoughResourcesAvailable("Not enough resources available: addresses (try --addressing private)");
  for (  Address addr : Addresses.getInstance().listDisabledValues()) {
    if (cluster.equals(addr.getCluster())) {
      addressList.add(addr.allocate(Component.eucalyptus.name()));
      addr.clearPending();
      addr.assign(Address.PENDING_ASSIGNMENT,Address.PENDING_ASSIGNMENT);
      addr.clearPending();
      if (--count == 0) {
        break;
      }
    }
  }
  if (count != 0) {
    for (    Address addr : addressList) {
      addr.release();
      addr.clearPending();
    }
    throw new NotEnoughResourcesAvailable("Not enough resources available: addresses (try --addressing private)");
  }
  return addressList;
}

{
  try {
    if (VmState.BURIED.apply(vm)) {
      terminateCache.remove(vm.getDisplayName());
      terminateDescribeCache.remove(vm.getDisplayName());
    }
 else     if (VmStateSet.DONE.apply(vm)) {
      RunningInstancesItemType ret=VmInstances.transform(vm);
      terminateCache.put(vm.getDisplayName(),vm);
      terminateDescribeCache.put(vm.getDisplayName(),ret);
      return VmInstance.Transitions.DELETE.apply(vm);
    }
  }
 catch (  Exception ex) {
    LOG.error(ex,ex);
  }
  return vm;
}

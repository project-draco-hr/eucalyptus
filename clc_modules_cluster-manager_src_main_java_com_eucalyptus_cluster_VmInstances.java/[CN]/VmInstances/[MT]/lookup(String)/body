{
  final EntityWrapper<VmInstance> db=Entities.get(VmInstance.class);
  try {
    final VmInstance vm=db.getUnique(VmInstance.named(null,name));
    if ((vm == null) || VmState.TERMINATED.equals(vm.getState())) {
      throw new NoSuchElementException("Failed to lookup vm instance: " + name);
    }
    return vm;
  }
 catch (  final Exception ex) {
    Logs.extreme().error(ex,ex);
    throw new NoSuchElementException("Failed to lookup vm instance: " + name + " because of: "+ ex.getMessage());
  }
}

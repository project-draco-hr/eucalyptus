{
  String addr=httpRequest.getUri();
  String[] addrStrings=addr.split("\\?");
  StringBuilder addrString=new StringBuilder();
  NavigableSet<String> sortedParams=new TreeSet<String>();
  Map<String,String> params=httpRequest.getParameters();
  if (params == null) {
    return "";
  }
  sortedParams.addAll(params.keySet());
  String key=null;
  while ((key=sortedParams.pollFirst()) != null) {
    addrString.append(key).append('=').append(params.get(key)).append('&');
  }
  if (addrString.length() > 0) {
    addrString.deleteCharAt(addrString.length() - 1);
  }
  return addrString.toString();
}

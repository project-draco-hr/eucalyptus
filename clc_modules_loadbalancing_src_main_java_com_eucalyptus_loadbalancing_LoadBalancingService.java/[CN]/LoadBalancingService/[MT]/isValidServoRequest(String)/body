{
  final Context ctx=Contexts.lookup();
  try {
    final LoadBalancerServoInstance instance=LoadBalancers.lookupServoInstance(instanceId);
    InetSocketAddress remoteAddr=((InetSocketAddress)ctx.getChannel().getRemoteAddress());
    String remoteHost=remoteAddr.getAddress().getHostAddress();
    if (!(remoteHost.equals(instance.getAddress()) || remoteHost.equals(instance.getPrivateIp())))     throw new LoadBalancingException(String.format("IP address (%s) not match with record (%s-%s)",remoteHost,instance.getAddress(),instance.getPrivateIp()));
  }
 catch (  final LoadBalancingException ex) {
    throw ex;
  }
catch (  Exception ex) {
    throw new LoadBalancingException("unknown error",ex);
  }
}

{
  try {
    final EucalyptusPreRegisterImageTask task=new EucalyptusPreRegisterImageTask(deviceMapping);
    final CheckedListenableFuture<Boolean> result=task.dispatch();
    if (result.get())     return task.getImageId();
 else     throw new EucalyptusCloudException("Failed to pre-register the image");
  }
 catch (  final Exception ex) {
    throw Exceptions.toUndeclared(ex);
  }
}

{
  super();
  PipelineRegistry.getInstance().register(new HeartbeatPipeline());
  PipelineRegistry.getInstance().register(new MetadataPipeline());
  PipelineRegistry.getInstance().register(new EucalyptusSoapPipeline());
  PipelineRegistry.getInstance().register(new ElasticFoxPipeline());
  PipelineRegistry.getInstance().register(new WalrusRESTPipeline());
  PipelineRegistry.getInstance().register(new WalrusRESTPostPipeline());
  PipelineRegistry.getInstance().register(new EucalyptusQueryPipeline());
  PipelineRegistry.getInstance().register(new WalrusSoapPipeline());
  RemoteBootstrapperServer server=RemoteBootstrapperServer.getServer();
  if (server != null && port == server.getPort()) {
    LOG.info("Swapping over to full webservices stack.");
    this.port=server.getPort();
    this.socketFactory=server.getSocketFactory();
    this.bootstrap=server.getBootstrap();
    this.bootstrap.setPipelineFactory(new NioServerPipelineFactory());
  }
 else {
    this.port=port;
    this.socketFactory=new NioServerSocketChannelFactory(Executors.newCachedThreadPool(),Executors.newCachedThreadPool());
    this.bootstrap=new ServerBootstrap(this.socketFactory);
    this.bootstrap.setPipelineFactory(new NioServerPipelineFactory());
  }
}

{
  Properties properties=System.getProperties();
  String mailHost=properties.getProperty("mail.smtp.host");
  if (mailHost == null) {
    mailHost=InetAddress.getLocalHost().getHostName();
    properties.setProperty("mail.smtp.host",mailHost);
  }
  try {
    send(from,to,subject,body);
  }
 catch (  Exception ex) {
    properties.setProperty("mail.smtp.host","mailhost");
    try {
      send(from,to,subject,body);
    }
 catch (    Exception exception) {
      properties.setProperty("mail.smtp.host","localhost");
      try {
        send(from,to,subject,body);
      }
 catch (      Exception exception1) {
        LOG.error("Unable to send mail" + exception1);
      }
    }
  }
}

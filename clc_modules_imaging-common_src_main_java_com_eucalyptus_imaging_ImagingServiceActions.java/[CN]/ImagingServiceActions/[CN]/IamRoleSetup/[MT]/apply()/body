{
  final String rolePath=DEFAULT_ROLE_PATH_PREFIX;
  final String roleName=String.format("%s-%s",DEFAULT_ROLE_NAME,this.getGroupId());
  final String assumeRolePolicy=DEFAULT_ASSUME_ROLE_POLICY;
  try {
    List<RoleType> result=EucalyptusActivityTasks.getInstance().listRoles(rolePath);
    if (result != null) {
      for (      RoleType r : result) {
        if (roleName.equals(r.getRoleName())) {
          role=r;
          break;
        }
      }
    }
  }
 catch (  Exception ex) {
    throw new ImagingServiceActionException("Failed to list IAM roles",ex);
  }
  if (role == null) {
    try {
      role=EucalyptusActivityTasks.getInstance().createRole(roleName,rolePath,assumeRolePolicy);
    }
 catch (    Exception ex) {
      throw new ImagingServiceActionException("Failed to create the role for Imaging Service Vms");
    }
  }
  if (role == null)   throw new ImagingServiceActionException("No role is found for Imaging Service Vms");
  return true;
}

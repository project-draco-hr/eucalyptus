{
  VmInstance vm=VmInstances.getInstance().lookup(this.getRequest().getInstanceId());
  String output=null;
  try {
    output=new String(Base64.decode(reply.getOutput().getBytes()));
    if (!"EMPTY".equals(output))     vm.setConsoleOutput(new StringBuffer().append(output));
  }
 catch (  ArrayIndexOutOfBoundsException e1) {
  }
  reply.setOutput(new String(Base64.encode(vm.getConsoleOutput().toString().getBytes())));
  GetPasswordDataResponseType rep=msg.getReply();
  rep.setInstanceId(this.getRequest().getInstanceId());
  rep.setTimestamp(new Date());
  if (vm.getPasswordData() != null) {
    rep.setOutput(vm.getPasswordData());
  }
 else {
    rep.setOutput("");
  }
  Messaging.dispatch("vm://ReplyQueue",rep);
}

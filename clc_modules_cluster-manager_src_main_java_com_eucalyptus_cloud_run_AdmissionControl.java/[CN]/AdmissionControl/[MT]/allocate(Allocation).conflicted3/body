{
  if (NetworkGroups.networkingConfiguration().hasPrivateAddressing()) {
    EntityTransaction db=Entities.get(NetworkGroup.class);
    try {
      NetworkGroup net=Entities.merge(allocInfo.getPrimaryNetwork());
      ExtantNetwork exNet=net.extantNetwork();
      for (      ResourceToken rscToken : allocInfo.getAllocationTokens()) {
        rscToken.setExtantNetwork(exNet);
      }
      Entities.merge(net);
      db.commit();
    }
 catch (    TransientEntityException ex) {
      LOG.error(ex,ex);
      db.rollback();
      throw ex;
    }
catch (    Exception ex) {
      LOG.error(ex,ex);
      db.rollback();
      throw ex;
    }
  }
}

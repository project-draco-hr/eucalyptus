{
  ArrayList<DownloadInfo> downloadsList=Lists.newArrayList();
  HttpClient httpClient=new HttpClient();
  String extraVersion=System.getProperty("euca.extra_version");
  HttpParams defaultParams=httpClient.getParams().getDefaults();
  httpClient.getParams().setParameter(HttpMethodParams.USER_AGENT,defaultParams.getParameter(HttpMethodParams.USER_AGENT) + " " + extraVersion);
  if (HttpServerBootstrapper.httpProxyHost != null && (HttpServerBootstrapper.httpProxyHost.length() > 0)) {
    String proxyHost=HttpServerBootstrapper.httpProxyHost;
    if (HttpServerBootstrapper.httpProxyPort != null && (HttpServerBootstrapper.httpProxyPort.length() > 0)) {
      int proxyPort=Integer.parseInt(HttpServerBootstrapper.httpProxyPort);
      httpClient.getHostConfiguration().setProxy(proxyHost,proxyPort);
    }
 else {
      httpClient.getHostConfiguration().setProxyHost(new ProxyHost(proxyHost));
    }
  }
  GetMethod method=new GetMethod(downloadsUrl);
  method.getParams().setSoTimeout(TIMEOUT);
  try {
    httpClient.executeMethod(method);
    String str="";
    InputStream in=method.getResponseBodyAsStream();
    byte[] readBytes=new byte[1024];
    int bytesRead=-1;
    while ((bytesRead=in.read(readBytes)) > 0) {
      str+=new String(readBytes,0,bytesRead);
    }
    String entries[]=str.split("[\\r\\n]+");
    for (int i=0; i < entries.length; i++) {
      String entry[]=entries[i].split("\\t");
      if (entry.length == 3) {
        downloadsList.add(new DownloadInfo(entry[0],entry[1],entry[2]));
      }
    }
  }
 catch (  MalformedURLException e) {
    LOG.error("Malformed URL exception: " + downloadsUrl,e);
    LOG.debug(e,e);
  }
catch (  IOException e) {
    LOG.error("I/O exception",e);
    LOG.debug(e,e);
  }
 finally {
    method.releaseConnection();
  }
  return downloadsList;
}

{
  EntityWrapper<SystemConfiguration> confDb=new EntityWrapper<SystemConfiguration>();
  SystemConfiguration conf=null;
  try {
    conf=confDb.getUnique(new SystemConfiguration());
    SystemConfiguration.validateSystemConfiguration(conf);
    confDb.commit();
  }
 catch (  EucalyptusCloudException e) {
    LOG.warn("Failed to get system configuration. Loading defaults.");
    conf=SystemConfiguration.validateSystemConfiguration(null);
    confDb.add(conf);
    confDb.commit();
  }
catch (  Throwable t) {
    LOG.error("Unable to get system configuration.");
    confDb.rollback();
    return validateSystemConfiguration(null);
  }
  return conf;
}

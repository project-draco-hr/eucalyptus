{
  try {
    String cloudHost=SystemConfiguration.getSystemConfiguration().getCloudHost();
    if (cloudHost == null) {
      for (      WalrusConfiguration w : ServiceConfigurations.getConfigurations(WalrusConfiguration.class)) {
        if (Internets.testLocal(w.getHostName())) {
          cloudHost=w.getHostName();
          break;
        }
      }
    }
    if (cloudHost == null) {
      cloudHost=Internets.getAllAddresses().get(0);
    }
    return String.format("http://%s:" + System.getProperty("euca.ws.port") + "/services/Eucalyptus",cloudHost);
  }
 catch (  PersistenceException e) {
    return "http://127.0.0.1:8773/services/Eucalyptus";
  }
}

{
  try {
    String cloudHost=SystemConfiguration.getSystemConfiguration().getCloudHost();
    if (cloudHost == null) {
      for (      WalrusConfiguration w : Configuration.getWalrusConfigurations()) {
        if (NetworkUtil.testLocal(w.getHostName())) {
          cloudHost=w.getHostName();
          break;
        }
      }
    }
    if (cloudHost == null) {
      try {
        cloudHost=NetworkUtil.getAllAddresses().get(0);
      }
 catch (      SocketException e) {
      }
    }
    return String.format("http://%s:8773/services/Eucalyptus",cloudHost);
  }
 catch (  EucalyptusCloudException e) {
    return "http://127.0.0.1:8773/services/Eucalyptus";
  }
}

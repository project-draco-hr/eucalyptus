def run(self):
    if self.test:
        print self.command
        return 0
    self.process = subprocess.Popen(self.command, shell=True, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    while (self.process.poll() == None):
        time.sleep(1)
        t = self.process.communicate()
        self._stdout_fp.write(t[0])
        self._stderr_fp.write(t[1])
    self.exit_code = self.process.returncode
    return self.exit_code

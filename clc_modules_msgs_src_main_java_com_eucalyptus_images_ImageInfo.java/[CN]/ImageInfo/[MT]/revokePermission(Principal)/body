{
  try {
    ImageInfo search=new ImageInfo();
    search.setImageId(this.imageId);
    Transactions.one(search,new Tx<ImageInfo>(){
      @Override public void fire(      ImageInfo t) throws Throwable {
        ImageAuthorization imgAuth=new ImageAuthorization(user.getName());
        t.getPermissions().remove(imgAuth);
        if (!t.getPermissions().contains(new ImageAuthorization("all"))) {
          t.setImagePublic(false);
        }
      }
    }
);
  }
 catch (  TransactionException e) {
    LOG.debug(e,e);
  }
  return this;
}

{
  fileName=dir + File.separator + fileName;
  String fileNameWExt=fileName + ".groovy";
  if (!new File(fileName).exists() && new File(fileNameWExt).exists()) {
    fileName=fileNameWExt;
  }
  FileReader fileReader=null;
  try {
    fileReader=new FileReader(fileName);
    T ret=(T)getGroovyEngine().eval(fileReader);
    return ret;
  }
 catch (  Throwable e) {
    LOG.debug(e,e);
    throw new ScriptExecutionFailedException("Executing the requested script failed: " + fileName,e);
  }
 finally {
    if (fileReader != null)     try {
      fileReader.close();
    }
 catch (    IOException e) {
      LOG.error(e);
    }
  }
}

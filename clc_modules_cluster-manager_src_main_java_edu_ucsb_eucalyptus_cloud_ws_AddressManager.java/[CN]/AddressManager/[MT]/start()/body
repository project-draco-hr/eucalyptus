{
synchronized (AddressManager.class) {
    EntityWrapper<Address> db=new EntityWrapper<Address>();
    try {
      List<Address> addrList=db.query(new Address());
      db.commit();
      for (      Address addr : addrList) {
        try {
          Addresses.getInstance().replace(addr.getName(),addr);
        }
 catch (        NoSuchElementException e) {
          Addresses.getInstance().register(addr);
        }
      }
    }
 catch (    Throwable e) {
      db.rollback();
    }
  }
}

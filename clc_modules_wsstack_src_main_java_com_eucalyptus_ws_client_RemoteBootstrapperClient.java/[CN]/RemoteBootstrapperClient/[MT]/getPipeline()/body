{
  ChannelPipeline pipeline=Channels.pipeline();
  ChannelUtil.addPipelineMonitors(pipeline);
  pipeline.addLast("decoder",new HttpRequestEncoder());
  pipeline.addLast("encoder",new HttpResponseDecoder());
  pipeline.addLast("chunkedWriter",new ChunkedWriteHandler());
  pipeline.addLast("deserialize",new SoapMarshallingHandler());
  try {
    pipeline.addLast("ws-security",new InternalWsSecHandler());
  }
 catch (  GeneralSecurityException e) {
    LOG.error(e,e);
  }
  pipeline.addLast("ws-addressing",new AddressingHandler());
  pipeline.addLast("build-soap-envelope",new SoapHandler());
  pipeline.addLast("binding",new BindingHandler(BindingManager.getBinding("msgs_eucalyptus_ucsb_edu")));
  pipeline.addLast("handler",new HeartbeatHandler());
  return pipeline;
}

{
  if (event instanceof LifecycleEvent) {
    LifecycleEvent e=(LifecycleEvent)event;
    if (!Walrus.class.equals(e.getIdentity().getClass()) && !Storage.class.equals(e.getIdentity().getClass())) {
      return;
    }
 else     if (e.getConfiguration().getPort() < 0) {
      return;
    }
 else {
      ServiceConfiguration config=e.getConfiguration();
      if (event instanceof StartComponentEvent) {
        this.fireHeartbeat();
      }
 else       if (event instanceof StopComponentEvent) {
        this.fireHeartbeat();
      }
 else       if (event instanceof EnableComponentEvent) {
        this.fireHeartbeat();
      }
 else       if (event instanceof DisableComponentEvent) {
        this.fireHeartbeat();
      }
    }
  }
 else   if (event instanceof ClockTick) {
    if (((ClockTick)event).isBackEdge()) {
      this.fireHeartbeat();
    }
  }
}

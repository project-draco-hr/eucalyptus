def main(self):
    rootwrap = os.path.join(self.config['EUCALYPTUS'], RootWrapPath)
    if (not os.path.isfile(rootwrap)):
        raise IOError(('Cannot find %s or not executable' % rootwrap))
    self.euca_user_name = self.config['EUCA_USER']
    root_data = pwd.getpwnam('root')
    if (self.euca_user_name == 'root'):
        self.euca_user_id = root_data.pw_uid
    else:
        try:
            user_data = pwd.getpwnam(self.euca_user_name)
        except KeyError:
            raise ValueError('Is EUCA_USER defined?')
        self.euca_user_id = user_data.pw_uid
        self.euca_user_group_id = user_data.pw_gid
        os.chown(root_data.pw_uid, self.euca_user_group_id)
        os.chmod(rootwrap, 2536)
    self.instance_path = self.config['INSTANCE_PATH']
    if (self.instance_path and (self.instance_path != 'not_configured')):
        if (not os.path.isdir(self.instance_path)):
            os.mkdir(self.instance_path)
        os.chown(self.euca_user_id, self.euca_user_group_id)
    self.make_dirs()
    self.chown_paths()
    self.chmod_paths()

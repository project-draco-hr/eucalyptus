{
  if (!started) {
    try {
      brokerService=new BrokerService();
      brokerService.setBrokerName(brokerName);
      brokerService.setDataDirectory(brokerDataDir);
      brokerService.addConnector(brokerUrl);
      brokerThread=new JmsBrokerThread(brokerService);
      brokerThread.start();
      Thread.sleep(1000);
      if (brokerThread.getStartException() != null) {
        throw brokerThread.getStartException();
      }
    }
 catch (    Exception ex) {
      throw new StartableException(ex);
    }
    started=true;
    log.info("Broker started");
  }
 else {
    log.warn("Broker started redundantly");
  }
}

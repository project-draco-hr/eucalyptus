{
  if (!(Bootstrap.isFinished() && Topology.isEnabled(Compute.class)))   return;
  if (emi != null) {
    try {
      final List<ImageDetails> images=EucalyptusActivityTasks.getInstance().describeImagesWithVerbose(Lists.newArrayList(emi));
      if (images == null || images.size() <= 0)       throw new EucalyptusCloudException("No such EMI is found in the system");
      if (!images.get(0).getImageId().toLowerCase().equals(emi.toLowerCase()))       throw new EucalyptusCloudException("No such EMI is found in the system");
    }
 catch (    final EucalyptusCloudException ex) {
      throw ex;
    }
catch (    final Exception ex) {
      throw new EucalyptusCloudException("Failed to verify EMI in the system");
    }
  }
  if (instanceType != null) {
    try {
      final List<VmTypeDetails> vmTypes=EucalyptusActivityTasks.getInstance().describeInstanceTypes(Lists.newArrayList(instanceType));
      if (vmTypes.size() <= 0)       throw new EucalyptusCloudException("Invalid instance type -- " + instanceType);
    }
 catch (    final EucalyptusCloudException ex) {
      throw ex;
    }
catch (    final Exception ex) {
      throw new EucalyptusCloudException("Failed to verify instance type -- " + instanceType);
    }
  }
  if (!Topology.isEnabled(LoadBalancingBackend.class))   return;
  if ((emi != null && emi.length() > 0) || (instanceType != null && instanceType.length() > 0) || (keyname != null)|| (initScript != null)) {
    Threads.enqueue(LoadBalancingBackend.class,LoadBalancerASGroupCreator.class,1,new AsyncPropertyChanger(emi,instanceType,keyname,initScript));
  }
}

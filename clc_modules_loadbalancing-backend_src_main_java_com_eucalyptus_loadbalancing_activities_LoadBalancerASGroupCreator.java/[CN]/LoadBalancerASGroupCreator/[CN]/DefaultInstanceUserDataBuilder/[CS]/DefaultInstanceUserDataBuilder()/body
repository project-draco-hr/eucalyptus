{
  dataDict=new ConcurrentHashMap<String,String>();
  try {
    List<ServiceStatusType> services=EucalyptusActivityTasks.getInstance().describeServices("eucalyptus");
    if (services == null || services.size() <= 0)     throw new EucalyptusActivityException("failed to describe eucalyptus services");
    ServiceStatusType service=services.get(0);
    String serviceUrl=service.getServiceId().getUri();
    String tmp=serviceUrl.replace("http://","").replace("https://","");
    String host=tmp.substring(0,tmp.indexOf(":"));
    tmp=tmp.replace(host + ":","");
    String port=tmp.substring(0,tmp.indexOf("/"));
    String path=tmp.replace(port + "/","");
    this.add("eucalyptus_host",host);
    this.add("eucalyptus_port",port);
    this.add("eucalyptus_path",path);
    this.add("elb_service_url",String.format("loadbalancing.%s",DNSProperties.DOMAIN));
    this.add("euare_service_url",String.format("euare.%s",DNSProperties.DOMAIN));
    final ServiceConfiguration dns=Topology.lookup(Dns.class);
    this.add("dns_server",dns.getInetAddress().getHostAddress());
    if (LOADBALANCER_VM_NTP_SERVER != null && LOADBALANCER_VM_NTP_SERVER.length() > 0) {
      this.add("ntp_server",LOADBALANCER_VM_NTP_SERVER);
    }
    if (LOADBALANCER_APP_COOKIE_DURATION != null) {
      this.add("app-cookie-duration",LOADBALANCER_APP_COOKIE_DURATION);
    }
  }
 catch (  Exception ex) {
    throw Exceptions.toUndeclared(ex);
  }
}

{
  ClusterConfiguration config=this.newInstance(partitionName,name,host,port);
  try {
    Partition part=Partitions.lookup(config);
    part.syncKeysToDisk();
    ServiceConfigurations.store(config);
  }
 catch (  ServiceRegistrationException ex) {
    throw ex;
  }
catch (  Throwable ex) {
    LOG.error(ex,ex);
    throw new ServiceRegistrationException(String.format("Unexpected error caused cluster registration to fail for: partition=%s name=%s host=%s port=%d",partitionName,name,host,port),ex);
  }
  return config;
}

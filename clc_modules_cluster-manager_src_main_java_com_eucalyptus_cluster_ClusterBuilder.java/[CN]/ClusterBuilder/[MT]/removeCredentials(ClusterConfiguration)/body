{
  EntityWrapper<ClusterCredentials> credDb=Authentication.getEntityWrapper();
  try {
    List<ClusterCredentials> ccCreds=credDb.query(new ClusterCredentials(config.getName()));
    for (    ClusterCredentials ccert : ccCreds) {
      credDb.recast(X509Cert.class).delete(ccert.getClusterCertificate());
      credDb.recast(X509Cert.class).delete(ccert.getNodeCertificate());
      credDb.delete(ccert);
    }
    credDb.commit();
  }
 catch (  Exception e) {
    LOG.error(e,e);
    credDb.rollback();
  }
}

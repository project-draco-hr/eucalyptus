{
  EntityWrapper<ClusterCredentials> credDb=Authentication.getEntityWrapper();
  try {
    List<ClusterCredentials> ccCreds=credDb.query(new ClusterCredentials(config.getName()));
    for (    ClusterCredentials ccert : ccCreds) {
      credDb.recast(X509Cert.class).delete(ccert.getClusterCertificate());
      credDb.recast(X509Cert.class).delete(ccert.getNodeCertificate());
      credDb.delete(ccert);
      LOG.debug("Deleting cluster certificate: " + ccert.getClusterName() + "\n"+ X509Cert.toCertificate(ccert.getClusterCertificate())+ "\n"+ X509Cert.toCertificate(ccert.getNodeCertificate()));
    }
    credDb.commit();
  }
 catch (  Exception e) {
    LOG.error(e,e);
    credDb.rollback();
  }
}

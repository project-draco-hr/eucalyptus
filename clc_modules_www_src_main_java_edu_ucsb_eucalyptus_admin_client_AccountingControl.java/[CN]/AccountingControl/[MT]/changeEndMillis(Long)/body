{
  Date now=new Date();
  Long currentTime=now.getTime();
  if (millis < this.startMillis) {
    this.endMillis=this.startMillis;
  }
 else   if ((millis > currentTime)) {
    this.endMillis=currentTime;
  }
 else   if (millis < 0) {
    this.endMillis=this.startMillis;
  }
 else {
    this.endMillis=millis;
  }
  return this.endMillis;
}

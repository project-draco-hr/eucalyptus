{
  RegisterComponentResponseType reply=(RegisterComponentResponseType)request.getReply();
  reply.set_return(false);
  String name=request.getName(), host=request.getHost();
  Integer port=request.getPort();
  ServiceBuilder builder=builders.get(request.getClass());
  if (!builder.checkAdd(name,host,port)) {
    return reply;
  }
  try {
    ComponentConfiguration existingName=registry.lookupByName(name,builder.newInstance());
    throw new EucalyptusCloudException("Component with name=" + request.getName() + " already exists at host="+ existingName.getHostName());
  }
 catch (  EucalyptusCloudException e) {
    throw e;
  }
catch (  Exception e1) {
    try {
      ComponentConfiguration existingHost=registry.lookupByName(name,builder.newInstance());
      throw new EucalyptusCloudException("Component with host=" + request.getName() + " already exists with name="+ existingHost.getHostName());
    }
 catch (    EucalyptusCloudException e) {
      throw e;
    }
catch (    Exception e) {
    }
  }
  host=NetworkUtil.tryToResolve(host);
  ComponentConfiguration newComponent=registry.store(builder.newInstance(name,host,port,request));
  builder.fireStart(newComponent);
  reply.set_return(true);
  return reply;
}

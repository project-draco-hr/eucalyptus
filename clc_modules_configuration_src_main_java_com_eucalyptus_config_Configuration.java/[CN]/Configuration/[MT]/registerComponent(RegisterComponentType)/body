{
  Component component=Components.oneWhichHandles(request.getClass());
  ComponentId componentId=component.getComponentId();
  RegisterComponentResponseType reply=(RegisterComponentResponseType)request.getReply();
  String name=request.getName();
  String hostName=request.getHost();
  Integer port=request.getPort();
  Assertions.assertNotNull(name,"Name must not be null: " + request);
  Assertions.assertNotNull(hostName,"Hostname must not be null: " + request);
  Assertions.assertNotNull(port,"Port must not be null: " + request);
  String partition=request.getPartition();
  if (!component.getComponentId().isPartitioned()) {
    partition=componentId.getPartition();
    LOG.error("Unpartitioned component (" + componentId.getFullName() + ") is being registered w/o a partition.  Using fixed partition="+ partition+ " for request: "+ request);
  }
 else   if (component.getComponentId().isPartitioned() && partition == null) {
    partition=name;
    LOG.error("Partitioned component is being registered w/o a partition.  Using partition=name=" + partition + " for request: "+ request);
  }
  try {
    reply.set_return(ComponentRegistrationHandler.register(component,partition,name,hostName,port));
  }
 catch (  Throwable ex) {
    throw new EucalyptusCloudException("Component registration failed because: " + ex.getMessage(),ex);
  }
  return reply;
}

{
  DescribeComponentsResponseType reply=(DescribeComponentsResponseType)request.getReply();
  ComponentConfiguration searchConfig;
  try {
    searchConfig=ConfigurationUtil.getConfigurationInstance(request);
  }
 catch (  Exception e1) {
    LOG.error("Failed to find configuration type for request of type: " + request.getClass().getSimpleName());
    throw new EucalyptusCloudException("Failed to find configuration type for request of type: " + request.getClass().getSimpleName());
  }
  List<ComponentInfoType> listConfigs=reply.getRegistered();
  EntityWrapper<ComponentConfiguration> db=Configuration.getEntityWrapper();
  try {
    List<ComponentConfiguration> componentList=db.query(searchConfig);
    for (    ComponentConfiguration c : componentList) {
      listConfigs.add(new ComponentInfoType(c.getName(),c.getHostName()));
    }
    db.commit();
  }
 catch (  Exception e) {
    LOG.error(e,e);
    db.commit();
    throw new EucalyptusCloudException(e);
  }
catch (  Throwable t) {
    db.commit();
  }
  return reply;
}

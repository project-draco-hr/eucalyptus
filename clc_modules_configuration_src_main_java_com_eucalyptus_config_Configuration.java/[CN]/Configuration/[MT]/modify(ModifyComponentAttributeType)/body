{
  final ModifyComponentAttributeResponseType reply=request.getReply();
  if (!attributes.contains(request.getAttribute())) {
    throw new EucalyptusCloudException("Request to modify unknown attribute: " + request.getAttribute());
  }
  final Component component=Components.oneWhichHandles(request.getClass());
  final ServiceBuilder builder=component.getBuilder();
  LOG.info("Using builder: " + builder.getClass().getSimpleName());
  if ("state".equals(request.getAttribute())) {
    ServiceConfiguration conf;
    try {
      conf=builder.lookupByName(request.getName());
    }
 catch (    final ServiceRegistrationException e) {
      LOG.info(builder.getClass().getSimpleName() + ": lookupByName failed.");
      LOG.error(e,e);
      throw e;
    }
    if ("enable".startsWith(request.getValue().toLowerCase())) {
      try {
        builder.getComponent().enableTransition(conf).get();
      }
 catch (      final Exception ex) {
        LOG.error(ex,ex);
        throw new EucalyptusCloudException(ex.getMessage(),ex);
      }
    }
 else     if ("disable".startsWith(request.getValue().toLowerCase())) {
      builder.getComponent().disableService(conf);
    }
  }
  return reply;
}

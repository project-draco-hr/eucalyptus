{
  try {
    return getStorageControllerConfiguration(requestedZone);
  }
 catch (  Exception e) {
    try {
      Group g=Iterables.find(Groups.listAllGroups(),new Predicate<Group>(){
        @Override public boolean apply(        Group arg0){
          return Iterables.any(arg0.getAuthorizations(),new Predicate<Authorization>(){
            @Override public boolean apply(            Authorization arg0){
              return arg0.check(new AvailabilityZonePermission(requestedZone));
            }
          }
);
        }
      }
);
      if (g == null) {
        throw new EucalyptusCloudException("Storage services are not available for the requested availability zone.");
      }
 else {
        return getStorageControllerConfiguration(g.getName());
      }
    }
 catch (    Throwable ex) {
      LOG.error(ex,ex);
      throw new EucalyptusCloudException("Storage services are not available for the requested availability zone.",ex);
    }
  }
}

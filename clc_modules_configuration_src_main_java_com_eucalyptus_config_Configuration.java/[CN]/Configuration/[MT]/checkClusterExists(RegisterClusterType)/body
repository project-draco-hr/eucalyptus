{
  EntityWrapper<ClusterConfiguration> db=Configuration.getEntityWrapper();
  ClusterConfiguration existingName=null;
  ClusterConfiguration existingHost=null;
  try {
    existingName=db.getUnique(ClusterConfiguration.byClusterName(request.getName()));
    existingHost=db.getUnique(ClusterConfiguration.byHostName(request.getHost()));
  }
 catch (  Exception e) {
    if (existingHost != null) {
      throw new EucalyptusCloudException("Cluster already exists: " + request.getName() + " at "+ existingHost.getHostName());
    }
 else     if (existingName != null) {
      throw new EucalyptusCloudException("Cluster already exists: " + existingName.getClusterName() + " at "+ request.getHost());
    }
  }
 finally {
    db.rollback();
  }
}

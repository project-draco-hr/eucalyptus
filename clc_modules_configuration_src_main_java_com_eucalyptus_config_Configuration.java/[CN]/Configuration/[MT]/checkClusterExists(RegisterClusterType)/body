{
  EntityWrapper<ClusterConfiguration> db=Configuration.getEntityWrapper();
  ClusterConfiguration existingName=null;
  ClusterConfiguration existingHost=null;
  try {
    existingName=db.getUnique(new ClusterConfiguration(request.getName(),request.getHost(),request.getPort()));
    return true;
  }
 catch (  Exception e1) {
    try {
      existingName=db.getUnique(ClusterConfiguration.byClusterName(request.getName()));
      existingHost=db.getUnique(ClusterConfiguration.byHostName(request.getHost()));
    }
 catch (    Exception e) {
      if (existingHost != null) {
        throw new EucalyptusCloudException("Cluster at host=" + existingHost.getHostName() + " already exists with name="+ request.getName());
      }
 else       if (existingName != null) {
        throw new EucalyptusCloudException("Cluster with name=" + request.getName() + " already exists at host="+ existingName.getHostName());
      }
    }
  }
 finally {
    db.rollback();
  }
  return false;
}

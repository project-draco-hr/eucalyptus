{
  EntityWrapper<ComponentConfiguration> db=Configuration.getEntityWrapper();
  try {
    ComponentConfiguration searchConfig=Configuration.getConfigurationInstance(request);
    searchConfig.setName(request.getName());
    ComponentConfiguration componentConfig=db.getUnique(searchConfig);
    db.delete(componentConfig);
    db.commit();
  }
 catch (  Exception e) {
    db.rollback();
    throw e instanceof EucalyptusCloudException ? (EucalyptusCloudException)e : new EucalyptusCloudException(e);
  }
  if (request instanceof DeregisterClusterType) {
    try {
      Configuration.removeClusterCredentials(request.getName());
    }
 catch (    Exception e) {
      LOG.error("BUG: removed cluster but failed to remove the credentials.");
    }
  }
  DeregisterComponentResponseType reply=(DeregisterComponentResponseType)request.getReply();
  reply.set_return(true);
  return reply;
}

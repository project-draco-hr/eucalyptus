{
  DeregisterComponentResponseType reply=(DeregisterComponentResponseType)request.getReply();
  reply.set_return(true);
  EntityWrapper<ComponentConfiguration> db=null;
  ComponentConfiguration componentConfig=null;
  try {
    db=Configuration.getEntityWrapper();
    ComponentConfiguration searchConfig=ConfigurationUtil.getConfigurationInstance(request);
    searchConfig.setName(request.getName());
    componentConfig=db.getUnique(searchConfig);
    db.delete(componentConfig);
    db.commit();
  }
 catch (  Exception e) {
    db.rollback();
    return reply;
  }
  if (request instanceof DeregisterClusterType) {
    try {
      ConfigurationUtil.removeClusterCredentials(request.getName());
    }
 catch (    Exception e) {
      LOG.error("BUG: removed cluster but failed to remove the credentials.");
    }
    try {
      db=Configuration.getEntityWrapper();
      StorageControllerConfiguration searchConfig=new StorageControllerConfiguration();
      searchConfig.setName(request.getName());
      ComponentConfiguration scComponentConfig=db.getUnique(searchConfig);
      db.delete(scComponentConfig);
      db.commit();
    }
 catch (    Exception e) {
      db.rollback();
    }
  }
  fireStopComponent(componentConfig);
  return reply;
}

{
  final List<String> uniqueEntries=insert.getResult();
  final List<String> newInstances=launcher.getResult();
  if (uniqueEntries.size() != newInstances.size())   throw new EventHandlerException("Number of launched instances doesn't match with the database record");
  final EntityTransaction db=Entities.get(LoadBalancerServoInstance.class);
  try {
    for (    String uniqueId : uniqueEntries) {
      String instanceId=newInstances.remove(0);
      final LoadBalancerServoInstance exist=Entities.uniqueResult(LoadBalancerServoInstance.fromUniqueName(uniqueId));
      exist.setInstanceId(instanceId);
      Entities.persist(exist);
    }
    db.commit();
  }
 catch (  NoSuchElementException ex) {
    db.rollback();
    throw new EventHandlerException("can't find the loadbalancer VM from the db",ex);
  }
catch (  Exception ex) {
    db.rollback();
    throw new EventHandlerException("failed to update the loadbalancer VM entries",ex);
  }
}

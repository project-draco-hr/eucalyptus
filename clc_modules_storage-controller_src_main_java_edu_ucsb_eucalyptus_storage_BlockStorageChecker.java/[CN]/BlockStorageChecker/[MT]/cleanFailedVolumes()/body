{
  EntityWrapper<VolumeInfo> db=StorageController.getEntityWrapper();
  VolumeInfo volumeInfo=new VolumeInfo();
  volumeInfo.setStatus(StorageProperties.Status.failed.toString());
  List<VolumeInfo> volumeInfos=db.query(volumeInfo);
  for (  VolumeInfo volInfo : volumeInfos) {
    String volumeId=volInfo.getVolumeId();
    LOG.info("Cleaning failed volume " + volumeId);
    blockManager.cleanVolume(volumeId);
    db.delete(volInfo);
  }
  db.commit();
}

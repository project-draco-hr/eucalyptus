{
  if (EucalyptusProperties.disableNetworking)   return;
  int addrCount=0;
  List<ResourceToken> allocTokeList=vmAllocInfo.getAllocationTokens();
  for (  ResourceToken token : allocTokeList) {
    addrCount+=token.getAmount();
  }
  if ("public".equals(vmAllocInfo.getRequest().getAddressingType()) || vmAllocInfo.getRequest().getAddressingType() == null) {
    List<Address> addressList;
    try {
      addressList=AddressUtil.tryAssignSystemAddresses(addrCount);
    }
 catch (    Exception e) {
      throw new NotEnoughResourcesAvailable(e.getMessage(),e);
    }
    Iterator<Address> iter=addressList.listIterator();
    for (    ResourceToken token : allocTokeList) {
      for (int i=0; i < token.getAmount(); i++) {
        Address next=iter.next();
        token.getAddresses().add(next.getName());
      }
    }
  }
}

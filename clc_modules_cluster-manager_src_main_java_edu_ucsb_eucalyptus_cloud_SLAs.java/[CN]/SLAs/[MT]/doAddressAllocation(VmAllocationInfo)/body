{
  int addrCount=0;
  List<ResourceToken> allocTokeList=vmAllocInfo.getAllocationTokens();
  for (  ResourceToken token : allocTokeList) {
    addrCount+=token.getAmount();
  }
  if (!EucalyptusProperties.disableNetworking && ("public".equals(vmAllocInfo.getRequest().getAddressingType()) || vmAllocInfo.getRequest().getAddressingType() == null)) {
    NavigableSet<String> addresses=AddressManager.allocateAddresses(addrCount);
    for (    ResourceToken token : allocTokeList) {
      for (int i=0; i < token.getAmount(); i++) {
        token.getAddresses().add(addresses.pollFirst());
      }
    }
  }
}

{
  if (this.em.isOpen()) {
    try {
      this.em.flush();
      this.delegate.commit();
      this.em.close();
    }
 catch (    Throwable e1) {
      this.em.close();
      throw new RuntimeException(e1);
    }
  }
 else {
    DatabaseUtil.debug();
    throw new RuntimeException("Database is closed already.");
  }
}

{
  final String userId=evt.getUserId();
  final String systemUserId=getSystemUserId();
  String acctNumber=null;
  try {
    acctNumber=Accounts.lookupUserById(userId).getAccountNumber();
  }
 catch (  final AuthException ex) {
    throw new EventHandlerException("Failed to lookup account number",ex);
  }
  final String launchConfigName=String.format("lc-euca-internal-db-%s-%s",acctNumber,evt.getDbInstanceIdentifier());
  try {
    final LaunchConfigurationType lcFound=AutoScalingClient.getInstance().describeLaunchConfiguration(systemUserId,launchConfigName);
    if (lcFound != null) {
      try {
        AutoScalingClient.getInstance().deleteLaunchConfiguration(systemUserId,launchConfigName);
        LOG.debug("Deleted the existing launch config: " + launchConfigName);
        this.createdLaunchConfig=null;
      }
 catch (      final Exception ex) {
        this.createdLaunchConfig=launchConfigName;
      }
    }
  }
 catch (  final Exception ex) {
    ;
  }
  if (this.createdLaunchConfig == null) {
    String instanceProfileName=null;
    try {
      instanceProfileName=this.getChain().findHandler(IamInstanceProfileSetup.class).getResult().get(0);
    }
 catch (    Exception ex) {
      throw new EventHandlerException("failed to get the instance profile name",ex);
    }
    String sgName=null;
    try {
      sgName=this.getChain().findHandler(SecurityGroupSetup.class).getResult().get(0);
    }
 catch (    Exception ex) {
      throw new EventHandlerException("failed to get the security group name",ex);
    }
    String userData=null;
    try {
      userData=this.getChain().findHandler(UserDataSetup.class).getResult().get(0);
    }
 catch (    Exception ex) {
      throw new EventHandlerException("failed to get the user-data field",ex);
    }
    try {
      AutoScalingClient.getInstance().createLaunchConfiguration(systemUserId,this.emi,this.instanceType,instanceProfileName,launchConfigName,sgName,this.keyName,userData);
      this.createdLaunchConfig=launchConfigName;
    }
 catch (    Exception ex) {
      throw new EventHandlerException("Failed to create launch configuration",ex);
    }
  }
}

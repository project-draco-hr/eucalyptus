{
  if (currValue == null)   return null;
  final double periodDuration=(perEnd - perBegin);
  double factor=0d;
  if (perEnd <= repBegin || perBegin >= repEnd) {
    factor=0d;
  }
 else   if (perBegin < repBegin && perEnd <= repEnd) {
    factor=((double)perEnd - repBegin) / periodDuration;
  }
 else   if (perBegin >= repBegin && perEnd >= repEnd) {
    factor=((double)repEnd - perBegin) / periodDuration;
  }
 else   if (perBegin >= repBegin && perEnd <= repEnd) {
    factor=1d;
  }
 else   if (repBegin >= perBegin && repEnd <= perEnd) {
    factor=((double)(repEnd - repBegin)) / periodDuration;
  }
 else {
    throw new IllegalStateException("impossible boundary condition");
  }
  if (factor < 0 || factor > 1)   throw new IllegalStateException("factor<0 || factor>1");
  return currValue * factor;
}

{
  try (TransactionResource db=Entities.transactionFor(StackEntity.class)){
    Criteria criteria=Entities.createCriteria(StackEntity.class).add(Restrictions.eq("accountId",accountId)).add(Restrictions.eq("stackName",stackName)).add(Restrictions.eq("recordDeleted",Boolean.FALSE));
    List<StackEntity> entityList=criteria.list();
    for (    StackEntity stackEntity : entityList) {
      stackEntity.setStackStatus(status);
      stackEntity.setStackStatusReason(statusReason);
    }
    db.commit();
  }
 }

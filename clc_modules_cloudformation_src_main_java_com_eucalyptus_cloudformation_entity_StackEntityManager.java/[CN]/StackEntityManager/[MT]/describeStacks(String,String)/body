{
  List<StackEntity> returnValue=Lists.newArrayList();
  try (TransactionResource db=Entities.transactionFor(StackEntity.class)){
    Criteria criteria=Entities.createCriteria(StackEntity.class).add(Restrictions.eq("accountId",accountId));
    if (stackNameOrId != null) {
      criteria.add(Restrictions.or(Restrictions.and(Restrictions.eq("recordDeleted",Boolean.FALSE),Restrictions.eq("stackName",stackNameOrId)),Restrictions.eq("stackId",stackNameOrId)));
    }
 else {
      criteria.add(Restrictions.eq("recordDeleted",Boolean.FALSE));
    }
    returnValue=criteria.list();
    db.commit();
  }
   return returnValue;
}

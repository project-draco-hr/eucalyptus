{
  try (TransactionResource db=Entities.transactionFor(StackEntity.class)){
    Criteria criteria=Entities.createCriteria(StackEntity.class).add(Restrictions.eq("accountId",accountId)).add(Restrictions.eq("stackName",stackName)).add(Restrictions.eq("recordDeleted",Boolean.FALSE));
    List<StackEntity> entityList=criteria.list();
    if (entityList != null && !entityList.isEmpty()) {
      for (      StackEntity stackEntity : entityList) {
        if (stackEntity.getOutputs() == null) {
          stackEntity.setOutputs(new ArrayList<StackEntity.Output>());
          for (          Output output : outputs) {
            StackEntity.Output stackEntityOutput=new StackEntity.Output();
            stackEntityOutput.setDescription(output.getDescription());
            stackEntityOutput.setOutputKey(output.getOutputKey());
            stackEntityOutput.setOutputValue(output.getOutputValue());
            stackEntity.getOutputs().add(stackEntityOutput);
          }
        }
      }
    }
    db.commit();
  }
 }

{
  try (TransactionResource db=Entities.transactionFor(StackEntity.class)){
    Criteria criteria=Entities.createCriteria(StackEntity.class).add(Restrictions.or(Restrictions.eq("stackName",stack.getStackName()),Restrictions.eq("stackId",stack.getStackId())));
    List<StackEntity> EntityList=criteria.list();
    if (!EntityList.isEmpty()) {
      throw new Exception("Stack already exists");
    }
    LOG.info("stackName=" + stack.getStackName());
    StackEntity stackEntity=stackToStackEntity(stack);
    LOG.info("stackName=" + stackEntity.getStackName());
    Entities.persist(stackEntity);
    db.commit();
  }
 }

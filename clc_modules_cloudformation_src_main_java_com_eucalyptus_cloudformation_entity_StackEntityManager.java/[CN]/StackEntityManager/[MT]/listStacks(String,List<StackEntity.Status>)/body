{
  List<StackEntity> returnValue=Lists.newArrayList();
  try (TransactionResource db=Entities.transactionFor(StackEntity.class)){
    Criteria criteria=Entities.createCriteria(StackEntity.class).add(Restrictions.eq("accountId",accountId));
    if (statusValues != null && !statusValues.isEmpty()) {
      Criterion[] orClauses=new Criterion[statusValues.size()];
      int ctr=0;
      for (      StackEntity.Status statusValue : statusValues) {
        orClauses[ctr++]=Restrictions.eq("stackStatus",statusValue);
      }
      criteria.add(Restrictions.or(orClauses));
    }
    returnValue=criteria.list();
    db.commit();
  }
   return returnValue;
}

{
  for (  final String group : this.controller.getGroupMap().keySet()) {
    if (!this.groupMap.containsKey(group)) {
      this.groupMap.put(group,new VerticalPanel(){
{
          ensureDebugId(group + "Reports");
        }
      }
);
    }
    VerticalPanel groupPanel=this.groupMap.get(group);
    groupPanel.clear();
    groupPanel.setStyleName(AccountingControl.RESOURCES.REPORT_BAR_STYLE);
    if ("service".equals(group)) {
      Tree serviceTree=new Tree(){
{
          setAnimationEnabled(true);
        }
      }
;
      for (      final ReportInfo info : this.controller.getGroupMap().get(group)) {
        if ("walrus".equals(info.getComponent())) {
          TreeItem walrusItem=serviceTree.addItem(info.getDisplayName());
          walrusItem.setUserObject(info);
          serviceTree.addSelectionHandler(new SelectionHandler<TreeItem>(){
            @Override public void onSelection(            SelectionEvent<TreeItem> event){
              TreeItem item=event.getSelectedItem();
              if (item.getUserObject() != null) {
                ReportInfo r=(ReportInfo)item.getUserObject();
                ReportList.this.controller.setCurrentReport(r);
                item.setState(true,false);
              }
            }
          }
);
        }
      }
      Map<String,TreeItem> clusterItems=new HashMap<String,TreeItem>();
      for (      final ReportInfo info : this.controller.getGroupMap().get(group)) {
        if ("cluster".equals(info.getComponent())) {
          TreeItem clusterRoot=serviceTree.addItem(info.getClusterName());
          clusterItems.put(info.getClusterName(),clusterRoot);
          TreeItem clusterItem=clusterRoot.addItem(info.getDisplayName());
          clusterItem.setUserObject(info);
          serviceTree.addSelectionHandler(new SelectionHandler<TreeItem>(){
            @Override public void onSelection(            SelectionEvent<TreeItem> event){
              TreeItem item=event.getSelectedItem();
              if (item.getUserObject() != null) {
                ReportInfo r=(ReportInfo)item.getUserObject();
                ReportList.this.controller.setCurrentReport(r);
                item.setState(true,false);
              }
            }
          }
);
        }
      }
      for (      final ReportInfo info : this.controller.getGroupMap().get(group)) {
        if ("storage".equals(info.getComponent()) && clusterItems.containsKey(info.getClusterName())) {
          TreeItem scItem=clusterItems.get(info.getClusterName()).addItem(info.getDisplayName());
          scItem.setUserObject(info);
          serviceTree.addSelectionHandler(new SelectionHandler<TreeItem>(){
            @Override public void onSelection(            SelectionEvent<TreeItem> event){
              TreeItem item=event.getSelectedItem();
              if (item.getUserObject() != null) {
                ReportInfo r=(ReportInfo)item.getUserObject();
                ReportList.this.controller.setCurrentReport(r);
                item.setState(true,false);
              }
            }
          }
);
        }
      }
      for (      final ReportInfo info : this.controller.getGroupMap().get(group)) {
        if ("node".equals(info.getComponent()) && clusterItems.containsKey(info.getClusterName())) {
          TreeItem ncItem=clusterItems.get(info.getClusterName()).addItem(info.getDisplayName());
          ncItem.setUserObject(info);
          serviceTree.addSelectionHandler(new SelectionHandler<TreeItem>(){
            @Override public void onSelection(            SelectionEvent<TreeItem> event){
              TreeItem item=event.getSelectedItem();
              if (item.getUserObject() != null) {
                ReportInfo r=(ReportInfo)item.getUserObject();
                ReportList.this.controller.setCurrentReport(r);
                item.setState(true,false);
              }
            }
          }
);
        }
      }
      groupPanel.add(serviceTree);
    }
 else {
      for (      ReportInfo info : this.controller.getGroupMap().get(group)) {
        if (info.equals(this.controller.getCurrentReport())) {
          info.getButton().setStyleName(AccountingControl.RESOURCES.ACCT_REPORT_CURRENT_BUTTON);
        }
 else {
          info.getButton().setStyleName(AccountingControl.RESOURCES.ACCT_REPORT_BUTTON);
        }
        groupPanel.add(info.getButton());
      }
    }
  }
}

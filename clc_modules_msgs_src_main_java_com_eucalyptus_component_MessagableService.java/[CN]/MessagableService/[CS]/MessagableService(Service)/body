{
  this.serviceDelegate=baseService;
  URI remoteUri;
  if (this.getServiceConfiguration().isVmLocal()) {
    remoteUri=ServiceUris.internal(this.getComponentId());
  }
 else {
    remoteUri=ServiceUris.internal(this.getServiceConfiguration());
  }
  this.endpoint=new ServiceEndpoint(this,true,baseService.getServiceConfiguration().isVmLocal() ? this.getComponentId().getLocalEndpointUri() : remoteUri);
  this.localDispatcher=ServiceDispatcher.makeLocal(this.getServiceConfiguration());
  this.remoteDispatcher=ServiceDispatcher.makeRemote(this.getServiceConfiguration());
}

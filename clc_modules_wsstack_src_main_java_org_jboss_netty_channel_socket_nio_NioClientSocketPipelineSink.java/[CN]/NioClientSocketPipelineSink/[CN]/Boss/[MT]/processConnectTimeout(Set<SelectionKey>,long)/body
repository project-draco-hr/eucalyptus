{
  ConnectException cause=null;
  for (  SelectionKey k : keys) {
    if (!k.isValid()) {
      continue;
    }
    NioClientSocketChannel ch=(NioClientSocketChannel)k.attachment();
    if (ch.connectDeadlineNanos > 0 && currentTimeNanos >= ch.connectDeadlineNanos) {
      if (cause == null) {
        cause=new ConnectException("connection timed out");
      }
      ch.connectFuture.setFailure(cause);
      fireExceptionCaught(ch,cause);
      close(k);
    }
  }
}

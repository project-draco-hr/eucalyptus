{
  NioClientSocketChannel ch=(NioClientSocketChannel)k.attachment();
  try {
    if (ch.socket.finishConnect()) {
      k.cancel();
      ch.worker.register(ch,ch.connectFuture);
    }
  }
 catch (  Throwable t) {
    ch.connectFuture.setFailure(t);
    fireExceptionCaught(ch,t);
    close(k);
  }
}

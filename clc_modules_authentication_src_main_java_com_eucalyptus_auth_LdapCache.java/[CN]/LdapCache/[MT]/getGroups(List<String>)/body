{
  List<Group> results=new ArrayList<Group>();
  if (eucaGroupIds == null) {
    results.addAll(groupCache.values());
  }
 else {
    for (    String id : eucaGroupIds) {
      int colon=id.indexOf(EucaLdapHelper.EUCA_GROUP_ID_SEPARATOR);
      if (colon < 1 || colon > id.length() - 2) {
        LOG.error("Invalid eucaGroupId string: " + id);
        continue;
      }
      String name=id.substring(0,colon);
      String timestamp=id.substring(colon + 1);
      Group result=groupCache.get(name);
      if (result != null && timestamp.equals(((LdapWrappedGroup)result).getTimestamp())) {
        results.add(result);
      }
    }
  }
  return results;
}

{
  if ((this.transaction != null) && this.transaction.isActive()) {
    this.transaction.rollback();
  }
  this.transaction=null;
  if ((this.sessionRef != null) && (this.sessionRef.get() != null)) {
    this.sessionRef.clear();
  }
  if ((this.em != null) && this.em.isOpen()) {
    this.em.close();
  }
  this.em=null;
}

{
  try {
    Object pk=resolvePrimaryKey(example);
    if (pk != null) {
      return maybePrimaryKey(example);
    }
 else     if ((example instanceof HasNaturalId) && (((HasNaturalId)example).getNaturalId() != null)) {
      return maybeNaturalId(example);
    }
 else {
      return maybeDefinitelyExample(example);
    }
  }
 catch (  final RuntimeException ex) {
    Logs.exhaust().trace(ex,ex);
    final Exception newEx=PersistenceExceptions.throwFiltered(ex);
    throw new TransactionInternalException(newEx.getMessage(),newEx);
  }
}

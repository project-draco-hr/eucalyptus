{
  Axis2MessageDispatcher msgDispatcher=(Axis2MessageDispatcher)dispatcher;
  Axis2OutProperties properties=msgDispatcher.getProperties();
  String address=endpoint.getEndpointURI().getAddress();
  if (!endpointMap.containsKey(address))   endpointMap.put(address,new ClientPool(new ClientFactory(address,properties),properties));
  ClientPool clientPool=endpointMap.get(address);
  try {
    BasicClient client=clientPool.lease();
    msgDispatcher.setClient(client);
  }
 catch (  Exception e) {
    LOG.fatal(e,e);
  }
}

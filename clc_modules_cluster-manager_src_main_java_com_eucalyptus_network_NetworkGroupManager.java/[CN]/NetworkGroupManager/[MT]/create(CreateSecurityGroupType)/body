{
  final Context ctx=Contexts.lookup();
  final CreateSecurityGroupResponseType reply=(CreateSecurityGroupResponseType)request.getReply();
  try {
    Function<Long,List<NetworkGroup>> allocator=new Function<Long,List<NetworkGroup>>(){
      @Override public List<NetworkGroup> apply(      Long input){
        try {
          return Lists.newArrayList(NetworkGroups.create(ctx.getUserFullName(),request.getGroupName(),request.getGroupDescription()));
        }
 catch (        MetadataException ex) {
          throw new RuntimeException(ex);
        }
      }
    }
;
    RestrictedTypes.allocate(1L,allocator);
    return reply;
  }
 catch (  final Exception ex) {
    throw new EucalyptusCloudException("CreateSecurityGroup failed because: " + Exceptions.causeString(ex),ex);
  }
}

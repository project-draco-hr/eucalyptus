{
  final Context ctx=Contexts.lookup();
  final DeleteSecurityGroupResponseType reply=(DeleteSecurityGroupResponseType)request.getReply();
  final NetworkGroup group=lookupGroup(request.getGroupId(),request.getGroupName());
  if (!RestrictedTypes.filterPrivileged().apply(group)) {
    throw new EucalyptusCloudException("Not authorized to delete network group " + group.getDisplayName() + " for "+ ctx.getUser());
  }
  try {
    NetworkGroups.delete(AccountFullName.getInstance(group.getOwnerAccountNumber()),group.getDisplayName());
  }
 catch (  MetadataConstraintException e) {
    throw new ClientComputeException("InvalidGroup.InUse","Specified group cannot be deleted because it is in use.");
  }
  reply.set_return(true);
  return reply;
}

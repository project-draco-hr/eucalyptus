{
  EqlTask task;
  try {
    while ((task=(EqlTask)taskQueue.take()) != null) {
      writer.write(task.getCommand() + "whoami\r\n");
      writer.flush();
      String returnValue="";
      for (String line=null; (line=reader.readLine()) != null; ) {
        if (line.contains("whoami"))         break;
        returnValue+=line + "\r";
      }
      task.setValue(returnValue);
synchronized (task) {
        task.notifyAll();
      }
    }
  }
 catch (  InterruptedException e) {
    LOG.error(e);
  }
catch (  IOException e) {
    LOG.error(e);
  }
}

{
  EntityWrapper<EquallogicVolumeInfo> db=StorageProperties.getEntityWrapper();
  try {
    EquallogicVolumeInfo snapInfo=db.getUnique(new EquallogicVolumeInfo(snapshotId));
    String iqn=snapInfo.getIqn();
    db.commit();
    connectionManager.disconnectTarget(iqn);
  }
 catch (  EucalyptusCloudException ex) {
    LOG.error(ex);
    db.rollback();
    throw new EucalyptusCloudException("Unable to get snapshot: " + snapshotId);
  }
}

{
  EntityWrapper<EquallogicVolumeInfo> db=StorageProperties.getEntityWrapper();
  int size;
  try {
    EquallogicVolumeInfo snapInfo=db.getUnique(new EquallogicVolumeInfo(snapshotId));
    db.commit();
    size=snapInfo.getSize();
  }
 catch (  EucalyptusCloudException ex) {
    LOG.error(ex);
    db.rollback();
    throw ex;
  }
  String iqn=connectionManager.createVolume(volumeId,snapshotId);
  if (iqn != null) {
    EquallogicVolumeInfo volumeInfo=new EquallogicVolumeInfo(volumeId,iqn,size);
    db=StorageProperties.getEntityWrapper();
    db.add(volumeInfo);
    db.commit();
  }
  return size;
}

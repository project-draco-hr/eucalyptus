{
  updateVolumeGroup();
  File volumeDir=new File(DirectStorageInfo.getStorageInfo().getVolumesDir());
  volumeDir.mkdirs();
  VolumeMetadataManager volumeManager=new VolumeMetadataManager();
  String lvName=generateLVName(volumeId);
  LVMVolumeInfo lvmVolumeInfo=null;
  lvmVolumeInfo=new ISCSIVolumeInfo();
  volumeManager.finish();
  try {
    createLogicalVolume(volumeId,lvName,(size * StorageProperties.KB));
    lvmVolumeInfo.setVolumeId(volumeId);
    lvmVolumeInfo.setVgName(volumeGroup);
    lvmVolumeInfo.setLvName(lvName);
    lvmVolumeInfo.setStatus(StorageProperties.Status.available.toString());
    lvmVolumeInfo.setSize(size);
    volumeManager=new VolumeMetadataManager();
    volumeManager.add(lvmVolumeInfo);
    volumeManager.finish();
  }
 catch (  EucalyptusCloudException ex) {
    String error="Unable to run command: " + ex.getMessage();
    volumeManager.abort();
    LOG.error(error);
    throw new EucalyptusCloudException(error);
  }
}

{
  VolumeEntityWrapperManager volumeManager=new VolumeEntityWrapperManager();
  List<LVMVolumeInfo> volumeInfos=volumeManager.getAllVolumeInfos();
  for (  LVMVolumeInfo foundVolumeInfo : volumeInfos) {
    String loDevName=foundVolumeInfo.getLoDevName();
    if (loDevName != null) {
      String loFileName=foundVolumeInfo.getVolumeId();
      String absoluteLoFileName=StorageProperties.storageRootDirectory + PATH_SEPARATOR + loFileName;
      if (!new File(absoluteLoFileName).exists()) {
        LOG.error("Backing volume: " + absoluteLoFileName + " not found. Invalidating volume.");
        foundVolumeInfo.setStatus(StorageProperties.Status.failed.toString());
        continue;
      }
      try {
        String returnValue=getLoopback(loDevName);
        if (returnValue.length() <= 0) {
          createLoopback(absoluteLoFileName,loDevName);
        }
      }
 catch (      ExecutionException ex) {
        String error="Unable to run command: " + ex.getMessage();
        LOG.error(error);
      }
    }
  }
  for (  LVMVolumeInfo foundVolumeInfo : volumeInfos) {
    try {
      volumeManager.exportVolume(foundVolumeInfo);
    }
 catch (    EucalyptusCloudException ex) {
      LOG.error("Unable to reload volume: " + foundVolumeInfo.getVolumeId() + ex);
    }
  }
  volumeManager.finish();
}

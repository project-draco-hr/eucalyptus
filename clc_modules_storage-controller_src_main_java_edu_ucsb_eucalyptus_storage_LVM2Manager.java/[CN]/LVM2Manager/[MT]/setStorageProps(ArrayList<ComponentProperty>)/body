{
  ConfigurableManagement.getInstance().setProperties(this.getClass(),storageParams);
  EntityWrapper<StorageInfo> db=StorageController.getEntityWrapper();
  StorageInfo storageInfo;
  try {
    storageInfo=db.getUnique(new StorageInfo(StorageProperties.NAME));
    storageInfo.setMaxTotalVolumeSizeInGb(StorageProperties.MAX_TOTAL_VOLUME_SIZE);
    storageInfo.setMaxVolumeSizeInGB(StorageProperties.MAX_VOLUME_SIZE);
    storageInfo.setZeroFillVolumes(zeroFillVolumes);
    storageInfo.setStorageInterface(iface);
    storageInfo.setVolumesDir(storageRootDirectory);
    db.commit();
  }
 catch (  EucalyptusCloudException ex) {
    storageInfo=new StorageInfo(StorageProperties.NAME,StorageProperties.MAX_TOTAL_VOLUME_SIZE,iface,StorageProperties.MAX_VOLUME_SIZE,storageRootDirectory,zeroFillVolumes,null,null,null,null);
    db.add(storageInfo);
    db.commit();
  }
  File volumeDir=new File(storageRootDirectory);
  if (!volumeDir.exists()) {
    if (!volumeDir.mkdirs()) {
      LOG.fatal("Unable to make volume root directory: " + storageRootDirectory);
    }
  }
 else   if (!volumeDir.canWrite()) {
    LOG.fatal("Cannot write to volume root directory: " + storageRootDirectory);
  }
}

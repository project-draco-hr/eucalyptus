{
  String eucaHomeDir=System.getProperty("euca.home");
  if (eucaHomeDir == null) {
    throw new EucalyptusCloudException("euca.home not set");
  }
  eucaHome=eucaHomeDir;
  if (!new File(eucaHome + EUCA_ROOT_WRAPPER).exists()) {
    throw new EucalyptusCloudException("root wrapper (euca_rootwrap) does not exist in " + eucaHome + EUCA_ROOT_WRAPPER);
  }
  File varDir=new File(eucaHome + EUCA_VAR_RUN_PATH);
  if (!varDir.exists()) {
    varDir.mkdirs();
  }
  try {
    String returnValue=getLvmVersion();
    if (returnValue.length() == 0) {
      throw new EucalyptusCloudException("Is lvm installed?");
    }
 else {
      LOG.info(returnValue);
    }
    exportManager.checkPreconditions();
  }
 catch (  ExecutionException ex) {
    String error="Unable to run command: " + ex.getMessage();
    LOG.error(error);
    throw new EucalyptusCloudException(error);
  }
}

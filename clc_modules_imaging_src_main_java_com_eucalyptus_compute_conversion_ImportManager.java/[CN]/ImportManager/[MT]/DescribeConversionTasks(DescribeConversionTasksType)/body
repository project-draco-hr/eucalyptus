{
  LOG.debug(request);
  DescribeConversionTasksResponseType reply=request.getReply();
  Context ctx=Contexts.lookup();
  boolean verbose=request.getConversionTaskIdSet().remove("verbose");
  Collection<String> ownerInfo=(ctx.isAdministrator() && verbose) ? Collections.<String>emptyList() : Collections.singleton(ctx.getAccount().getAccountNumber());
  final Predicate<? super ImagingTask> requestedAndAccessible=RestrictedTypes.filteringFor(ImagingTask.class).byId(request.getConversionTaskIdSet()).byOwningAccount(ownerInfo).byPrivileges().buildPredicate();
  Iterable<ImagingTask> tasksToList=ImagingTasks.getImagingTasks(ctx.getUserFullName(),request.getConversionTaskIdSet());
  for (  ImagingTask task : Iterables.filter(tasksToList,requestedAndAccessible)) {
    ConversionTask t=task.getTask();
    if (t.getImportInstance() != null) {
      if (task.getBytesProcessed() > 0 && t.getImportInstance().getVolumes().size() == 1) {
        ImportInstanceVolumeDetail vd=t.getImportInstance().getVolumes().get(0);
        vd.setBytesConverted(task.getBytesProcessed());
        vd.setStatus(task.getState().getExternalVolumeStateName());
        vd.setStatusMessage(task.getState().getExternalVolumeStatusMessage());
      }
      t.setState(task.getState().getExternalTaskStateName());
      t.setStatusMessage(task.getState().toString().toLowerCase());
      reply.getConversionTasks().add(t);
    }
 else     if (t.getImportVolume() != null) {
      reply.getConversionTasks().add(t);
    }
  }
  return reply;
}

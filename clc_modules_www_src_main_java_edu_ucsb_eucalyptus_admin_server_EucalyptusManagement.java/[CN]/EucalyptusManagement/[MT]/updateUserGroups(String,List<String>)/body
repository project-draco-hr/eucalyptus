{
  User user=null;
  try {
    user=Users.lookupUser(userName);
  }
 catch (  NoSuchUserException nsue) {
    throw new Exception("Can't find user " + userName);
  }
  Set<String> updateGroupSet=new HashSet<String>();
  updateGroupSet.addAll(updateGroups);
  for (  Group group : Groups.listAllGroups()) {
    if (Groups.NAME_ALL.equalsIgnoreCase(group.getName())) {
      continue;
    }
    if (updateGroupSet.contains(group.getName())) {
      group.addMember(user);
    }
 else {
      group.removeMember(user);
    }
  }
}

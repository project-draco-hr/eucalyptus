{
  UserInfo searchUser=new UserInfo();
  searchUser.setConfirmationCode(code);
  EntityWrapper<UserInfo> dbWrapper=new EntityWrapper<UserInfo>();
  List<UserInfo> userList=dbWrapper.query(searchUser);
  if (userList.size() != 1) {
    dbWrapper.rollback();
    throw EucalyptusManagement.makeFault("Invalid confirmation code");
  }
  dbWrapper.commit();
  return EucalyptusManagement.fromServer(userList.get(0));
}

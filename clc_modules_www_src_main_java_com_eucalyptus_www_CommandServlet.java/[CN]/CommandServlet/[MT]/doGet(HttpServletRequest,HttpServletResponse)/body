{
  final String className=req.getParameter("className");
  final String methodName=req.getParameter("methodName");
  final String args=req.getParameter("args");
  LOG.info(String.format("CommandServlet called, class:%s method:%s args:%s",className,methodName,args));
  if (className == null || methodName == null) {
    throw new ServletException("className and methodName params must both be present");
  }
  String[] methodArgsArray=new String[0];
  if (args != null) {
    methodArgsArray=args.split(",");
    LOG.info(String.format("Executing class:%s method:%s args:%s\n",className,methodName,args));
  }
 else {
    LOG.info(String.format("Executing class:%s method:%s\n",className,methodName));
  }
  Class[] params=new Class[methodArgsArray.length];
  for (int j=0; j < params.length; j++) {
    params[j]=String.class;
  }
  Method method=null;
  try {
    method=Class.forName(className).getDeclaredMethod(methodName,params);
  }
 catch (  Exception ex) {
    throw new ServletException(ex);
  }
  if (!method.isAnnotationPresent(ExposedCommand.class)) {
    throw new ServletException("Method lacks ExposedCommand annotation");
  }
  try {
    method.invoke(null,(Object[])methodArgsArray);
  }
 catch (  Exception ex) {
    LOG.error("Invocation failed of method" + method,ex);
    throw new ServletException(ex);
  }
  res.setStatus(HttpServletResponse.SC_OK);
}

{
  EventRecord.here(AddressCategory.class,EventClass.ADDRESS,EventType.ADDRESS_ASSIGNING).withDetails(vm.getOwnerId(),addr.getName(),"instanceid",vm.getInstanceId()).withDetails("type",addr.isSystemOwned() ? "SYSTEM" : "USER").withDetails("cluster",addr.getCluster());
  return addr.assign(vm.getInstanceId(),vm.getPrivateAddress()).getCallback().then(new SuccessCallback(){
    public void apply(    BaseMessage response){
      vm.updatePublicAddress(addr.getName());
    }
  }
);
}

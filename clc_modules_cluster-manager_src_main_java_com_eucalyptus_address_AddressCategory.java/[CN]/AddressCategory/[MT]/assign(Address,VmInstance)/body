{
  EventRecord.here(AddressCategory.class,EventClass.ADDRESS,EventType.ADDRESS_ASSIGNING,"user=" + vm.getOwnerId(),"address=" + addr.getName(),"instanceid=" + vm.getInstanceId(),addr.isSystemOwned() ? "SYSTEM" : "USER").info();
  return addr.assign(vm.getInstanceId(),vm.getPrivateAddress()).getCallback().then(new SuccessCallback(){
    public void apply(    BaseMessage response){
      vm.updatePublicAddress(addr.getName());
    }
  }
);
}

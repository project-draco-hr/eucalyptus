{
  if (message instanceof MappingHttpRequest) {
    MappingHttpRequest httpRequest=(MappingHttpRequest)message;
    if (httpRequest.getMethod().equals(HttpMethod.POST)) {
      Map<String,String> parameters=new HashMap<String,String>(httpRequest.getParameters());
      ChannelBuffer buffer=httpRequest.getContent();
      buffer.markReaderIndex();
      byte[] read=new byte[buffer.readableBytes()];
      buffer.readBytes(read);
      String query=new String(read);
      buffer.resetReaderIndex();
      for (      String p : query.split("&")) {
        String[] splitParam=p.split("=");
        String lhs=splitParam[0];
        String rhs=splitParam.length == 2 ? splitParam[1] : null;
        try {
          if (lhs != null)           lhs=new URLCodec().decode(lhs);
        }
 catch (        DecoderException e) {
        }
        try {
          if (rhs != null)           rhs=new URLCodec().decode(rhs);
        }
 catch (        DecoderException e) {
        }
        parameters.put(lhs,rhs);
      }
      for (      RequiredQueryParams p : RequiredQueryParams.values()) {
        if (!parameters.containsKey(p.toString())) {
          return false;
        }
      }
      httpRequest.getParameters().putAll(parameters);
    }
 else {
      for (      RequiredQueryParams p : RequiredQueryParams.values()) {
        if (!httpRequest.getParameters().containsKey(p.toString())) {
          return false;
        }
      }
    }
    return true && message.getUri().startsWith(servicePath);
  }
  return false;
}

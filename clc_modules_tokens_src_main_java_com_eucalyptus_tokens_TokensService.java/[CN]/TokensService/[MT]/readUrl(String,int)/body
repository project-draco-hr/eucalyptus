{
  final URL location=new URL(url);
  LOG.debug("Reading content from " + url);
  URLConnection conn=location.openConnection();
  SslSetup.configureHttpsUrlConnection(conn);
  try (final InputStream istr=conn.getInputStream()){
    Certificate[] certs=new Certificate[0];
    if (conn instanceof HttpsURLConnection) {
      certs=((HttpsURLConnection)conn).getServerCertificates();
    }
    final long contentLength=conn.getContentLengthLong();
    if (contentLength > maxContentLength) {
      throw new IOException(url + " content exceeds maximum size, " + maxContentLength);
    }
    final byte[] content=ByteStreams.toByteArray(new BoundedInputStream(istr,maxContentLength + 1));
    if (content.length > maxContentLength) {
      throw new IOException(url + " content exceeds maximum size, " + maxContentLength);
    }
    return Pair.pair(new String(content,StandardCharsets.UTF_8),certs);
  }
 }

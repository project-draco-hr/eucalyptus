{
  List<MessageCache> listIds=null;
  if (!correlationIds.containsKey(resourceId)) {
    listIds=Lists.newArrayList();
    correlationIds.put(resourceId,listIds);
  }
 else   listIds=correlationIds.get(resourceId);
  for (  final MessageCache corrId : listIds) {
    if (msgType.equals(corrId.getKey())) {
      return;
    }
  }
  try {
    listIds.add(new MessageCache(msgType,message));
  }
 catch (  final Exception ex) {
    throw Exceptions.toUndeclared(new EucalyptusCloudException("Correlation Id is in wrong format"));
  }
}

{
  List<Address> removeMembers=Lists.newArrayList(hostMap.keySet());
  List<Host> removedHosts=Lists.newArrayList();
  if (removeMembers.removeAll(currentMembers)) {
    for (    Address addr : removeMembers) {
      Host removedHost=hostMap.remove(addr);
      removedHosts.add(removedHost);
      LOG.warn("Failure detected for host: " + removedHost);
    }
  }
  LOG.debug("Current host entries: ");
  for (  Host host : hostMap.values()) {
    LOG.debug("-> " + host);
  }
  LOG.debug("Removed host entries: ");
  for (  Host host : removedHosts) {
    LOG.debug("-> " + host);
    if (host.hasDatabase()) {
      Eucalyptus.teardownServiceDependencies(host.getBindAddress());
    }
    Empyrean.teardownServiceDependencies(host.getBindAddress());
  }
  return removedHosts;
}

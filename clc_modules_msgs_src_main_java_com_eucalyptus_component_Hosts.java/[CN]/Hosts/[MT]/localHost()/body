{
  Host ret=null;
  ViewId viewId=HostManager.isReady() ? HostManager.getCurrentView().getViewId() : null;
  if (!hostMap.containsKey(Hosts.localMembershipAddress())) {
    Host oldRef=hostMap.putIfAbsent(Hosts.localMembershipAddress(),new Host(viewId));
    if (oldRef == null) {
      Host local=hostMap.get(Hosts.localMembershipAddress());
      Mbeans.register(local);
      ret=local;
    }
 else {
      ret=oldRef;
    }
  }
 else {
    ret=hostMap.get(Hosts.localMembershipAddress());
  }
  ret.update(viewId,BootstrapArgs.isCloudController(),Bootstrap.isFinished(),Internets.getAllInetAddresses());
  return ret;
}

def __init__(self, clc_host, access_id, secret_key, token):
    boto.set_stream_logger('foo')
    reg = RegionInfo(name='eucalyptus', endpoint=clc_host)
    path = '/services/Eucalyptus'
    port = 8773
    try:
        host = eucaconsole.config.get('test', 'ec2.endpoint')
        path = '/'
        reg = None
        port = 443
    except ConfigParser.Error:
        pass
    self.conn = EC2Connection(access_id, secret_key, region=reg, port=port, path=path, is_secure=True, security_token=token, debug=2)
    self.conn.APIVersion = '2012-03-01'
    self.conn.http_connection_kwargs['timeout'] = 30

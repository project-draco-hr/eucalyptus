{
  Throwable t=(ex == null ? new RuntimeException() : ex);
  ByteArrayOutputStream os=new ByteArrayOutputStream();
  PrintWriter p=new PrintWriter(os);
  t.printStackTrace(p);
  p.flush();
  p.close();
  return os.toString();
}

{
  try {
    if (user == null) {
      return new UserFullName(FakePrincipals.NOBODY_ACCOUNT,FakePrincipals.NOBODY_USER);
    }
 else     if (FakePrincipals.SYSTEM_USER.equals(user)) {
      return new UserFullName(FakePrincipals.SYSTEM_ACCOUNT,FakePrincipals.SYSTEM_USER);
    }
 else     if (FakePrincipals.NOBODY_USER.equals(user)) {
      return new UserFullName(FakePrincipals.NOBODY_ACCOUNT,FakePrincipals.NOBODY_USER);
    }
 else {
      Account account=user.getAccount();
      return new UserFullName(account,user);
    }
  }
 catch (  AuthException ex) {
    LOG.error(ex.getMessage());
    try {
      return new UserFullName(FakePrincipals.NOBODY_ACCOUNT,FakePrincipals.NOBODY_USER);
    }
 catch (    AuthException ex1) {
      LOG.error(ex1,ex1);
      throw new UndeclaredThrowableException(ex);
    }
  }
catch (  Exception ex) {
    throw new UndeclaredThrowableException(ex);
  }
}

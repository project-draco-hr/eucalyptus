{
  try {
    if (user == null) {
      return new UserFullName(FakePrincipals.NOBODY_USER);
    }
 else     if (user == FakePrincipals.SYSTEM_USER) {
      return new UserFullName(FakePrincipals.SYSTEM_USER);
    }
 else {
      return new UserFullName(user);
    }
  }
 catch (  AuthException ex) {
    LOG.error(ex.getMessage());
    try {
      return new UserFullName(FakePrincipals.NOBODY_USER);
    }
 catch (    AuthException ex1) {
      LOG.error(ex1,ex1);
      throw new UndeclaredThrowableException(ex);
    }
  }
catch (  Exception ex) {
    throw new UndeclaredThrowableException(ex);
  }
}

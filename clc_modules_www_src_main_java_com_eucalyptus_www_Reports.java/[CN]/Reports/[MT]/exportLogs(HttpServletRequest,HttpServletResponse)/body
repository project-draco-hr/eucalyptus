{
  try {
    String component=Param.component.get(req);
    String cluster=Param.cluster.get(req);
    String host=Param.host.get(req);
    LOG.debug(String.format("LOG:  component=%s  cluster=%s  host=%s",component,cluster,host));
    final PrintWriter out=res.getWriter();
    try {
      res.setContentType("text/plain");
      if ("cluster".equals(component)) {
        Cluster c=Clusters.getInstance().lookup(cluster);
        out.println("Sending request to: " + c.getUri());
        try {
          NodeLogInfo logInfo=c.getLastLog();
          if (logInfo != null) {
            String log=new String(Base64.decode(logInfo.getCcLog()));
            String printLog=(log.length() > 1024 * 64) ? log.substring(log.length() - 1024 * 64) : log;
            out.write(printLog);
            out.flush();
          }
 else {
            out.println("ERROR getting log information for " + host);
            out.println(logInfo.toString());
          }
        }
 catch (        Throwable e) {
          LOG.debug(e,e);
          e.printStackTrace(out);
        }
      }
      out.close();
    }
 catch (    Throwable e) {
      LOG.debug(e,e);
      e.printStackTrace(out);
      out.close();
    }
  }
 catch (  IllegalArgumentException e) {
    LOG.debug(e,e);
  }
catch (  IOException e) {
    LOG.debug(e,e);
  }
}

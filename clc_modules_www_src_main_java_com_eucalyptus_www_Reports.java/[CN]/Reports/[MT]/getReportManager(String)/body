{
  try {
    if (reportCache.containsKey(name) && !reportCache.get(name).isExpired()) {
      return reportCache.get(name);
    }
 else {
      reportCache.remove(name);
      final JasperDesign jasperDesign=JRXmlLoader.load(SubDirectory.REPORTS.toString() + File.separator + name+ ".jrxml");
      Future<JasperPrint> pendingPrint=Threads.getThreadPool("reporting").submit(new Callable<JasperPrint>(){
        @Override public JasperPrint call() throws Exception {
          String url=String.format("%s_%s",Component.db.getUri().toString(),"records");
          JasperReport jasperReport=JasperCompileManager.compileReport(jasperDesign);
          Connection jdbcConnection=DriverManager.getConnection(url,"eucalyptus",Hmacs.generateSystemSignature());
          JasperPrint jasperPrint=JasperFillManager.fillReport(jasperReport,null,jdbcConnection);
          return jasperPrint;
        }
      }
);
      reportCache.put(name,new ReportCache(name,jasperDesign.getName(),pendingPrint));
    }
    return reportCache.get(name);
  }
 catch (  Throwable t) {
    LOG.error(t,t);
    throw new JRException(t);
  }
}

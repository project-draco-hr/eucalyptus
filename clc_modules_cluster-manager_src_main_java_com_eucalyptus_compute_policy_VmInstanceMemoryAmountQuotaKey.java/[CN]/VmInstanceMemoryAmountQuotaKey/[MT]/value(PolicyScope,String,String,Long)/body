{
switch (scope) {
case Account:
    return Long.toString(RestrictedTypes.usageMetricFunction(CloudMetadataLimitedType.VmInstanceMemoryMetadata.class).apply(AccountFullName.getInstance(id)) + quantity);
case Group:
  return NOT_SUPPORTED;
case User:
return Long.toString(RestrictedTypes.usageMetricFunction(CloudMetadataLimitedType.VmInstanceMemoryMetadata.class).apply(UserFullName.getInstance(id)) + quantity);
}
throw new AuthException("Invalid scope");
}

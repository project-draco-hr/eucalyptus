{
  while (!worker.msgQueue.isEmpty() || worker.running.get()) {
    Runnable event;
    try {
      if ((event=worker.msgQueue.poll(50,TimeUnit.MILLISECONDS)) != null) {
        try {
          workers.replace(this,event);
          event.run();
        }
  finally {
          workers.replace(this,IDLE);
        }
      }
    }
 catch (    final Throwable e) {
      Exceptions.maybeInterrupted(e);
      Exceptions.trace(e);
    }
  }
  LOG.debug("Shutting down component registration request queue: " + Thread.currentThread().getName());
}

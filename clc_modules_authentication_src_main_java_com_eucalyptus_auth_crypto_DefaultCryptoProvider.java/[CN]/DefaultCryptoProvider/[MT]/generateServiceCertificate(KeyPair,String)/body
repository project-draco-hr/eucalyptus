{
  X500Principal x500=new X500Principal(String.format("CN=%s, OU=Eucalyptus, O=Cloud, C=US",serviceName));
  SystemCredentialProvider sys=SystemCredentialProvider.getCredentialProvider(Component.eucalyptus);
  if (sys.getCertificate() != null) {
    return generateCertificate(keys,x500,sys.getCertificate().getSubjectX500Principal(),sys.getPrivateKey());
  }
 else {
    return generateCertificate(keys,x500,x500,null);
  }
}

{
  try {
    this.membershipGroupName="Eucalyptus-" + Hmacs.generateSystemSignature().hashCode();
    this.membershipChannel=MembershipManager.buildChannel();
    final boolean[] done={false};
    final ReentrantLock lock=new ReentrantLock();
    final Condition isReady=lock.newCondition();
    this.membershipChannel.setReceiver(new ReceiverAdapter(){
      public void viewAccepted(      View new_view){
        lock.lock();
        try {
          LOG.info("view: " + new_view);
          if (System.getProperty("euca.cloud.disable") != null) {
            done[0]=true;
            isReady.signalAll();
          }
        }
  finally {
          lock.unlock();
        }
      }
      public void receive(      Message msg){
        LOG.info(msg.getObject() + " [" + msg.getSrc()+ "]");
      }
    }
);
    lock.lock();
    try {
      this.membershipChannel.connect(this.membershipGroupName);
      LOG.info("Started membership channel " + this.membershipGroupName);
      if (System.getProperty("euca.cloud.disable") != null) {
        LOG.warn("Blocking the bootstrap thread for testing.");
        TimeUnit.SECONDS.sleep(60);
        if (!done[0]) {
          isReady.await();
        }
      }
    }
  finally {
      lock.unlock();
    }
    return true;
  }
 catch (  Exception ex) {
    LOG.fatal(ex,ex);
    BootstrapException.throwFatal("Failed to connect membership channel because of " + ex.getMessage(),ex);
    return false;
  }
}

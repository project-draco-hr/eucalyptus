{
  LifecycleEvent event=null;
  String correlationId=null;
  try {
    correlationId=Contexts.lookup().getCorrelationId();
  }
 catch (  IllegalContextAccessException ex) {
    correlationId=UUID.randomUUID().toString();
  }
  CheckException checkEx=(t instanceof CheckException) ? (CheckException)t : severity.transform(config,t);
switch (checkEx.getSeverity()) {
case DEBUG:
    event=new ServiceStateEvent(config,checkEx);
  break;
case INFO:
event=new ServiceStateEvent(config,checkEx);
break;
case WARNING:
event=new ServiceStateEvent(config,checkEx);
break;
case ERROR:
event=handleErrorEvent(config,correlationId,checkEx);
break;
case URGENT:
event=handleErrorEvent(config,correlationId,checkEx);
break;
case FATAL:
event=handleErrorEvent(config,correlationId,checkEx);
break;
}
config.lookupService().fireEvent(event);
}

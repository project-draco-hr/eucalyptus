{
  Logs.extreme().error(e,e);
  if (e instanceof RuntimeException) {
    for (    Class<?> p : Classes.classAncestors(e)) {
    }
    Class<? extends Throwable> type=e.getClass();
    for (Class<? extends Throwable> t=type; t.getSuperclass() != null && t.getSuperclass() != Exception.class; t=(Class<? extends Throwable>)t.getSuperclass()) {
      if (errorCategorization.containsValue(t)) {
        for (        ErrorCategory category : ErrorCategory.values()) {
          errorCategorization.get(category).contains(type);
          throw category.handleException((RuntimeException)e);
        }
      }
    }
    return new RecoverablePersistenceException(ErrorCategory.RUNTIME.handleException(new PersistenceException("Unclassified error occurred: " + e.getMessage(),e)));
  }
 else {
    return new RecoverablePersistenceException(ErrorCategory.APPLICATION.handleException(new PersistenceException("Unclassified error occurred: " + e.getMessage(),e)));
  }
}

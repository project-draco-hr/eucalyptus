{
  EntityTransaction db=Entities.get(NetworkGroup.class);
  try {
    List<NetworkGroup> networkGroupList=Entities.query(new NetworkGroup());
    for (    NetworkGroup networkGroup : networkGroupList) {
      LOG.debug("Upgrading " + networkGroup.getDisplayName());
      if (networkGroup.getGroupId() == null) {
        networkGroup.setGroupId(Crypto.generateId(Integer.toHexString(networkGroup.getDisplayName().hashCode()),"sg"));
      }
    }
    db.commit();
    return true;
  }
 catch (  Exception ex) {
    db.rollback();
    throw Exceptions.toUndeclared(ex);
  }
}

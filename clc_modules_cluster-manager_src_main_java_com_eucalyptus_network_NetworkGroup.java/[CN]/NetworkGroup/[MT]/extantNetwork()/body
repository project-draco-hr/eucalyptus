{
  if (!NetworkGroups.networkingConfiguration().hasNetworking()) {
    return ExtantNetwork.bogus(this);
  }
 else   if (this.extantNetwork == null) {
    ExtantNetwork exNet=null;
    final EntityWrapper<NetworkGroup> db=Entities.get(NetworkGroup.class);
    for (    Integer i : NetworkGroups.shuffled(NetworkGroups.networkTagInterval())) {
      try {
        db.uniqueResult(ExtantNetwork.named(i));
      }
 catch (      TransactionException ex) {
        exNet=db.persist(ExtantNetwork.create(this,i));
        db.commit();
        return exNet;
      }
    }
    throw new NotEnoughResourcesAvailable("Failed to add extant network: " + this.extantNetwork + " due to: no network tags are free.");
  }
 else {
    return this.getExtantNetwork();
  }
}

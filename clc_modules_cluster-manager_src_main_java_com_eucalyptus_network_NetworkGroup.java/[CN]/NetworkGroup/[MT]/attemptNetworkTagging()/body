{
  for (  Integer i : Numbers.shuffled(NetworkGroups.networkTagInterval())) {
    try {
      Entities.uniqueResult(ExtantNetwork.named(i));
      continue;
    }
 catch (    Exception ex) {
      try {
        this.setExtantNetwork(Entities.persist(ExtantNetwork.create(this,i)));
        Entities.merge(this);
        return this.getExtantNetwork();
      }
 catch (      Exception ex1) {
        Logs.exhaust().trace(ex1,ex1);
        throw new NotEnoughResourcesException("Failed to allocate network tag for network: " + this.getFullName(),ex1);
      }
    }
  }
  throw new NotEnoughResourcesException("Failed to allocate network tag for network: " + this.getFullName() + ": no network tags are free.");
}

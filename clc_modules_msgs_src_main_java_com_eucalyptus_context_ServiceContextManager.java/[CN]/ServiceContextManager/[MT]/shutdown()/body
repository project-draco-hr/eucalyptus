{
  MuleContext muleCtx=context.getReference();
  if (muleCtx != null) {
    context.compareAndSet(muleCtx,null,false,true);
    try {
      shutdownContext(muleCtx);
    }
  finally {
      context.compareAndSet(null,null,true,false);
    }
  }
 else {
    context.compareAndSet(null,null,false,false);
  }
}

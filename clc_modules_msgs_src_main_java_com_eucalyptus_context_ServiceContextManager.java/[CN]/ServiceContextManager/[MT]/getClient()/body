{
  boolean[] bit=new boolean[1];
  MuleContext muleCtx=context.get(bit);
  if (context.getReference() == null) {
    BootstrapException failEx=new BootstrapException(FAIL_MSG);
    throw failEx;
  }
 else   if (client.get() == null && client.compareAndSet(null,new MuleClient(context.getReference()))) {
    return client.get();
  }
 else {
    return client.get();
  }
}

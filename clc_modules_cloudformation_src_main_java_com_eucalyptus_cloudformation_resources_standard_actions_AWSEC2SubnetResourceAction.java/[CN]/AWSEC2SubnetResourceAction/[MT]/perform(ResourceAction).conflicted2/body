{
  AWSEC2SubnetResourceAction action=(AWSEC2SubnetResourceAction)resourceAction;
  ServiceConfiguration configuration=Topology.lookup(Compute.class);
  if (action.info.getPhysicalResourceId() == null)   return action;
  DescribeVpcsType describeVpcsType=MessageHelper.createMessage(DescribeVpcsType.class,action.info.getEffectiveUserId());
  action.setVpcId(describeVpcsType,action.properties.getVpcId());
  DescribeVpcsResponseType describeVpcsResponseType=AsyncRequests.<DescribeVpcsType,DescribeVpcsResponseType>sendSync(configuration,describeVpcsType);
  if (describeVpcsResponseType.getVpcSet() == null || describeVpcsResponseType.getVpcSet().getItem() == null || describeVpcsResponseType.getVpcSet().getItem().isEmpty()) {
    return action;
  }
  DescribeSubnetsType describeSubnetsType=MessageHelper.createMessage(DescribeSubnetsType.class,action.info.getEffectiveUserId());
  action.setSubnetId(describeSubnetsType,action.info.getPhysicalResourceId());
  DescribeSubnetsResponseType describeSubnetsResponseType=AsyncRequests.<DescribeSubnetsType,DescribeSubnetsResponseType>sendSync(configuration,describeSubnetsType);
  if (describeSubnetsResponseType.getSubnetSet() == null || describeSubnetsResponseType.getSubnetSet().getItem() == null || describeSubnetsResponseType.getSubnetSet().getItem().isEmpty()) {
    return action;
  }
  DeleteSubnetType deleteSubnetType=MessageHelper.createMessage(DeleteSubnetType.class,action.info.getEffectiveUserId());
  deleteSubnetType.setSubnetId(action.info.getPhysicalResourceId());
  AsyncRequests.<DeleteSubnetType,DeleteSubnetResponseType>sendSync(configuration,deleteSubnetType);
  return action;
}

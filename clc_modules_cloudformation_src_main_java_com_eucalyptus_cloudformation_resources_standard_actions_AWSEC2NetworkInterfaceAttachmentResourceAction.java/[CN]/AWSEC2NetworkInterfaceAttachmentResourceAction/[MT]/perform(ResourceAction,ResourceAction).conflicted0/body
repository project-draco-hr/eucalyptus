{
  AWSEC2NetworkInterfaceAttachmentResourceAction oldAction=(AWSEC2NetworkInterfaceAttachmentResourceAction)oldResourceAction;
  AWSEC2NetworkInterfaceAttachmentResourceAction newAction=(AWSEC2NetworkInterfaceAttachmentResourceAction)newResourceAction;
  if (deviceInstanceOrNetworkInterfaceIsDifferent(oldAction,newAction)) {
    ServiceConfiguration configuration=Topology.lookup(Compute.class);
    if (notCreatedOrNoInstanceOrNoNetworkInterface(oldAction,configuration))     return newAction;
    waitUntilDetached(oldAction,configuration);
  }
  return newAction;
}

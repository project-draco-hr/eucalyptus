{
  DescribeStackResourceResponseType reply=request.getReply();
  try {
    final Context ctx=Contexts.lookup();
    checkActionPermission(PolicySpec.CLOUDFORMATION_DESCRIBESTACKRESOURCE,ctx);
    User user=ctx.getUser();
    String userId=user.getUserId();
    String accountId=user.getAccount().getAccountNumber();
    String stackName=request.getStackName();
    if (stackName == null)     throw new ValidationErrorException("Stack name is null");
    String logicalResourceId=request.getLogicalResourceId();
    if (logicalResourceId == null)     throw new ValidationErrorException("logicalResourceId is null");
    StackResourceEntity stackResourceEntity=StackResourceEntityManager.describeStackResource(accountId,stackName,logicalResourceId);
    StackResourceDetail stackResourceDetail=new StackResourceDetail();
    stackResourceDetail.setDescription(stackResourceEntity.getDescription());
    stackResourceDetail.setLastUpdatedTimestamp(stackResourceEntity.getLastUpdateTimestamp());
    stackResourceDetail.setLogicalResourceId(stackResourceEntity.getLogicalResourceId());
    stackResourceDetail.setMetadata(stackResourceEntity.getMetadataJson());
    stackResourceDetail.setPhysicalResourceId(stackResourceEntity.getPhysicalResourceId());
    stackResourceDetail.setResourceStatus(stackResourceEntity.getResourceStatus() == null ? null : stackResourceEntity.getResourceStatus().toString());
    stackResourceDetail.setResourceStatusReason(stackResourceEntity.getResourceStatusReason());
    stackResourceDetail.setResourceType(stackResourceEntity.getResourceType());
    stackResourceDetail.setStackId(stackResourceEntity.getStackId());
    stackResourceDetail.setStackName(stackResourceEntity.getStackName());
    DescribeStackResourceResult describeStackResourceResult=new DescribeStackResourceResult();
    describeStackResourceResult.setStackResourceDetail(stackResourceDetail);
    reply.setDescribeStackResourceResult(describeStackResourceResult);
  }
 catch (  Exception ex) {
    LOG.error(ex,ex);
    handleException(ex);
  }
  return reply;
}

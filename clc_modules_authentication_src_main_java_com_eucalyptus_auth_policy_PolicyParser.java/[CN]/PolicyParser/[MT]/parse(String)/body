{
  if (policy == null) {
    throw new PolicyException(PolicyException.EMPTY_POLICY);
  }
  if (policy.length() > MAX_POLICY_SIZE) {
    throw new PolicyException(PolicyException.SIZE_TOO_LARGE);
  }
  try {
    JSONObject policyJsonObj=JSONObject.fromObject(policy);
    String version=JsonUtils.getByType(String.class,policyJsonObj,PolicySpec.VERSION);
    List<StatementEntity> statements=parseStatements(policyJsonObj);
    PolicyEntity policyEntity=new PolicyEntity(version,policy,statements);
    return policyEntity;
  }
 catch (  JSONException e) {
    Debugging.logError(LOG,e,"Syntax error in input policy");
    throw new PolicyException(PolicyException.SYNTAX_ERROR,e);
  }
}

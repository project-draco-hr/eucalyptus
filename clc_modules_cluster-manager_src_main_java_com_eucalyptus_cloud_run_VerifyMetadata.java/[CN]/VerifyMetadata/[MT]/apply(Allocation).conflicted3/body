{
  if (allocInfo.getRunInstancesRequest().getKernelId() != null || allocInfo.getRunInstancesRequest().getRamdiskId() != null) {
    Cluster c=Clusters.lookup(Topology.lookup(ClusterController.class,allocInfo.getPartition()));
    if (!c.getNodeHostMap().values().isEmpty()) {
      NodeInfo.Hypervisor h=c.getNodeHostMap().values().iterator().next().getHypervisor();
      LOG.warn("Hypervisor is" + h);
      if (!h.supportEkiEri())       throw new VerificationException("EKI/ERI options are not supported by installation on " + h.name());
    }
  }
  return true;
}

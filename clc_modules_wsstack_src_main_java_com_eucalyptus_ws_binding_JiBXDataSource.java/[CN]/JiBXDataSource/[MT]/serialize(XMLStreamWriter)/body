{
  try {
    boolean full=true;
    final String[] nss=this.bindingFactory.getNamespaces();
    if (this.marshallerIndex >= 0) {
      String prefix=xmlWriter.getPrefix(this.elementNamespace);
      if (this.elementNamespacePrefix.equals(prefix)) {
        full=false;
        for (int i=0; i < this.openNamespaceIndexes.length; i++) {
          final String uri=nss[i];
          prefix=xmlWriter.getPrefix(uri);
          if (!this.openNamespacePrefixes[i].equals(prefix)) {
            full=true;
            break;
          }
        }
      }
    }
    final IXMLWriter writer=new StAXWriter(nss,xmlWriter);
    final IMarshallingContext ctx=this.bindingFactory.createMarshallingContext();
    ctx.setXmlWriter(writer);
    this.marshal(full,ctx);
  }
 catch (  final JiBXException e) {
    throw new XMLStreamException("Error in JiBX marshalling: " + e.getMessage(),e);
  }
}

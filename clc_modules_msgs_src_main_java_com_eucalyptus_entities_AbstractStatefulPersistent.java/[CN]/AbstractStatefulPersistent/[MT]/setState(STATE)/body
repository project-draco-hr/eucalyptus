{
  this.stateChangeStack=Threads.currentStackString();
  if (state != null && this.state != null && !state.equals(this.state)) {
    this.lastState=this.state;
  }
 else   if (state != null && this.state == null) {
    this.lastState=state;
  }
 else   if (state == null && this.state != null) {
    this.lastState=this.state;
  }
  this.state=state;
}

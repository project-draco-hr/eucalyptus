{
  if (timestampMs > reportEndMs)   return;
  if (!attachments.containsKey(resourceId)) {
    attachments.put(resourceId,new HashMap<String,TreeSet<Long>>());
  }
  Map<String,TreeSet<Long>> innerMap=attachments.get(resourceId);
  if (!innerMap.containsKey(attachedResourceId)) {
    innerMap.put(attachedResourceId,new TreeSet<Long>());
  }
  innerMap.get(attachedResourceId).add(Math.max(reportBeginMs,timestampMs));
}

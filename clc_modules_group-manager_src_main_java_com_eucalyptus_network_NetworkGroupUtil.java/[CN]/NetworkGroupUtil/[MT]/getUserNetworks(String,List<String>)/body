{
  List<SecurityGroupItemType> groupInfoList=Lists.newArrayList();
  for (  NetworkRulesGroup group : NetworkGroupUtil.getUserNetworkRulesGroup(userId))   if (groupNames.isEmpty() || groupNames.contains(group.getDisplayName())) {
    SecurityGroupItemType groupInfo=new SecurityGroupItemType();
    groupInfo.setGroupName(group.getDisplayName());
    groupInfo.setGroupDescription(group.getDescription());
    groupInfo.setOwnerId(userId);
    groupInfoList.add(groupInfo);
    for (    NetworkRule rule : group.getNetworkRules()) {
      IpPermissionType ipPerm=new IpPermissionType(rule.getProtocol(),rule.getLowPort(),rule.getHighPort());
      for (      IpRange ipRange : rule.getIpRanges())       ipPerm.getIpRanges().add(ipRange.getValue());
      if (!rule.getNetworkPeers().isEmpty())       for (      NetworkPeer peer : rule.getNetworkPeers())       ipPerm.getGroups().add(new UserIdGroupPairType(peer.getUserQueryKey(),peer.getGroupName()));
      groupInfo.getIpPermissions().add(ipPerm);
    }
  }
  return groupInfoList;
}

{
  statusWidget.putImageState(imageState);
  ImageData imageData=imageMap.get(imageState.getImageUri());
  if (imageData == null) {
    imageData=new ImageData();
    imageData.state=imageState;
    imageMap.put(imageState.getImageUri(),imageData);
  }
 else {
    imageData.state=imageState;
    if (imageData.widgets != null) {
      for (      ImageWidget imageWidget : imageData.widgets) {
        imageWidget.setImageState(imageState);
      }
    }
  }
}

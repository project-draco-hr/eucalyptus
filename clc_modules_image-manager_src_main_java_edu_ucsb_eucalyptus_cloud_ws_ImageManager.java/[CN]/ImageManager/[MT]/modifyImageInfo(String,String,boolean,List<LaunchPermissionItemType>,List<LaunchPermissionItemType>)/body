{
  EntityWrapper<ImageInfo> db=new EntityWrapper<ImageInfo>();
  ImageInfo imgInfo=null;
  try {
    imgInfo=db.getUnique(new ImageInfo(imageId));
  }
 catch (  EucalyptusCloudException e) {
    db.rollback();
    return false;
  }
  if (!userId.equals(imgInfo.getImageOwnerId()) && !isAdmin)   return false;
  try {
    this.applyImageAttributes(db,imgInfo,addList,true);
    this.applyImageAttributes(db,imgInfo,remList,false);
    db.commit();
    return true;
  }
 catch (  EucalyptusCloudException e) {
    LOG.warn(e);
    db.rollback();
    return false;
  }
}

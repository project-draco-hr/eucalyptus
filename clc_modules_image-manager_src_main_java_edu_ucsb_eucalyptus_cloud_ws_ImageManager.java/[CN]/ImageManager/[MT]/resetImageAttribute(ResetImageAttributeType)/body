{
  ResetImageAttributeResponseType reply=(ResetImageAttributeResponseType)request.getReply();
  reply.set_return(true);
  EntityWrapper<ImageInfo> db=new EntityWrapper<ImageInfo>();
  try {
    ImageInfo imgInfo=db.getUnique(new ImageInfo(request.getImageId()));
    if (!request.getUserId().equals(imgInfo.getImageOwnerId()) && !request.isAdministrator())     throw new EucalyptusCloudException("Not allowed to modify image: " + imgInfo.getImageId());
    imgInfo.getPermissions().clear();
    imgInfo.getPermissions().add(UserInfoStore.getUserInfo(new UserInfo(imgInfo.getImageOwnerId())));
    db.commit();
  }
 catch (  EucalyptusCloudException e) {
    db.rollback();
    reply.set_return(false);
  }
catch (  NoSuchUserException e) {
    db.rollback();
    reply.set_return(false);
  }
  return reply;
}

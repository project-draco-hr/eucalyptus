{
  if (BundleState.pending.name().equals(this.getBundleTask().getState()) && this.bundleTask.compareAndSet(this.getBundleTask(),this.getBundleTask(),true,false)) {
    this.getBundleTask().setState(BundleState.storing.name());
    EventRecord.here(BundleCallback.class,EventType.BUNDLE_STARTING,this.vmInstance.getOwner().toString(),this.getBundleTask().getBundleId(),this.getVmInstance().getInstanceId(),this.getBundleTask().getState()).info();
    return true;
  }
 else   if (BundleState.canceling.name().equals(this.getBundleTask().getState()) && this.bundleTask.compareAndSet(this.getBundleTask(),this.getBundleTask(),true,false)) {
    EventRecord.here(BundleCallback.class,EventType.BUNDLE_CANCELLED,this.vmInstance.getOwner().toString(),this.getBundleTask().getBundleId(),this.getVmInstance().getInstanceId(),this.getBundleTask().getState()).info();
    this.resetBundleTask();
    return true;
  }
 else {
    return false;
  }
}

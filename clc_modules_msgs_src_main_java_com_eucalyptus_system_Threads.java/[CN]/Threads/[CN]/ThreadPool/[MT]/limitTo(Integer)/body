{
  if (this.numThreads.equals(numThreads)) {
    return this;
  }
 else {
synchronized (this) {
      if (this.numThreads.equals(numThreads)) {
        return this;
      }
 else {
        this.numThreads=numThreads;
        final ExecutorService oldExec=this.pool;
        this.pool=null;
        if (oldExec != null) {
          oldExec.shutdown();
        }
        if (numThreads == -1) {
          this.pool=Executors.newCachedThreadPool(this);
        }
 else {
          this.pool=Executors.newFixedThreadPool(this.numThreads);
        }
      }
    }
  }
  return this;
}

{
  Network vmNetwork=new Network(userName,this.getName());
  for (  NetworkRule networkRule : this.getNetworkRules()) {
    PacketFilterRule pfrule=new PacketFilterRule(this.getName(),networkRule.getProtocol(),networkRule.getLowPort(),networkRule.getHighPort());
    for (    IpRange cidr : networkRule.getIpRanges())     pfrule.getSourceCidrs().add(cidr.getValue());
    for (    NetworkPeer peer : networkRule.getNetworkPeers())     pfrule.addPeer(peer.getUserQueryKey(),peer.getGroupName());
    vmNetwork.getRules().add(pfrule);
  }
  return vmNetwork;
}

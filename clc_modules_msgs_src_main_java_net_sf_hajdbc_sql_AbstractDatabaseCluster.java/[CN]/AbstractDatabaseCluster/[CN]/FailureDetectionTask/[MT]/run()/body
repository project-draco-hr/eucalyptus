{
  Set<Database<D>> databaseSet=AbstractDatabaseCluster.this.getBalancer().all();
  if (databaseSet.size() > 1) {
    Map<Boolean,List<Database<D>>> aliveMap=AbstractDatabaseCluster.this.getAliveMap(databaseSet);
    if (!aliveMap.get(true).isEmpty() && !AbstractDatabaseCluster.this.getStateManager().isMembershipEmpty()) {
      for (      Database<D> database : aliveMap.get(false)) {
        if (AbstractDatabaseCluster.this.deactivate(database,AbstractDatabaseCluster.this.getStateManager())) {
          logger.error(Messages.getMessage(Messages.DATABASE_DEACTIVATED,database,this));
        }
      }
    }
  }
}

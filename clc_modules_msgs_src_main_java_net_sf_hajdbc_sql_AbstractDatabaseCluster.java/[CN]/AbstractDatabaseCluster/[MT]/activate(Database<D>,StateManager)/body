{
synchronized (this.balancer) {
    this.unregister(database);
    this.register(database,database.getActiveMBean());
    if (database.isDirty()) {
      this.export();
      database.clean();
    }
    boolean added=this.balancer.add(database);
    if (added) {
      DatabaseEvent event=new DatabaseEvent(database);
      manager.activated(event);
      for (      DatabaseActivationListener listener : this.activationListenerList) {
        listener.activated(event);
      }
    }
    return added;
  }
}

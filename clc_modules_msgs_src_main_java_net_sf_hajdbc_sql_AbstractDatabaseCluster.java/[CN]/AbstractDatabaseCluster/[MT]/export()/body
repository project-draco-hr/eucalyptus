{
  File file=null;
  WritableByteChannel outputChannel=null;
  FileChannel fileChannel=null;
  try {
    file=File.createTempFile("ha-jdbc",".xml");
    IMarshallingContext context=BindingDirectory.getFactory(this.getClass()).createMarshallingContext();
    context.setIndent(1,System.getProperty("line.separator"),'\t');
    context.marshalDocument(this,null,null,new FileWriter(file));
    fileChannel=new FileInputStream(file).getChannel();
    outputChannel=this.getOutputChannel(this.url);
    fileChannel.transferTo(0,file.length(),outputChannel);
  }
 catch (  Exception e) {
    logger.warn(Messages.getMessage(Messages.CONFIG_STORE_FAILED,this.url),e);
  }
 finally {
    if (outputChannel != null) {
      try {
        outputChannel.close();
      }
 catch (      IOException e) {
        logger.warn(e.getMessage(),e);
      }
    }
    if (fileChannel != null) {
      try {
        fileChannel.close();
      }
 catch (      IOException e) {
        logger.warn(e.getMessage(),e);
      }
    }
    if (file != null) {
      file.delete();
    }
  }
}

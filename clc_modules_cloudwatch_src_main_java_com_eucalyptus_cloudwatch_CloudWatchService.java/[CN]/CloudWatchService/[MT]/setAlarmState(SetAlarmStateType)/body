{
  SetAlarmStateResponseType reply=request.getReply();
  final Context ctx=Contexts.lookup();
  if (!hasActionPermission(PolicySpec.CLOUDWATCH_SETALARMSTATE,ctx)) {
    throw new EucalyptusCloudException();
  }
  final OwnerFullName ownerFullName=ctx.getUserFullName();
  final String accountId=ownerFullName.getAccountNumber();
  final String alarmName=request.getAlarmName();
  final String stateReason=request.getStateReason();
  final String stateReasonData=request.getStateReasonData();
  final StateValue stateValue=StateValue.valueOf(request.getStateValue());
  AlarmManager.setAlarmState(accountId,alarmName,stateReason,stateReasonData,stateValue);
  return reply;
}

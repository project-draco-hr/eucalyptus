{
  LOG.debug(String.format(EucalyptusProperties.DEBUG_FSTRING,EucalyptusProperties.TokenState.split,token));
  if (!this.pendingTokens.contains(token)) {
    throw new NoSuchTokenException("Splitting the requested token is not possible since it is not pending: " + token);
  }
  List<ResourceToken> childTokens=Lists.newArrayList();
  for (int index=0; index < token.getAmount(); index++) {
    ResourceToken childToken=new ResourceToken(token.getCluster(),token.getCorrelationId() + index,token.getUserName(),1,this.virtualTimer++,token.getVmType());
    LOG.debug(String.format(EucalyptusProperties.DEBUG_FSTRING,EucalyptusProperties.TokenState.child,token));
    childTokens.add(childToken);
  }
  return childTokens;
}

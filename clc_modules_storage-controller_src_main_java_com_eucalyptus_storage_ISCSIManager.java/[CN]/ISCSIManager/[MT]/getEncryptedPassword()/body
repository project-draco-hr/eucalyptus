{
  EntityWrapper<CHAPUserInfo> db=StorageProperties.getEntityWrapper();
  try {
    CHAPUserInfo userInfo=db.getUnique(new CHAPUserInfo("eucalyptus"));
    String encryptedPassword;
    try {
      encryptedPassword=encryptTargetPassword(userInfo.getPassword());
      return encryptedPassword;
    }
 catch (    EucalyptusCloudException e) {
      LOG.error("Unable to encrypt target password. Please check credentials. Have you configured a cluster?",e);
    }
    return null;
  }
 catch (  EucalyptusCloudException ex) {
    throw new EucalyptusCloudException("Unable to find CHAP user: " + "eucalyptus");
  }
 finally {
    db.commit();
  }
}

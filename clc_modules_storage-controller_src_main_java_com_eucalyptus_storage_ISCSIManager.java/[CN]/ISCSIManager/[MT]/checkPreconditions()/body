{
  String returnValue;
  returnValue=SystemUtil.run(new String[]{ROOT_WRAP,"tgtadm","--help"});
  if (returnValue.length() == 0) {
    throw new EucalyptusCloudException("tgtadm not found: Is tgt installed?");
  }
  if (SystemUtil.runAndGetCode(new String[]{ROOT_WRAP,"tgtadm","--lld","iscsi","--mode","target","--op","show"}) != 0) {
    LOG.warn("Unable to connect to tgt daemon. Is tgtd loaded?");
    LOG.info("Attempting to start tgtd ISCSI daemon");
    if (SystemUtil.runAndGetCode(new String[]{ROOT_WRAP,"service","tgtd","start"}) != 0) {
      throw new EucalyptusCloudException("Unable to start tgt daemon. Cannot proceed.");
    }
  }
}

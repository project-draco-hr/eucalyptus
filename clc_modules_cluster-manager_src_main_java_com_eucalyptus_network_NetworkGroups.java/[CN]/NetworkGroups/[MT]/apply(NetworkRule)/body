{
  final IpPermissionType ipPerm=new IpPermissionType(rule.getProtocol(),rule.getLowPort(),rule.getHighPort());
  final Iterable<UserIdGroupPairType> peers=Iterables.transform(rule.getNetworkPeers(),TypeMappers.lookup(NetworkPeer.class,UserIdGroupPairType.class));
  Iterables.addAll(ipPerm.getGroups(),peers);
  final Iterable<String> ipRanges=Iterables.transform(rule.getIpRanges(),TypeMappers.lookup(IpRange.class,String.class));
  Iterables.addAll(ipPerm.getIpRanges(),ipRanges);
  return ipPerm;
}

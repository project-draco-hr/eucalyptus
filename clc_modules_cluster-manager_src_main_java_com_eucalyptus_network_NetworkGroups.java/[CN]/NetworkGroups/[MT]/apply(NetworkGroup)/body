{
  final EntityTransaction db=Entities.get(NetworkGroup.class);
  try {
    final NetworkGroup netGroup=Entities.merge(input);
    final SecurityGroupItemType groupInfo=new SecurityGroupItemType(netGroup.getOwnerAccountNumber(),netGroup.getDisplayName(),netGroup.getDescription());
    final Iterable<IpPermissionType> ipPerms=Iterables.transform(netGroup.getNetworkRules(),TypeMappers.lookup(NetworkRule.class,IpPermissionType.class));
    Iterables.addAll(groupInfo.getIpPermissions(),ipPerms);
    return groupInfo;
  }
  finally {
    db.rollback();
  }
}

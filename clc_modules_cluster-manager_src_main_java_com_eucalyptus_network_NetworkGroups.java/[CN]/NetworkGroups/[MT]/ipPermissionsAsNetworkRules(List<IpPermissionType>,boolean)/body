{
  final List<NetworkRule> ruleList=Lists.newArrayList();
  for (  final IpPermissionType ipPerm : ipPermissions) {
    ruleList.addAll((vpc ? IpPermissionTypeAsNetworkRule.VPC : IpPermissionTypeAsNetworkRule.CLASSIC).apply(ipPerm));
  }
  return ruleList;
}

{
  StoredResult<String> sgroupSetup=this.getChain().findHandler(SecurityGroupSetup.class);
  final List<String> group=sgroupSetup.getResult();
  final String groupName=group.size() > 0 ? group.get(0) : null;
  final Collection<String> zones=evt.getZones();
  for (  String zoneToLaunch : zones) {
    InstanceUserDataBuilder userDataBuilder=null;
    try {
      userDataBuilder=new InstanceUserDataWithCredential(evt.getContext().getUserFullName(),zoneToLaunch);
    }
 catch (    Exception ex) {
      throw new EventHandlerException("failed to create service parameters",ex);
    }
    List<String> instanceIds=null;
    try {
      instanceIds=EucalyptusActivityTasks.getInstance().launchInstances(zoneToLaunch,LOADBALANCER_EMI,LOADBALANCER_INSTANCE_TYPE,groupName,userDataBuilder.build(),this.numInstancesToLaunch);
      StringBuilder sb=new StringBuilder();
      for (      String id : instanceIds)       sb.append(id + " ");
      LOG.info("new servo instance launched: " + sb.toString());
      launchedInstances.addAll(instanceIds);
    }
 catch (    Exception ex) {
      throw new EventHandlerException("failed to launch the servo instance",ex);
    }
  }
}

{
  GetStorageVolumeResponseType reply=(GetStorageVolumeResponseType)request.getReply();
  if (!enableStorage) {
    LOG.warn("Storage has been disabled. Please check your setup");
    return reply;
  }
  String volumeId=request.getVolumeId();
  EntityWrapper<VolumeInfo> db=new EntityWrapper<VolumeInfo>();
  VolumeInfo volumeInfo=new VolumeInfo();
  volumeInfo.setVolumeId(volumeId);
  List<VolumeInfo> volumeInfos=db.query(volumeInfo);
  if (volumeInfos.size() > 0) {
    VolumeInfo foundVolumeInfo=volumeInfos.get(0);
    List<String> returnValues=blockManager.getVolume(volumeId);
    reply.setVolumeId(foundVolumeInfo.getVolumeId());
    reply.setSize(foundVolumeInfo.getSize().toString());
    reply.setStatus(foundVolumeInfo.getStatus());
    reply.setSnapshotId(foundVolumeInfo.getSnapshotId());
    reply.setActualDeviceName(ETHERD_PREFIX + returnValues.get(0) + "."+ returnValues.get(1));
  }
 else {
    db.rollback();
    throw new NoSuchVolumeException(volumeId);
  }
  db.commit();
  return reply;
}

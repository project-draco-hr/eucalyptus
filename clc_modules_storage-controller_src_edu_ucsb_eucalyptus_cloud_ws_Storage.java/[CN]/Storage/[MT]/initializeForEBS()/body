{
  enableSnapshots=enableStorage=true;
  String walrusAddr=StorageProperties.WALRUS_URL;
  if (walrusAddr == null) {
    LOG.warn("Walrus host addr not set");
  }
  blockManager=new LVM2Manager();
  blockManager.initVolumeManager();
  try {
    blockManager.checkPreconditions();
    blockManager.configure();
    startup();
    if (!WalrusProperties.sharedMode)     checkWalrusConnection();
  }
 catch (  Exception ex) {
    enableStorage=false;
    LOG.error(ex.getMessage());
    LOG.warn("Could not initialize block manager. Storage has been disabled.");
    LOG.error("Could not initialize block manager. Storage has been disabled.");
    if (System.getProperty("euca.ebs.disable") == null) {
      LOG.error("EBS is enabled but preconditions failed. Please resolve preconditions or restart with euca.ebs.disable");
      System.exit(0xEC2);
    }
  }
}

{
  checkWalrusConnection();
  if (!enableSnapshots) {
    LOG.warn("Could not connect to Walrus. Snapshot functionality disabled. Please check the Walrus url");
    throw new EucalyptusCloudException("could not connect to Walrus.");
  }
  String walrusSnapshotPath=snapshotBucket + "/" + snapshotId;
  String volumePath=StorageProperties.storageRootDirectory + "/" + volumeId;
  File file=new File(volumePath);
  if (!file.exists()) {
    HttpReader volumeReader=new HttpReader(walrusSnapshotPath,null,file,"GetVolume","",true);
    volumeReader.run();
  }
 else {
    throw new EucalyptusCloudException("volume file already exists");
  }
  if (file.length() == 0) {
    throw new EucalyptusCloudException("could not get volume");
  }
  return volumePath;
}

{
  CreateStorageVolumeResponseType reply=(CreateStorageVolumeResponseType)request.getReply();
  String snapshotId=request.getSnapshotId();
  String userId=request.getUserId();
  String volumeId=request.getVolumeId();
  String size=request.getSize();
  int sizeAsInt=0;
  if (size != null) {
    sizeAsInt=Integer.parseInt(size);
  }
  VolumeInfo volumeInfo=new VolumeInfo(volumeId);
  volumeInfo.setUserName(userId);
  volumeInfo.setSize(sizeAsInt);
  volumeInfo.setStatus(Status.creating.toString());
  Date creationDate=new Date();
  volumeInfo.setCreateTime(creationDate);
  volumeInfo.setTransferred(Boolean.FALSE);
  if (snapshotId != null) {
    volumeInfo.setSnapshotId(snapshotId);
    reply.setSnapshotId(snapshotId);
  }
  EntityWrapper<VolumeInfo> db=new EntityWrapper<VolumeInfo>();
  reply.setCreateTime(DateUtils.format(creationDate.getTime(),DateUtils.ISO8601_DATETIME_PATTERN) + ".000Z");
  reply.setSize(size);
  reply.setStatus(volumeInfo.getStatus());
  db.add(volumeInfo);
  db.commit();
  VolumeCreator volumeCreator=new VolumeCreator(volumeId,snapshotId,sizeAsInt);
  volumeCreator.start();
  return reply;
}

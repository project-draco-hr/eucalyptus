{
  byte[] bytes=new byte[StorageProperties.TRANSFER_CHUNK_SIZE];
  try {
    assert(method != null);
    httpClient.executeMethod(method);
    InputStream httpIn;
    if (compressed) {
      httpIn=new GZIPInputStream(method.getResponseBodyAsStream());
    }
 else {
      httpIn=method.getResponseBodyAsStream();
    }
    int bytesRead;
    BufferedOutputStream bufferedOut=new BufferedOutputStream(new FileOutputStream(file));
    while ((bytesRead=httpIn.read(bytes)) > 0) {
      bufferedOut.write(bytes,0,bytesRead);
    }
    bufferedOut.close();
    method.releaseConnection();
  }
 catch (  Exception ex) {
    LOG.error(ex,ex);
  }
}

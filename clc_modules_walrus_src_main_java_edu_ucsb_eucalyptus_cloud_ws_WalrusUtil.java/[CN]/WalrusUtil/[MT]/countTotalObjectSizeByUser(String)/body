{
  EntityWrapper<BucketInfo> db=WalrusControl.getEntityWrapper();
  BucketInfo searchBucket=new BucketInfo();
  searchBucket.setUserId(userId);
  try {
    List<BucketInfo> bucketInfoList=db.query(searchBucket);
    long size=0;
    for (    BucketInfo b : bucketInfoList) {
      size+=b.getBucketSize();
    }
    db.commit();
    return size;
  }
 catch (  Exception e) {
    db.rollback();
    throw new AuthException("Failed to search bucket",e);
  }
}

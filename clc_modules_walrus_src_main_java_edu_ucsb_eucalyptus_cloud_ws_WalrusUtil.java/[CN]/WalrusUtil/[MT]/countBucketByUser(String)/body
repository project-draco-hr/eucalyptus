{
  EntityWrapper<BucketInfo> db=WalrusControl.getEntityWrapper();
  BucketInfo searchBucket=new BucketInfo();
  searchBucket.setUserId(userId);
  try {
    List<BucketInfo> bucketInfoList=db.query(searchBucket);
    db.commit();
    return bucketInfoList.size();
  }
 catch (  Exception e) {
    db.rollback();
    throw new AuthException("Failed to search bucket",e);
  }
}

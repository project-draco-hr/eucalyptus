{
  if (event.getMessage() instanceof MappingHttpRequest) {
    MessageEvent upstreamEvent=event;
    MappingHttpRequest httpRequest=(MappingHttpRequest)event.getMessage();
    ChannelBuffer content=httpRequest.getContent();
    if (aggregator.offer(event)) {
      HttpThresholdBufferingAggregator.AggregatedMessageEvent result=aggregator.poll();
      if (result == null) {
        return;
      }
 else {
        aggregator.hardReset();
        httpRequest=(MappingHttpRequest)(result.getMessageEvent().getMessage());
        content=result.getAggregatedContentBuffer();
      }
    }
    this.handleFormMessage(httpRequest,content);
    ctx.sendUpstream(upstreamEvent);
    return;
  }
 else   if (event.getMessage() instanceof DefaultHttpChunk) {
    MessageEvent upstreamEvent=event;
    if (aggregator.offer(event)) {
      HttpThresholdBufferingAggregator.AggregatedMessageEvent result=aggregator.poll();
      if (result != null) {
        aggregator.hardReset();
        MappingHttpRequest httpRequest=(MappingHttpRequest)(result.getMessageEvent().getMessage());
        this.handleFormMessage(httpRequest,result.getAggregatedContentBuffer());
        ctx.sendUpstream(result.getMessageEvent());
        return;
      }
 else {
        return;
      }
    }
  }
  ctx.sendUpstream(event);
}

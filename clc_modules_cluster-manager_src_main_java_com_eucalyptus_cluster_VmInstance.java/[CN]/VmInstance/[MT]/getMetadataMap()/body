{
  boolean dns=Components.lookup("dns").isRunningRemoteMode();
  Map<String,String> m=new HashMap<String,String>();
  m.put("ami-launch-index","" + this.getLaunchIndex());
  m.put("hostname",this.getPublicAddress());
  m.put("instance-id",this.getInstanceId());
  m.put("instance-type",this.getVmTypeInfo().getName());
  if (dns) {
    m.put("local-hostname",this.getNetworkConfig().getPrivateDnsName());
  }
 else {
    m.put("local-hostname",this.getNetworkConfig().getIpAddress());
  }
  m.put("local-ipv4",this.getNetworkConfig().getIpAddress());
  if (dns) {
    m.put("public-hostname",this.getNetworkConfig().getPublicDnsName());
  }
 else {
    m.put("public-hostname",this.getPublicAddress());
  }
  m.put("public-ipv4",this.getPublicAddress());
  m.put("reservation-id",this.getReservationId());
  m.put("security-groups",this.getNetworkNames().toString().replaceAll("[\\Q[]\\E]","").replaceAll(", ","\n"));
  m.put("block-device-mapping/","emi\nephemeral\nephemeral0\nroot\nswap");
  m.put("block-device-mapping/emi","sda1");
  m.put("block-device-mapping/ami","sda1");
  m.put("block-device-mapping/ephemeral","sda2");
  m.put("block-device-mapping/ephemeral0","sda2");
  m.put("block-device-mapping/swap","sda3");
  m.put("block-device-mapping/root","/dev/sda1");
  m.put("public-keys/","0=" + this.getKeyInfo().getName());
  m.put("public-keys/0","openssh-key");
  m.put("public-keys/0/","openssh-key");
  m.put("public-keys/0/openssh-key",this.getKeyInfo().getValue());
  m.put("placement/","availability-zone");
  m.put("placement/availability-zone",this.getPlacement());
  String dir="";
  for (  String entry : m.keySet()) {
    if ((entry.contains("/") && !entry.endsWith("/"))) {
      continue;
    }
    dir+=entry + "\n";
  }
  m.put("",dir);
  return m;
}

{
  this.reservationId=reservationId;
  this.launchIndex=launchIndex;
  this.instanceId=instanceId;
  this.owner=owner;
  this.placement=placement;
  String p=null;
  try {
    p=ServiceConfigurations.getConfiguration(ClusterConfiguration.class,this.placement).getPartition();
  }
 catch (  PersistenceException ex) {
    p=placement;
    LOG.debug("Failed to find cluster configuration named: " + this.placement + " using that as the partition name.");
  }
  this.partition=p;
  this.userData=userData;
  this.platform=platform;
  this.keyInfo=keyInfo;
  this.vmTypeInfo=vmTypeInfo;
  this.networks.addAll(networks);
  this.networkConfig.setMacAddress("d0:0d:" + VmInstances.asMacAddress(this.instanceId));
  this.networkConfig.setIpAddress(DEFAULT_IP);
  this.networkConfig.setIgnoredPublicIp(DEFAULT_IP);
  this.networkConfig.setNetworkIndex(Integer.parseInt(networkIndex));
  this.stopWatch.start();
  this.updateWatch.start();
  this.updateDns();
  this.store();
}

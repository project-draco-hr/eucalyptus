{
  EucalyptusErrorMessageType errMsg=null;
  if (exception != null) {
    String desc="";
    LOG.error(exception,exception);
    exception=exception.getCause() != null ? exception.getCause() : exception;
    for (Throwable e=exception; e != null; e=e.getCause()) {
      desc+="\n" + e.getMessage();
    }
    errMsg=new EucalyptusErrorMessageType(componentName,msg,desc);
  }
 else {
    ByteArrayOutputStream exStream=new ByteArrayOutputStream();
    if (exception != null)     exception.printStackTrace(new PrintStream(exStream));
    errMsg=new EucalyptusErrorMessageType(componentName,msg,"Internal Error: " + exStream.toString());
  }
  return errMsg;
}

{
  Throwable cause=exMsg.getException();
  if (cause instanceof MessagingException) {
    MessagingException messagingEx=((MessagingException)cause);
    cause=messagingEx.getCause();
    MuleMessage muleMsg=messagingEx.getUmoMessage();
    Object payload=muleMsg.getPayload();
    BaseMessage msg=convert(payload);
    if (msg != null) {
      ServiceContext.response(new ExceptionResponseType(msg,cause.getMessage(),HttpResponseStatus.NOT_ACCEPTABLE,cause));
      return;
    }
 else {
      LOG.error("Failed to identify request context for recieved error: " + exMsg.toString());
      cause=new WebServicesException("Failed to identify request context for recieved error: " + exMsg.toString() + " while handling error: "+ cause.getMessage(),cause,HttpResponseStatus.NOT_ACCEPTABLE);
      ServiceContext.responseError(cause);
    }
  }
 else   if (cause instanceof MuleException) {
    LOG.error("Error service request: " + cause.getMessage(),cause);
    cause=new WebServicesException(cause.getMessage(),cause,HttpResponseStatus.NOT_FOUND);
    ServiceContext.responseError(cause);
  }
 else {
    ServiceContext.responseError(cause);
  }
}

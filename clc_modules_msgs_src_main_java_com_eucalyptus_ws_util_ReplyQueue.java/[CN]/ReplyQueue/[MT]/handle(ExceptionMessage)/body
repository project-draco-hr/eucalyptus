{
  Throwable cause=exMsg.getException();
  EventRecord.here(ReplyQueue.class,EventType.MSG_REPLY,cause.getClass().getCanonicalName(),cause.getMessage()).debug();
  if (cause instanceof MessagingException) {
    MessagingException messagingEx=((MessagingException)cause);
    cause=messagingEx.getCause();
    MuleMessage muleMsg=messagingEx.getUmoMessage();
    Object payload=muleMsg.getPayload();
    BaseMessage msg=convert(payload);
    if (msg != null) {
      this.handle(new ExceptionResponseType(msg,cause.getMessage(),HttpResponseStatus.NOT_ACCEPTABLE,cause));
      return;
    }
 else {
      LOG.error("Failed to identify request context for recieved error: " + exMsg.toString());
    }
  }
 else   if (cause instanceof MuleException) {
    LOG.error("Error service request: " + cause.getMessage(),cause);
    cause=new WebServicesException(cause.getMessage(),cause,HttpResponseStatus.NOT_FOUND);
    try {
      Context ctx=Contexts.lookup();
      Channels.fireExceptionCaught(ctx.getChannel(),cause);
    }
 catch (    IllegalContextAccessException ex) {
      LOG.error(ex);
      LOG.error(cause,cause);
    }
  }
 else {
    try {
      Context ctx=Contexts.lookup();
      Channels.fireExceptionCaught(ctx.getChannel(),cause);
    }
 catch (    IllegalContextAccessException ex) {
      LOG.error(ex);
      LOG.error(cause,cause);
    }
  }
}

{
  try {
    String oldLCName=createLaunchConfigName(LAUNCH_CONFIG_BASE_NAME,oldKeyName,oldVMType);
    LaunchConfigurationType launchConfig=describeLaunchConfiguration(oldLCName);
    List<AutoScalingGroupType> members=describeAutoScalingGroups(Lists.newArrayList(ASG_GROUP_NAME));
    int desiredCapacity=0;
    if (launchConfig != null && members != null) {
      for (      AutoScalingGroupType type : members) {
        if (LAUNCH_CONFIG_BASE_NAME.equals(type.getLaunchConfigurationName()))         desiredCapacity=type.getDesiredCapacity();
      }
      String newLCName=createLaunchConfiguration(newKeyName,newVMType);
      updateAutoScalingGroup(ASG_GROUP_NAME,getAvailableAZ(),desiredCapacity,newLCName);
      deleteLaunchConfiguration(oldLCName);
    }
  }
 catch (  Exception ex) {
    LOG.warn("Error updating launch configuration",ex);
  }
}

{
  try {
    CreateLaunchConfigurationType msg=new CreateLaunchConfigurationType();
    msg.setImageId(imageId);
    msg.setInstanceType(instanceType);
    if (instanceProfileName != null)     msg.setIamInstanceProfile(instanceProfileName);
    if (keyName != null)     msg.setKeyName(keyName);
    msg.setLaunchConfigurationName(launchConfigName);
    SecurityGroups groups=new SecurityGroups(Lists.<String>newArrayList(securityGroup));
    msg.setSecurityGroups(groups);
    msg.setUserData(userData);
    sendSyncToComonent(AutoScaling.class,msg);
  }
 catch (  Exception e) {
    LOG.warn(String.format("Failed to create launch configuration with image id:%s, type:%s, profile name:%s," + "launch config name:%s, security group:%s, key name:%s, user data: %s",imageId,instanceType,instanceProfileName,launchConfigName,securityGroup,keyName,userData));
    throw new EucalyptusCloudException("Failed to create launch configuration due to " + e.getMessage());
  }
}

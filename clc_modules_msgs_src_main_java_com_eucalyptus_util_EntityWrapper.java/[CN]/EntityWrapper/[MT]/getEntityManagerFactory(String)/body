{
synchronized (EntityWrapper.class) {
    if (!emf.containsKey(persistenceContext)) {
      LOG.info("-> Setting up persistence context for : " + persistenceContext);
      LOG.info("-> database host: " + System.getProperty("euca.db.host"));
      LOG.info("-> database port: " + System.getProperty("euca.db.port"));
      emf.put(persistenceContext,Persistence.createEntityManagerFactory(persistenceContext));
    }
    return emf.get(persistenceContext);
  }
}

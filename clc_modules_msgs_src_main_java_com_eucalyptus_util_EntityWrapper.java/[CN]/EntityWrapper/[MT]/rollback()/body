{
  if (doDebug) {
    Exception e=new Exception();
    e.fillInStackTrace();
    for (    StackTraceElement ste : e.getStackTrace()) {
      if (ste.getClassName().equals(EntityWrapper.class.getCanonicalName())) {
        continue;
      }
 else {
        LOG.debug("CLOSE CONNECTION " + ste.toString());
        break;
      }
    }
  }
  try {
    if (this.tx.isActive()) {
      this.tx.rollback();
    }
  }
 catch (  Exception e) {
    EntityWrapper.exceptionCaught(e);
  }
 finally {
    this.em.close();
  }
}

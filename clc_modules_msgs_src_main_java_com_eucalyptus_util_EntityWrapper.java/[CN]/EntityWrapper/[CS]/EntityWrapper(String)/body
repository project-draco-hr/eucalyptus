{
  Exception e=new Exception();
  e.fillInStackTrace();
  for (  StackTraceElement ste : e.getStackTrace()) {
    if (ste.getClassName().equals(EntityWrapper.class.getCanonicalName()) || "getEntityWrapper".equals(ste.getMethodName())) {
      continue;
    }
 else {
      LOG.debug("CREATE CONNECTION " + ste.toString());
      break;
    }
  }
  this.em=EntityWrapper.getEntityManagerFactory(persistenceContext).createEntityManager();
  this.session=(Session)em.getDelegate();
  this.tx=em.getTransaction();
  tx.begin();
}

{
  try {
    this.serviceClient.cleanupTransport();
    this.httpClient.getHttpConnectionManager().closeIdleConnections(0);
    this.serviceClient.engageModule(Defaults.WS_SECURITY_MODULE);
    this.serviceClient.engageModule(Defaults.WS_ADDRESSING_MODULE);
  }
 catch (  AxisFault axisFault) {
    LOG.error(axisFault,axisFault);
  }
  AxisOperation op=null;
  if (this.properties.getMep().equals(Mep.OUT_ONLY))   op=this.serviceClient.getAxisService().getOperation(ServiceClient.ANON_OUT_ONLY_OP);
 else   if (this.properties.getMep().equals(Mep.OUT_IN))   op=this.serviceClient.getAxisService().getOperation(ServiceClient.ANON_OUT_IN_OP);
 else   op=this.serviceClient.getAxisService().getOperation(ServiceClient.ANON_OUT_IN_OP);
  this.serviceClient.setOptions(this.getOptions());
  op.getMessage(WSDLConstants.MESSAGE_LABEL_IN_VALUE).getPolicySubject().clear();
  op.getMessage(WSDLConstants.MESSAGE_LABEL_OUT_VALUE).getPolicySubject().clear();
  if (this.properties.getOutPolicy() != null)   op.getMessage(WSDLConstants.MESSAGE_LABEL_OUT_VALUE).getPolicySubject().attachPolicy(this.properties.getOutPolicy());
  if (this.properties.getInPolicy() != null)   op.getMessage(WSDLConstants.MESSAGE_LABEL_IN_VALUE).getPolicySubject().attachPolicy(this.properties.getInPolicy());
  this.valid=true;
}

{
  super();
  this.serviceConfiguration=serviceConfiguration;
  this.stateMachine=new ServiceState(this.serviceConfiguration);
  URI remoteUri;
  if (this.getServiceConfiguration().isVmLocal()) {
    remoteUri=ServiceUris.internal(this.getServiceConfiguration().getComponentId());
  }
 else {
    remoteUri=ServiceUris.internal(this.getServiceConfiguration());
  }
  if (this.serviceConfiguration.isVmLocal()) {
    OrderedShutdown.register(BasicService.this.serviceConfiguration.getComponentId().getClass(),new Runnable(){
      @Override public void run(){
        try {
          LOG.warn("SHUTDOWN Service: " + BasicService.this.serviceConfiguration.getName());
          ServiceTransitions.pathTo(BasicService.this.serviceConfiguration,Component.State.PRIMORDIAL).get(30000,TimeUnit.SECONDS);
        }
 catch (        final ExecutionException ex) {
          LOG.error(ex,ex);
        }
catch (        final InterruptedException ex) {
          Logs.exhaust().error(ex,ex);
          Thread.currentThread().interrupt();
        }
catch (        TimeoutException ex) {
          LOG.error(ex,ex);
        }
      }
    }
);
  }
}

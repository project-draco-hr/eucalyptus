{
  Bucket searchBucket=new Bucket();
  searchBucket.setOwnerCanonicalId(ownerCanonicalId);
  if (includeHidden) {
    searchBucket.setHidden(null);
  }
 else {
    searchBucket.setHidden(false);
  }
  List<Bucket> buckets=null;
  try {
    buckets=Transactions.findAll(searchBucket);
    return buckets;
  }
 catch (  TransactionException e) {
    LOG.error("Error listing buckets for user " + ownerCanonicalId + " due to DB transaction error",e);
    throw e;
  }
}

{
  Function<String,Bucket> incrementSize=new Function<String,Bucket>(){
    @Override public Bucket apply(    String bucketName){
      Bucket b;
      try {
        b=Entities.uniqueResult(new Bucket(bucketName));
        b.setBucketSize(b.getBucketSize() + sizeToChange);
        Entities.mergeDirect(b);
        return b;
      }
 catch (      TransactionException|NoSuchElementException e) {
        LOG.error("Error updating bucket " + bucketName + " size by "+ sizeToChange,e);
      }
      return null;
    }
  }
;
  Entities.asTransaction(incrementSize).apply(bucketName);
}

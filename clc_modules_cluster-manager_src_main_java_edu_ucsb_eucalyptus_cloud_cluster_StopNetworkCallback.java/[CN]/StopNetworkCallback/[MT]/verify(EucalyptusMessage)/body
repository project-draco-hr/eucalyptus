{
  for (  VmInstance v : VmInstances.getInstance().listValues()) {
    if (v.getNetworkNames().contains(token.getName()) && v.getPlacement().equals(token.getCluster())) {
      throw new EucalyptusClusterException("Returning stop network event since it still exists.");
    }
  }
  try {
    Network net=Networks.getInstance().lookup(token.getName());
    Cluster cluster=Clusters.getInstance().lookup(token.getCluster());
    LOG.debug("Releasing network token back to cluster: " + token);
    cluster.getState().releaseNetworkAllocation(token);
    LOG.debug("Removing network token: " + token);
    try {
      Networks.getInstance().setState(token.getName(),Networks.State.DISABLED);
    }
 catch (    Exception e) {
      LOG.debug(e);
    }
  }
 catch (  Exception e) {
    LOG.debug(e);
  }
}

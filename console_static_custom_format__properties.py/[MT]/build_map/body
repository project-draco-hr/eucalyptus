def build_map(file_path, key_arr=None):
    new_map = {}
    try:
        f = open(file_path, mode='r')
    except:
        print ('Cannot find %s' % file_path)
        exit((-1))
    if f:
        warning = False
        for line in f.readlines():
            try:
                if line.startswith('#warning - translation not found'):
                    warning = True
                    continue
                if (warning == False):
                    (lkey, rval) = line.split('=', 1)
                    lkey = lkey.strip()
                    rval = rval.strip()
                    if (key_arr != None):
                        key_arr.append(lkey)
                    new_map[lkey] = rval
                else:
                    warning = False
            except Exception as err:
                if (key_arr != None):
                    key_arr.append(line)
        f.close()
    return new_map

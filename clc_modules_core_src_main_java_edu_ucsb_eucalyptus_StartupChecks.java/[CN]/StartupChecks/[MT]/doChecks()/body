{
  StartupChecks.checkDirectories();
  boolean hasDb=StartupChecks.checkDatabase();
  if (!hasDb) {
    StartupChecks.createDb();
    hasDb=StartupChecks.checkDatabase();
  }
  if (!hasDb) {
    LOG.fatal(String.format(HEADER_FSTRING,"STARTUP FAILURE"));
    if (!hasDb)     LOG.fatal("Failed to initialize the database in: " + SubDirectory.DB);
    StartupChecks.fail("See errors messages above.");
  }
  EntityWrapper<ImageInfo> db2=new EntityWrapper<ImageInfo>();
  try {
    List<ImageInfo> imageList=db2.query(new ImageInfo());
    for (    ImageInfo image : imageList) {
      if (image.getImageLocation().split("/").length != 2) {
        LOG.info("Image with invalid location, needs to be reregistered: " + image.getImageId());
        LOG.info("Removing entry for: " + image.getImageId());
        db2.delete(image);
      }
    }
    db2.commit();
  }
 catch (  Exception e1) {
    db2.rollback();
  }
  checkWalrus();
  checkStorage();
  return true;
}

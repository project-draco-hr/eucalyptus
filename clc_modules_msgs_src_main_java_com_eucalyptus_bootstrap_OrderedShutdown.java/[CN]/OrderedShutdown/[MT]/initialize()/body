{
  executor=Executors.newFixedThreadPool(1);
  Runtime.getRuntime().addShutdownHook(new Thread(){
    @Override public void run(){
      LOG.warn("Executing Shutdown Hooks...");
      List<ShutdownHook> runHooks=Lists.newArrayList();
      hooks.drainTo(runHooks);
      for (      ShutdownHook h : runHooks) {
        try {
          executor.submit(h.getRunnable()).get();
        }
 catch (        InterruptedException e) {
          Exceptions.maybeInterrupted(e);
        }
catch (        ExecutionException e) {
          LOG.error(e,e);
        }
      }
    }
  }
);
}

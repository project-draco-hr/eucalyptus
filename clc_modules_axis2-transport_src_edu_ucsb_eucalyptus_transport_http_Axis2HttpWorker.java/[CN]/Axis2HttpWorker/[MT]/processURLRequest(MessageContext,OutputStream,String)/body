{
  try {
    if (contentType == null || "".equals(contentType)) {
      contentType=HTTPConstants.MEDIA_TYPE_X_WWW_FORM;
    }
    msgContext.setDoingREST(true);
    msgContext.setProperty(MessageContext.TRANSPORT_OUT,out);
    String charSetEncoding=BuilderUtil.getCharSetEncoding(contentType);
    msgContext.setProperty(Constants.Configuration.CHARACTER_SET_ENCODING,charSetEncoding);
    SOAPEnvelope soapEnvelope=TransportUtils.createSOAPMessage(msgContext,null,contentType);
    msgContext.setEnvelope(soapEnvelope);
  }
 catch (  Exception e) {
    throw e instanceof AxisFault ? (AxisFault)e : AxisFault.makeFault(e);
  }
 finally {
    String messageType=(String)msgContext.getProperty(Constants.Configuration.MESSAGE_TYPE);
    if (HTTPConstants.MEDIA_TYPE_X_WWW_FORM.equals(messageType) || HTTPConstants.MEDIA_TYPE_MULTIPART_FORM_DATA.equals(messageType))     msgContext.setProperty(Constants.Configuration.MESSAGE_TYPE,HTTPConstants.MEDIA_TYPE_APPLICATION_XML);
  }
  AxisEngine axisEngine=new AxisEngine(msgContext.getConfigurationContext());
  return axisEngine.receive(msgContext);
}

{
  try {
    msgContext.setDoingREST(true);
    String charSetEncoding=BuilderUtil.getCharSetEncoding(contentType);
    msgContext.setProperty(Constants.Configuration.CHARACTER_SET_ENCODING,charSetEncoding);
    SOAPFactory soapFactory=new SOAP11Factory();
    SOAPEnvelope soapEnvelope=soapFactory.getDefaultEnvelope();
    msgContext.setEnvelope(soapEnvelope);
    in=HTTPTransportUtils.handleGZip(msgContext,in);
    msgContext.setProperty(Constants.Configuration.CONTENT_TYPE,contentType);
    msgContext.setProperty(MessageContext.TRANSPORT_OUT,out);
    msgContext.setProperty(MessageContext.TRANSPORT_IN,in);
  }
 catch (  Exception e) {
    throw e instanceof AxisFault ? (AxisFault)e : AxisFault.makeFault(e);
  }
 finally {
    String messageType=(String)msgContext.getProperty(Constants.Configuration.MESSAGE_TYPE);
    if (HTTPConstants.MEDIA_TYPE_X_WWW_FORM.equals(messageType) || HTTPConstants.MEDIA_TYPE_MULTIPART_FORM_DATA.equals(messageType))     msgContext.setProperty(Constants.Configuration.MESSAGE_TYPE,HTTPConstants.MEDIA_TYPE_APPLICATION_XML);
  }
  AxisEngine axisEngine=new AxisEngine(msgContext.getConfigurationContext());
  return axisEngine.receive(msgContext);
}

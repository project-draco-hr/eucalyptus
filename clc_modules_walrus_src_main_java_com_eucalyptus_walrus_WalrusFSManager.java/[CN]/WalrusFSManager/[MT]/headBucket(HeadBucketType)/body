{
  HeadBucketResponseType reply=(HeadBucketResponseType)request.getReply();
  Context ctx=Contexts.lookup();
  Account account=ctx.getAccount();
  String bucketName=request.getBucket();
  EntityTransaction db=Entities.get(BucketInfo.class);
  try {
    BucketInfo bucket=Entities.uniqueResult(new BucketInfo(bucketName));
    return reply;
  }
 catch (  NoSuchElementException e) {
    throw new HeadNoSuchBucketException(bucketName);
  }
catch (  TransactionException e) {
    LOG.error("DB transaction error looking up bucket " + bucketName + ": "+ e.getMessage());
    LOG.debug("DB tranction exception looking up bucket " + bucketName,e);
    throw new EucalyptusCloudException("Internal error doing db lookup for " + bucketName,e);
  }
 finally {
    db.rollback();
  }
}

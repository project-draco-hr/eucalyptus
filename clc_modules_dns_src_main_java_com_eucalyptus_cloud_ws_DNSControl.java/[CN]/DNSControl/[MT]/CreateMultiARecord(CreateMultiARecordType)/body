{
  CreateMultiARecordResponseType reply=(CreateMultiARecordResponseType)request.getReply();
  String zone=request.getZone();
  if (zone.endsWith("."))   zone+=DNSProperties.DOMAIN + ".";
 else   zone+="." + DNSProperties.DOMAIN + ".";
  String name=request.getName();
  if (name.endsWith("."))   name+=DNSProperties.DOMAIN + ".";
 else   name+="." + DNSProperties.DOMAIN + ".";
  long ttl=request.getTtl();
  final EntityTransaction db=Entities.get(ARecordNameInfo.class);
  try {
    Entities.uniqueResult(ARecordNameInfo.named(name,zone));
    db.commit();
    throw new EucalyptusCloudException("A record with the same name is found");
  }
 catch (  NoSuchElementException ex) {
    ARecordNameInfo newInfo=ARecordNameInfo.newInstance(name,zone,DClass.IN,ttl);
    Entities.persist(newInfo);
    db.commit();
  }
catch (  Exception ex) {
    db.rollback();
    throw new EucalyptusCloudException("Failed due to database error");
  }
  return reply;
}

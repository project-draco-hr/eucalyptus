{
  DNSProperties.update();
  EntityWrapper<ZoneInfo> db=DNSControl.getEntityWrapper();
  try {
    ZoneInfo zInfo=new ZoneInfo();
    List<ZoneInfo> zoneInfos=db.query(zInfo);
    for (    ZoneInfo zoneInfo : zoneInfos) {
      String name=zoneInfo.getName();
      EntityWrapper<SOARecordInfo> dbSOA=db.recast(SOARecordInfo.class);
      SOARecordInfo searchSOARecordInfo=new SOARecordInfo();
      searchSOARecordInfo.setName(name);
      SOARecordInfo soaRecordInfo=dbSOA.getUnique(searchSOARecordInfo);
      EntityWrapper<NSRecordInfo> dbNS=db.recast(NSRecordInfo.class);
      NSRecordInfo searchNSRecordInfo=new NSRecordInfo();
      searchNSRecordInfo.setName(name);
      NSRecordInfo nsRecordInfo=dbNS.getUnique(searchNSRecordInfo);
      ZoneManager.addZone(zoneInfo,soaRecordInfo,nsRecordInfo);
    }
    EntityWrapper<ARecordInfo> dbARec=db.recast(ARecordInfo.class);
    ARecordInfo searchARecInfo=new ARecordInfo();
    List<ARecordInfo> aRecInfos=dbARec.query(searchARecInfo);
    for (    ARecordInfo aRecInfo : aRecInfos) {
      ZoneManager.addRecord(aRecInfo);
    }
    db.commit();
  }
 catch (  EucalyptusCloudException ex) {
    db.rollback();
    LOG.error(ex);
  }
}

{
  Account account=Accounts.lookupAccountByName(uif.getAccountName());
  User user=account.lookupUserByName(uif.getUserName());
  if (!user.getName().equals(uif.getUserName())) {
    user.setName(uif.getUserName());
  }
  if (user.getPasswordExpires() != uif.getPasswordExpires()) {
    user.setPasswordExpires(uif.getPasswordExpires());
  }
  Map<String,String> info=Maps.newHashMap();
  info.putAll(user.getInfo());
  if (uif.getRealName() != null) {
    info.put(USER_INFO_FULLNAME,uif.getRealName());
  }
  if (uif.getEmail() != null) {
    info.put(USER_INFO_EMAIL,uif.getEmail());
  }
  if (uif.getTelephoneNumber() != null) {
    info.put(USER_INFO_PHONE,uif.getTelephoneNumber());
  }
  if (uif.getAffiliation() != null) {
    info.put(USER_INFO_AFFILIATION,uif.getAffiliation());
  }
  if (uif.getProjectDescription() != null) {
    info.put(USER_INFO_PROJECT_DESC,uif.getProjectDescription());
  }
  if (uif.getProjectPIName() != null) {
    info.put(USER_INFO_PROJECT_PI,uif.getProjectPIName());
  }
  user.setInfo(info);
  if (uif.getPassword() != null) {
    user.setPassword(Crypto.generateHashedPassword(uif.getPassword()));
  }
}

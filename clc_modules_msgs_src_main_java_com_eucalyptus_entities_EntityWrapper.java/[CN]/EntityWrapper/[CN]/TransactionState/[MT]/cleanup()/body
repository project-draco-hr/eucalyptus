{
  try {
    if ((this.transaction != null) && this.transaction.isActive()) {
      this.transaction.rollback();
    }
    this.transaction=null;
    if ((this.session != null) && (this.session.get() != null)) {
      this.session.clear();
    }
    if ((this.em != null) && this.em.isOpen()) {
      this.em.close();
    }
    this.em=null;
  }
  finally {
    outstanding.remove(this.txUuid);
  }
}

{
  if (e instanceof JDBCConnectionException || e instanceof IllegalStateException) {
    LOG.error("EntityWrapper failed because of an underlying JDBC/SQL error: " + e.getCause(),e);
    PersistenceContexts.handleConnectionError(e);
  }
 else   if (e instanceof HibernateException || e instanceof PersistenceException) {
    LOG.error("EntityWrapper failed because of an underlying JPA error: " + e.getCause(),e);
    PersistenceContexts.handleConnectionError(e);
  }
 else {
    LOG.error("EntityWrapper failed because of a non-specific error: " + e.getCause(),e);
  }
}

{
  try {
    CheckedListenableFuture<P> result=tid.leave();
    try {
      this.fireOutListeners(tid.getTransitionRule().getFromState());
    }
 catch (    Exception ex) {
      LOG.error(ex,ex);
    }
    return result;
  }
 catch (  Throwable t) {
    this.error(t);
    throw Exceptions.debug(new IllegalStateException(String.format("Failed to apply transition %s because leave() threw an exception: %s",transitionName.toString(),t.getMessage()),t));
  }
}

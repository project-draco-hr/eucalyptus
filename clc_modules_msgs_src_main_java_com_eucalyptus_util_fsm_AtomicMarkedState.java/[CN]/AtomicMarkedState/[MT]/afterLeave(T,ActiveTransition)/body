{
  try {
    this.fireOutListeners(tid.getTransitionRule().getFromState());
    return tid.leave();
  }
 catch (  Throwable t) {
    this.rollback();
    throw Exceptions.trace(new IllegalStateException(String.format("Failed to apply transition %s because leave() threw an exception: %s",transitionName.toString(),t.getMessage()),t));
  }
}

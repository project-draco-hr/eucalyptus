{
  try {
    this.fireOutListeners(tid.getFromState());
    tid.leave();
  }
 catch (  IllegalStateException t) {
    LOG.error(t,t);
    throw t;
  }
catch (  Throwable t) {
    LOG.error(t,t);
    this.rollback();
    throw new IllegalStateException(String.format("Failed to apply transition %s because leave() threw an exception.",transitionName.toString()),t);
  }
}

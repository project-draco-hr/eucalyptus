{
  LOG.debug("Transition rollback(): " + this.toString());
  if (Logs.EXTREME) {
    Logs.exhaust().error(Joiner.on("\n\t\t").join(Thread.currentThread().getStackTrace()));
  }
  if (!this.state.isMarked()) {
    Exceptions.debug(new IllegalStateException("rollback() called when there is no currently pending transition: " + this.toString()));
  }
 else {
    ActiveTransition tr=this.currentTransition.getAndSet(null);
    this.state.set(tr.getTransitionRule().getFromState(),false);
  }
}

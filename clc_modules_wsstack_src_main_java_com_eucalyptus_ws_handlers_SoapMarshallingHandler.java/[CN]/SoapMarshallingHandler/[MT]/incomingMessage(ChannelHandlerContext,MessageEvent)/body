{
  if (event.getMessage() instanceof MappingHttpMessage) {
    MappingHttpMessage httpMessage=(MappingHttpMessage)event.getMessage();
    String content=httpMessage.getContent().toString("UTF-8");
    httpMessage.setMessageString(content);
    ByteArrayInputStream byteIn=new ByteArrayInputStream(content.getBytes());
    XMLStreamReader xmlStreamReader=XMLInputFactory.newInstance().createXMLStreamReader(byteIn);
    StAXSOAPModelBuilder soapBuilder=new StAXSOAPModelBuilder(xmlStreamReader,SOAP11Constants.SOAP_ENVELOPE_NAMESPACE_URI);
    SOAPEnvelope env=(SOAPEnvelope)soapBuilder.getDocumentElement();
    httpMessage.setSoapEnvelope(env);
  }
}

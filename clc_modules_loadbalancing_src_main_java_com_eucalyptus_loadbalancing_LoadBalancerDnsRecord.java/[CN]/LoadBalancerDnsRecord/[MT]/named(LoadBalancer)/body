{
  final LoadBalancerDnsRecord instance=new LoadBalancerDnsRecord(lb);
  String dnsPrefix=String.format("%s-%s",lb.getDisplayName(),lb.getOwnerAccountNumber());
  dnsPrefix=dnsPrefix.replace(".","_");
  final int maxPrefixLength=253 - String.format(".%s.%s",LOADBALANCER_DNS_SUBDOMAIN,SystemConfiguration.getSystemConfiguration().getDnsDomain()).length();
  if (maxPrefixLength < 0)   throw Exceptions.toUndeclared("invalid dns name length");
  if (dnsPrefix.length() > maxPrefixLength)   dnsPrefix=dnsPrefix.substring(0,maxPrefixLength);
  instance.dnsName=dnsPrefix;
  instance.dnsZone=LOADBALANCER_DNS_SUBDOMAIN;
  instance.uniqueName=instance.createUniqueName();
  return instance;
}

{
  LOG.debug("Adding new account " + accountName);
  try {
    Accounts.addAccount(accountName);
    Users.addAccountAdmin(accountName);
    for (    String user : getAccountUserSet(accountMembers,groups)) {
      try {
        LOG.debug("Adding new user " + user);
        Users.addUser(user,"/",true,true,users.get(user),true,false,accountName);
      }
 catch (      AuthException e) {
        LOG.error(e,e);
        LOG.warn("Failed add new user " + user,e);
      }
    }
    for (    String group : accountMembers) {
      Group dbGroup=null;
      try {
        LOG.debug("Adding new group " + group);
        dbGroup=Groups.addGroup(group,"/",accountName);
        for (        String user : groups.get(group)) {
          LOG.debug("Adding " + user + " to group "+ group);
          dbGroup.addMember(new DummyPrincipal(user));
        }
      }
 catch (      AuthException e) {
        LOG.error(e,e);
        LOG.warn("Failed to add new group " + group + " in "+ accountName,e);
      }
    }
  }
 catch (  AuthException e) {
    LOG.error(e,e);
    LOG.error("Failed to add new account " + accountName,e);
  }
}

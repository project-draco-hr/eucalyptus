{
  final ReentrantLock putLock=LinkedBlockingQueue.this.putLock;
  final ReentrantLock takeLock=LinkedBlockingQueue.this.takeLock;
  putLock.lock();
  takeLock.lock();
  try {
    if (current == null)     throw new NoSuchElementException();
    E x=currentElement;
    lastRet=current;
    current=current.next;
    if (current != null)     currentElement=current.item;
    return x;
  }
  finally {
    takeLock.unlock();
    putLock.unlock();
  }
}

{
  if (evt.getInstances() == null || evt.getInstances().size() <= 0)   return;
  final List<Instance> instances=Lists.newArrayList(evt.getInstances());
  final EntityTransaction db=Entities.get(LoadBalancerServoInstance.class);
  try {
    for (    final Instance instance : instances) {
      try {
        LoadBalancerServoInstance servo=Entities.uniqueResult(LoadBalancerServoInstance.named(instance.getInstanceId()));
        db.commit();
        if (servo != null)         throw new EventHandlerException("Loadbalancer VM cannot be registered");
      }
 catch (      EventHandlerException ex) {
        throw ex;
      }
catch (      NoSuchElementException ex) {
        ;
      }
catch (      Exception ex) {
        db.rollback();
        break;
      }
    }
  }
  finally {
    if (db.isActive())     db.rollback();
  }
}

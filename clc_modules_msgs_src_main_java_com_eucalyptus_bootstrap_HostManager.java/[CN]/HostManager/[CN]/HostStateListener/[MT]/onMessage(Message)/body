{
  LOG.debug("Received message: " + msg.getSrc() + " saying: "+ msg.getObject());
  EmpyreanHeader epochHeader=(EmpyreanHeader)msg.getHeader(Protocols.lookupRegisteredId(EmpyreanHeader.class));
  Integer senderEpoch=epochHeader.getEpoch();
  int myEpoch=HostManager.epochSeen.get();
  if (myEpoch < senderEpoch) {
    HostManager.epochSeen.compareAndSet(myEpoch,senderEpoch);
  }
switch (this.initializing.get()) {
case PENDING:
    if (msg.getObject() instanceof InitRequest) {
      if (this.initializing.compareAndSet(InitState.PENDING,InitState.WORKING)) {
        LOG.debug("Received initialize message: " + msg.getObject() + " ["+ msg.getSrc()+ "]");
        try {
          this.initialize(msg.getObject() instanceof Initialize);
        }
  finally {
          this.initializing.set(InitState.FINISHED);
        }
      }
 else {
        LOG.debug("Ignoring request arriving while currently working on initializing system state: " + msg.getObject() + " ["+ msg.getSrc()+ "]");
      }
    }
 else     if (!BootstrapArgs.isCloudController()) {
      HostManager.send(null,Lists.newArrayList(Hosts.localHost()));
    }
  break;
case WORKING:
LOG.debug("Ignoring request arriving while currently working on initializing system state: " + msg.getObject() + " ["+ msg.getSrc()+ "]");
break;
case FINISHED:
if (msg.getObject() instanceof List) {
LOG.debug("Received updated host information: " + msg.getObject() + " ["+ msg.getSrc()+ "]");
this.receive((List<Host>)msg.getObject());
}
 else {
LOG.debug("Received unknown message type: " + msg.getObject() + " ["+ msg.getSrc()+ "]");
}
break;
}
}

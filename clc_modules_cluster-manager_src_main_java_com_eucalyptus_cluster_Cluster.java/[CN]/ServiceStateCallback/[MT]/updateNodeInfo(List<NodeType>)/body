{
  NodeInfo ret=null;
  boolean hasServiceTag=false;
  for (  final String serviceTag : this.nodeMap.keySet()) {
    for (    final NodeType node : nodeTags) {
      if (node.getServiceTag().equals(serviceTag)) {
        hasServiceTag=true;
      }
    }
    if (!hasServiceTag) {
      this.nodeMap.remove(serviceTag);
    }
 else {
      hasServiceTag=false;
    }
  }
  for (  final NodeType node : nodeTags) {
    if ((ret=this.nodeMap.putIfAbsent(node.getServiceTag(),new NodeInfo(node))) != null) {
      ret.touch();
      ret.setServiceTag(node.getServiceTag());
      ret.setIqn(node.getIqn());
    }
  }
}

{
  List<Throwable> currentErrors=Lists.newArrayList();
  this.errors.drainTo(currentErrors);
  if (!currentErrors.isEmpty()) {
    CheckException ex=ServiceChecks.Severity.ERROR.transform(this.configuration,currentErrors);
    throw ex;
  }
 else   if (State.NOTREADY.equals(this.stateMachine.getState())) {
    CheckException ex=ServiceChecks.Severity.ERROR.transform(configuration,new RuntimeException("Current state is NOTREADY"));
    throw ex;
  }
}

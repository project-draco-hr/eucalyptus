{
  OwnerFullName systemAcct=AccountFullName.getInstance(Principals.systemAccount());
  LOG.info("runInstances with zone=" + availabilityZone + ", account="+ systemAcct);
  final LaunchConfiguration launchConfiguration=LaunchConfiguration.create(systemAcct,"launch_config_loadbalacing",this.imageId,this.instanceType);
  if (groupName != null) {
    List<String> groups=Lists.newArrayList();
    groups.add(groupName);
    launchConfiguration.setSecurityGroups(groups);
  }
  final RunInstancesType runInstances=TypeMappers.transform(launchConfiguration,RunInstancesType.class);
  if (availabilityZone != null)   runInstances.setAvailabilityZone(availabilityZone);
  runInstances.setMaxCount(attemptToLaunch);
  if (this.userData != null)   runInstances.setUserData(this.userData);
  return runInstances;
}

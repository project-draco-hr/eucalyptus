{
  StringBuilder sb=new StringBuilder();
  Joiner joiner=Joiner.on(QueryConstants.COMMA).skipNulls();
  if (withType) {
    sb.append(this.type.name()).append(QueryConstants.TYPE_SEPARATOR);
  }
  boolean first=true;
  for (  String key : this.termMap.keySet()) {
    if (first) {
      first=false;
    }
 else {
      sb.append(QueryConstants.SPACE);
    }
    sb.append(key).append(QueryConstants.EQUAL).append(joiner.join(this.termMap.get(key)));
  }
  return sb.toString();
}

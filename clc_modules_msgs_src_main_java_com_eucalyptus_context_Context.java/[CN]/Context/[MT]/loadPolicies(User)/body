{
  final List<PolicyVersion> policies=Lists.newArrayList();
  if (user.isAccountAdmin()) {
    policies.add(PolicyVersions.getAdministratorPolicy());
  }
 else {
    Iterables.addAll(policies,Iterables.transform(user.getPolicies(),PolicyVersions.policyVersion(PolicyScope.User,Accounts.getUserArn(user))));
    for (    final Group group : user.getGroups()) {
      if (!group.isUserGroup())       Iterables.addAll(policies,Iterables.transform(group.getPolicies(),PolicyVersions.policyVersion(PolicyScope.Group,Accounts.getGroupArn(group))));
    }
  }
  Iterables.addAll(policies,Iterables.transform(user.getAccount().lookupAdmin().getPolicies(),PolicyVersions.policyVersion(PolicyScope.Account,user.getAccountNumber())));
  return policies;
}

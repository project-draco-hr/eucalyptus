{
  if (!MSG_TYPE.isAssignableFrom(type) || type.getSimpleName() == null) {
    LOG.info("IGNORING NON-REQUEST TYPE: " + type);
    return null;
  }
 else   if (type.getName().endsWith("ResponseType")) {
    final String typeKey=type.getSimpleName().replaceAll("ResponseType\\Z","");
    if (!requestMap.containsKey(typeKey)) {
      RequestInfo newRequest=new RequestInfo(){
{
          setName(typeKey);
          setResponse(type);
        }
      }
;
      requestMap.put(typeKey,newRequest);
      return newRequest;
    }
 else {
      RequestInfo existing=requestMap.get(typeKey);
      existing.setResponse(type);
      return existing;
    }
  }
 else   if (type.getName().endsWith("Type")) {
    final String typeKey=type.getSimpleName().replaceAll("Type\\Z","");
    if (!requestMap.containsKey(typeKey)) {
      RequestInfo newRequest=new RequestInfo(){
{
          setName(typeKey);
          setRequest(type);
        }
      }
;
      requestMap.put(typeKey,newRequest);
      return newRequest;
    }
 else {
      RequestInfo existing=requestMap.get(typeKey);
      existing.setRequest(type);
      return existing;
    }
  }
 else {
    LOG.info("IGNORING NON-REQUEST TYPE: " + type);
    return null;
  }
}

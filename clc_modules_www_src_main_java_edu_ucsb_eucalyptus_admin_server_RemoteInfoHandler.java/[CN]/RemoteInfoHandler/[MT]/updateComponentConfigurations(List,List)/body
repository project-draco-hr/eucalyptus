{
  try {
    ArrayList<ComponentConfiguration> addComponents=new ArrayList<ComponentConfiguration>();
    List<ComponentConfiguration> removeComponents=new ArrayList<ComponentConfiguration>();
    for (    Object o : newComponentConfigs) {
      ComponentConfiguration config=(ComponentConfiguration)o;
      if (!componentConfigs.contains(config))       addComponents.add(config);
    }
    for (    Object o : componentConfigs) {
      ComponentConfiguration config=(ComponentConfiguration)o;
      if (!newComponentConfigs.contains(config))       removeComponents.add(config);
    }
    LOG.info("Planning to updating configs with: ");
    LOG.info("-> add: " + addComponents);
    LOG.info("-> remove: " + removeComponents);
    for (    ComponentConfiguration config : removeComponents) {
      DeregisterComponentType regComponent=null;
      if (config instanceof StorageControllerConfiguration) {
        regComponent=new DeregisterStorageControllerType();
      }
 else       if (config instanceof WalrusConfiguration) {
        regComponent=new DeregisterWalrusType();
      }
 else       if (config instanceof ClusterConfiguration) {
        regComponent=new DeregisterClusterType();
      }
 else {
        regComponent=new DeregisterComponentType();
      }
      regComponent.setName(config.getName());
      new Configuration().deregisterComponent(regComponent);
    }
    for (    ComponentConfiguration config : addComponents) {
      RegisterComponentType regComponent=null;
      if (config instanceof StorageControllerConfiguration) {
        regComponent=new RegisterStorageControllerType();
      }
 else       if (config instanceof WalrusConfiguration) {
        regComponent=new RegisterWalrusType();
      }
 else       if (config instanceof ClusterConfiguration) {
        regComponent=new RegisterClusterType();
      }
 else {
        regComponent=new RegisterComponentType();
      }
      regComponent.setName(config.getName());
      regComponent.setHost(config.getHostName());
      regComponent.setPort(config.getPort());
      new Configuration().registerComponent(regComponent);
    }
  }
 catch (  Exception e) {
    LOG.error(e);
    throw new EucalyptusCloudException("Changing component configurations failed: " + e.getMessage(),e);
  }
}

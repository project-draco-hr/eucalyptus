{
  try {
    ArrayList<ComponentConfiguration> addComponents=new ArrayList<ComponentConfiguration>();
    List<ComponentConfiguration> removeComponents=new ArrayList<ComponentConfiguration>();
    for (    Object o : newComponentConfigs) {
      ComponentConfiguration config=(ComponentConfiguration)o;
      if (!componentConfigs.contains(config))       addComponents.add(config);
    }
    for (    Object o : componentConfigs) {
      ComponentConfiguration config=(ComponentConfiguration)o;
      if (!newComponentConfigs.contains(config))       removeComponents.add(config);
    }
    LOG.info("Planning to updating configs with: ");
    LOG.info("-> add: " + addComponents);
    LOG.info("-> remove: " + removeComponents);
    for (    ComponentConfiguration config : removeComponents) {
      ComponentRegistrationHandler.deregister(config.getComponentId(),config.getHostName());
    }
    for (    ComponentConfiguration config : addComponents) {
      ComponentRegistrationHandler.register(config.getComponentId(),config.getPartition(),config.getName(),config.getHostName(),config.getPort());
    }
  }
 catch (  Exception e) {
    LOG.error(e,e);
    throw new EucalyptusCloudException("Changing component configurations failed: " + e.getMessage(),e);
  }
}

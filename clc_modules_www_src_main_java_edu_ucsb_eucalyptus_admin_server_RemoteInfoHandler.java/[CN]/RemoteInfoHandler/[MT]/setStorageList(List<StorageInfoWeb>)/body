{
  List<StorageControllerConfiguration> storageControllerConfig=Lists.newArrayList();
  for (  StorageInfoWeb storageControllerWeb : newStorageList) {
    storageControllerConfig.add(new StorageControllerConfiguration(storageControllerWeb.getName(),storageControllerWeb.getHost(),storageControllerWeb.getPort()));
  }
  updateStorageControllerConfigurations(storageControllerConfig);
  for (  StorageInfoWeb storageControllerWeb : newStorageList) {
    UpdateStorageConfigurationType updateStorageConfiguration=new UpdateStorageConfigurationType();
    updateStorageConfiguration.setName(storageControllerWeb.getName());
    updateStorageConfiguration.setStorageParams(convertProps(storageControllerWeb.getStorageParams()));
    Dispatcher scDispatch=ServiceDispatcher.lookup(Component.storage,storageControllerWeb.getHost());
    if (Component.eucalyptus.isLocal()) {
      updateStorageConfiguration.setName(StorageProperties.SC_LOCAL_NAME);
    }
    try {
      scDispatch.send(updateStorageConfiguration);
    }
 catch (    Exception e) {
      LOG.error("Error sending update configuration message to storage controller: " + updateStorageConfiguration);
      LOG.error("The storage controller's configuration may be out of sync!");
      LOG.debug(e,e);
    }
  }
}

{
  List<StorageControllerConfiguration> storageControllerConfig=Lists.newArrayList();
  for (  StorageInfoWeb storageControllerWeb : newStorageList) {
    storageControllerConfig.add(new StorageControllerConfiguration(storageControllerWeb.getName(),storageControllerWeb.getHost(),storageControllerWeb.getPort()));
  }
  Configuration.updateStorageControllerConfigurations(storageControllerConfig);
  for (  StorageInfoWeb storageControllerWeb : newStorageList) {
    UpdateStorageConfigurationType updateStorageConfiguration=new UpdateStorageConfigurationType();
    updateStorageConfiguration.setName(storageControllerWeb.getName());
    updateStorageConfiguration.setMaxTotalVolumeSize(storageControllerWeb.getTotalVolumesSizeInGB());
    updateStorageConfiguration.setMaxVolumeSize(storageControllerWeb.getMaxVolumeSizeInGB());
    updateStorageConfiguration.setStorageInterface(storageControllerWeb.getStorageInterface());
    updateStorageConfiguration.setStorageRootDirectory(storageControllerWeb.getVolumesPath());
    updateStorageConfiguration.setZeroFillVolumes(storageControllerWeb.getZeroFillVolumes());
    ServiceDispatcher scDispatch=ServiceDispatcher.lookup(Component.storage,storageControllerWeb.getHost());
    if (Component.eucalyptus.isLocal()) {
      updateStorageConfiguration.setName(StorageProperties.SC_LOCAL_NAME);
    }
    scDispatch.send(updateStorageConfiguration);
  }
}

{
  if (compId.isPartitioned() && partition == null) {
    throw new IllegalArgumentException("Cannot lookup a partitioned component when no partition is specified: " + compId);
  }
 else   if (compId.isPartitioned()) {
    Partition p=Partitions.lookup(partition);
    return new ServiceKey(compId,p);
  }
 else {
    return new ServiceKey(compId);
  }
}

{
  final String localhostAddr=localAddr.getHostAddress();
  List<ServiceInfoType> serviceInfos=new ArrayList<ServiceInfoType>(){
{
      addAll(Components.lookup(Eucalyptus.class).getServiceSnapshot(localhostAddr));
      addAll(Components.lookup(Walrus.class).getServiceSnapshot(localhostAddr));
      for (      ServiceInfoType s : Components.lookup(Storage.class).getServiceSnapshot(localhostAddr)) {
        if (partition.getName().equals(s.getPartition())) {
          add(s);
        }
      }
      for (      ServiceInfoType s : Components.lookup(ClusterController.class).getServiceSnapshot(localhostAddr)) {
        if (partition.getName().equals(s.getPartition())) {
          add(s);
        }
      }
    }
  }
;
  return serviceInfos;
}

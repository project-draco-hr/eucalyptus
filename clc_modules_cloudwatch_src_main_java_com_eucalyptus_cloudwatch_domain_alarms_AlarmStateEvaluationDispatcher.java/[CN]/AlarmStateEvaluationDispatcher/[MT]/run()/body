{
  if (!CloudWatchService.DISABLE_CLOUDWATCH_SERVICE && Bootstrap.isOperational() && Topology.isEnabledLocally(CloudWatch.class)) {
    LOG.debug("Kicking off AlarmStateEvaluationDispatcher");
    EntityTransaction db=Entities.get(AlarmEntity.class);
    try {
      Criteria criteria=Entities.createCriteria(AlarmEntity.class);
      List<AlarmEntity> results=(List<AlarmEntity>)criteria.list();
      for (      AlarmEntity alarmEntity : results) {
        LOG.debug("Submitting job for " + alarmEntity.getAlarmName());
        executorService.submit(new AlarmStateEvaluationWorker(alarmEntity.getAccountId(),alarmEntity.getAlarmName()));
      }
      db.commit();
    }
 catch (    RuntimeException ex) {
      Logs.extreme().error(ex,ex);
      throw ex;
    }
 finally {
      if (db.isActive())       db.rollback();
    }
  }
}

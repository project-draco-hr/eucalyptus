{
  return Iterators.all(upgrades.iterator(),new Predicate<UpgradeTask>(){
    @Override public boolean apply(    UpgradeTask task){
      try {
        LOG.info("Executing objectstorage upgrade task: " + task.getClass().getSimpleName());
        task.apply();
        return true;
      }
 catch (      Exception e) {
        LOG.error("Upgrade task failed: " + task.getClass().getSimpleName());
        throw Exceptions.toUndeclared("Upgrade task failed: " + task.getClass().getSimpleName(),e);
      }
    }
  }
);
}

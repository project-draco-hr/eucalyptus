{
  try (TransactionResource tran=Entities.transactionFor(SnapshotInfo.class)){
    SnapshotInfo snapshotInfo=new SnapshotInfo();
    snapshotInfo.setStatus(StorageProperties.Status.creating.toString());
    List<SnapshotInfo> snapshotInfos=Entities.query(snapshotInfo,false);
    for (    SnapshotInfo snapInfo : snapshotInfos) {
      snapInfo.setStatus(StorageProperties.Status.failed.toString());
    }
    tran.commit();
  }
 catch (  Throwable f) {
    LOG.warn("Failed cleaning stuck snapshots",f);
  }
}

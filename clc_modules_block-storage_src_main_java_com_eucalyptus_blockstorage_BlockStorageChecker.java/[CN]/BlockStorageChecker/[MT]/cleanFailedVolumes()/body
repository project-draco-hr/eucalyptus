{
  TransactionResource tran=Entities.transactionFor(VolumeInfo.class);
  VolumeInfo volumeInfo=new VolumeInfo();
  volumeInfo.setStatus(StorageProperties.Status.failed.toString());
  List<VolumeInfo> volumeInfos=Entities.query(volumeInfo);
  for (  VolumeInfo volInfo : volumeInfos) {
    String volumeId=volInfo.getVolumeId();
    LOG.info("Cleaning failed volume " + volumeId);
    blockManager.cleanVolume(volumeId);
  }
  tran.commit();
}

{
  VmInstance vm=VmInstances.getInstance().lookup(this.getRequest().getInstanceId());
  String output=null;
  try {
    output=new String(Base64.decode(reply.getOutput().getBytes()));
    if (!"EMPTY".equals(output))     vm.setConsoleOutput(new StringBuffer().append(output));
  }
 catch (  ArrayIndexOutOfBoundsException e1) {
  }
  reply.setCorrelationId(this.getRequest().getCorrelationId());
  reply.setInstanceId(this.getRequest().getInstanceId());
  reply.setTimestamp(new Date());
  reply.setOutput(vm.getConsoleOutputString());
  try {
    ServiceContext.dispatch("ReplyQueue",reply);
  }
 catch (  ServiceInitializationException ex) {
    LOG.error(ex,ex);
  }
catch (  ServiceDispatchException ex) {
    LOG.error(ex,ex);
  }
catch (  ServiceStateException ex) {
    LOG.error(ex,ex);
  }
}

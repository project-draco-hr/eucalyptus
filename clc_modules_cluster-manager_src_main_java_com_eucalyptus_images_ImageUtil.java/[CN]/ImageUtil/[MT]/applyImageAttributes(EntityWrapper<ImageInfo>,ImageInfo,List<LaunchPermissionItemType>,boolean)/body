{
  for (  LaunchPermissionItemType perm : changeList) {
    if (perm.isGroup()) {
      try {
        if (adding) {
          imgInfo.grantPermission(new ImageUserGroup(perm.getGroup()));
        }
 else {
          imgInfo.revokePermission(new ImageUserGroup(perm.getGroup()));
        }
      }
 catch (      Exception e) {
        LOG.debug(e,e);
        throw new EucalyptusCloudException("Modify image attribute failed because of: " + e.getMessage());
      }
    }
 else     if (perm.isUser()) {
      try {
        if (adding) {
          imgInfo.grantPermission(Users.lookupUserById(perm.getUserId()));
        }
 else {
          imgInfo.revokePermission(Users.lookupUserById(perm.getUserId()));
        }
      }
 catch (      AuthException e) {
        LOG.debug(e,e);
        throw new EucalyptusCloudException("Modify image attribute failed because of: " + e.getMessage());
      }
    }
  }
}

{
  if (imgInfo != null)   try {
    Document inputSource=null;
    try {
      String[] imagePathParts=imgInfo.getManifestLocation().split("/");
      inputSource=WalrusUtil.getManifestData(imgInfo.getOwner(),imagePathParts[0],imagePathParts[1]);
    }
 catch (    EucalyptusCloudException e) {
      throw e;
    }
    XPath xpath=null;
    xpath=XPathFactory.newInstance().newXPath();
    String signature=null;
    try {
      signature=(String)xpath.evaluate("/manifest/signature/text()",inputSource,XPathConstants.STRING);
    }
 catch (    XPathExpressionException e) {
    }
    if (imgInfo.getSignature() != null && !imgInfo.getSignature().equals(signature))     throw new EucalyptusCloudException("Manifest signature has changed since registration.");
    LOG.info("Triggering caching: " + imgInfo.getManifestLocation());
    try {
      if (imgInfo instanceof ImageMetadata.StaticDiskImage) {
        WalrusUtil.triggerCaching((StaticDiskImage)imgInfo);
      }
    }
 catch (    Exception e) {
    }
  }
 catch (  EucalyptusCloudException e) {
    LOG.error(e);
    LOG.error("Failed bukkit check! Invalidating registration: " + imgInfo.getManifestLocation());
    throw new EucalyptusCloudException("Failed check! Invalidating registration: " + imgInfo.getManifestLocation());
  }
}

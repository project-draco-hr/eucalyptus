{
  EntityWrapper<StorageInfo> db=StorageController.getEntityWrapper();
  StorageInfo storageInfo;
  try {
    storageInfo=db.getUnique(new StorageInfo(StorageProperties.NAME));
    db.commit();
  }
 catch (  EucalyptusCloudException ex) {
    storageInfo=new StorageInfo(StorageProperties.NAME,StorageProperties.MAX_TOTAL_VOLUME_SIZE,null,StorageProperties.MAX_VOLUME_SIZE,null,null,SANManager.SAN_HOST,SANManager.SAN_USERNAME,SANManager.SAN_PASSWORD,null);
    db.add(storageInfo);
    db.commit();
  }
  StorageProperties.MAX_TOTAL_VOLUME_SIZE=storageInfo.getMaxTotalVolumeSizeInGb();
  StorageProperties.MAX_VOLUME_SIZE=storageInfo.getMaxVolumeSizeInGB();
  SANManager.SAN_HOST=storageInfo.getSanHost();
  SANManager.SAN_USERNAME=storageInfo.getSanUser();
  try {
    if (!StorageProperties.DUMMY_SAN_PASSWORD.equals(storageInfo.getSanPassword())) {
      SANManager.SAN_PASSWORD=BlockStorageUtil.decryptSCTargetPassword(storageInfo.getSanPassword());
    }
 else {
      LOG.info("SAN credentials not configured yet.");
    }
  }
 catch (  EucalyptusCloudException e) {
    LOG.fatal("Unable to get password. " + e.getMessage());
  }
  connectionManager.configure();
}

{
  final User user=Accounts.lookupUserById(userId);
  final EucaS3Client s3c=EucaS3ClientFactory.getEucaS3Client(user);
  final URI uri=new URI(manifestUrl);
  String path=uri.getPath();
  if (path.startsWith("/"))   path=path.substring(1);
  final String[] tokens=path.split("/");
  String keyObj=tokens[tokens.length - 1];
  final String keyDir=tokens[tokens.length - 2];
  keyObj=keyObj.substring(0,keyObj.lastIndexOf("manifest.xml")) + "manifest.xml";
  final String key=String.format("%s/%s",keyDir,keyObj);
  String bucket=null;
  if (tokens.length > 2) {
    bucket=tokens[0];
  }
 else {
    bucket=uri.getHost();
    bucket=bucket.substring(0,bucket.indexOf("."));
  }
  try {
    final S3Object obj=s3c.getObject(bucket,key);
    return obj != null;
  }
 catch (  final Exception ex) {
    return false;
  }
}

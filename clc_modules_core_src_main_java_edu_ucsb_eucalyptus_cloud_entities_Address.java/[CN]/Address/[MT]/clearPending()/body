{
  boolean result=this.pending.compareAndSet(true,false);
  if (result && State.allocated.equals(this.state.get())) {
    if (system && !edu.ucsb.eucalyptus.util.EucalyptusProperties.getSystemConfiguration().isDoDynamicPublicAddresses()) {
      this.release();
    }
 else {
      this.doUnassign();
    }
  }
  return result;
}

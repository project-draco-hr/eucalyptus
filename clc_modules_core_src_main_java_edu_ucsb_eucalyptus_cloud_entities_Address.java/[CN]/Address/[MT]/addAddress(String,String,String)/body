{
  Address addr=new Address(name,cluster);
  EntityWrapper<Address> db=new EntityWrapper<Address>();
  try {
    addr=db.getUnique(new Address(name));
    addr.setUserId(userId);
    db.commit();
  }
 catch (  Throwable e) {
    try {
      addr.setUserId(userId);
      db.add(addr);
      db.commit();
    }
 catch (    Throwable e1) {
      db.rollback();
    }
  }
}

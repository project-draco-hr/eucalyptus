{
  verifySession(session);
  if (config == null) {
    throw new EucalyptusServiceException("Empty config to save");
  }
  String type=config.getField(ConfigurationWebBackend.TYPE_FIELD_INDEX);
  if (type == null) {
    throw new EucalyptusServiceException("Empty configuration type");
  }
  if (ConfigurationWebBackend.CLOUD_TYPE.equals(type)) {
    ConfigurationWebBackend.setCloudConfiguration(config);
  }
 else   if (ConfigurationWebBackend.CLUSTER_TYPE.equals(type)) {
    ConfigurationWebBackend.setClusterConfiguration(config);
  }
 else   if (ConfigurationWebBackend.STORAGE_TYPE.equals(type)) {
    ConfigurationWebBackend.setStorageConfiguration(config);
  }
 else   if (ConfigurationWebBackend.WALRUS_TYPE.equals(type)) {
    ConfigurationWebBackend.setWalrusConfiguration(config);
  }
 else {
    throw new EucalyptusServiceException("Wrong configuration type: " + type);
  }
}

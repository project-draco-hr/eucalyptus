{
  try {
    List<VmInstance> vmIntList=VmInstances.list();
    List<String> uuidList=new ArrayList<String>();
    for (    VmInstance vmInt : vmIntList) {
      if (vmInt.getState().equals(VmState.RUNNING)) {
        uuidList.add(vmInt.getInstanceUuid());
      }
    }
    String resourceName, resourceUuid, metricName, dimensionName="";
    int sequenceNum=-1;
    long valueDatestamp=-1;
    Double value=null;
    for (    SensorsResourceType sensorData : msg.getSensorsResources()) {
      resourceName=sensorData.getResourceName();
      resourceUuid=sensorData.getResourceUuid();
      if (uuidList.contains(resourceUuid)) {
        for (        MetricsResourceType metricType : sensorData.getMetrics()) {
          metricName=metricType.getMetricName();
          for (          MetricCounterType counterType : metricType.getCounters()) {
            sequenceNum=Integer.parseInt(counterType.getSequenceNum().toString());
            for (            MetricDimensionsType dimensionType : counterType.getDimensions()) {
              dimensionName=dimensionType.getDimensionName();
              for (              MetricDimensionsValuesType valueType : dimensionType.getValues()) {
                value=valueType.getValue();
                valueDatestamp=valueType.getTimestamp().getTime();
                fireUsageEvent(new com.eucalyptus.reporting.event.InstanceUsageEvent(resourceUuid,System.currentTimeMillis(),resourceName,metricName,sequenceNum,dimensionName,value,valueDatestamp));
              }
            }
          }
        }
      }
    }
  }
 catch (  Exception ex) {
    LOG.debug("Unable to fire describe sensors call back",ex);
  }
}

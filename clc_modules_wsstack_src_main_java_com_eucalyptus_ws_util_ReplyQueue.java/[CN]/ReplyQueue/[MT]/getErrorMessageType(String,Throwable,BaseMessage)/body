{
  EucalyptusErrorMessageType errMsg=null;
  if (exception != null) {
    Throwable e=exception;
    if (e != null) {
      errMsg=new EucalyptusErrorMessageType(componentName,msg,e.getMessage());
    }
  }
  if (errMsg == null) {
    ByteArrayOutputStream exStream=new ByteArrayOutputStream();
    if (exception != null)     exception.printStackTrace(new PrintStream(exStream));
    errMsg=new EucalyptusErrorMessageType(componentName,msg,"Internal Error: " + exStream.toString());
  }
  return errMsg;
}

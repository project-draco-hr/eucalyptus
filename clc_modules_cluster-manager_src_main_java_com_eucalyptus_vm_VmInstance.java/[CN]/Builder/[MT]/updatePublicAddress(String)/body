{
  if (!VmNetworkConfig.DEFAULT_IP.equals(publicAddr) && !"".equals(publicAddr) && (publicAddr != null)) {
    this.getNetworkConfig().setPublicAddress(publicAddr);
  }
 else   if (VmState.STOPPED.equals(this.getState())) {
    this.getNetworkConfig().setPublicAddress(publicAddr);
  }
 else {
    this.getNetworkConfig().setPublicAddress(VmNetworkConfig.DEFAULT_IP);
  }
  this.getNetworkConfig().updateDns();
}

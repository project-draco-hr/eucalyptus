{
  if (VmState.RUNNING.apply(instance)) {
    final VmRuntimeState vmRuntimeState=instance.getRuntimeState();
    final InstanceStatus instanceStatus=Objects.firstNonNull(vmRuntimeState.getInstanceStatus(),InstanceStatus.Ok);
    final ReachabilityStatus reachabilityStatus=Objects.firstNonNull(vmRuntimeState.getReachabilityStatus(),ReachabilityStatus.Passed);
    final Date unreachabilityTimestamp=reachabilityStatus != ReachabilityStatus.Passed ? vmRuntimeState.getUnreachableTimestamp() : null;
    return buildStatus(Optional.of(Pair.pair(instanceStatus,Pair.ropair(reachabilityStatus,unreachabilityTimestamp))));
  }
 else {
    return buildStatus(Optional.<Pair<InstanceStatus,Pair<ReachabilityStatus,Optional<Date>>>>absent());
  }
}

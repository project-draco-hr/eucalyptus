{
  ClusterCredentials credentials=null;
  EntityWrapper<ClusterCredentials> credDb=Credentials.getEntityWrapper();
  try {
    credentials=credDb.getUnique(new ClusterCredentials(c.getName()));
  }
 catch (  EucalyptusCloudException e) {
    LOG.error("Failed to load credentials for cluster: " + c.getName());
    throw e;
  }
 finally {
    credDb.rollback();
  }
  ClusterThreadGroup threadGroup=new ClusterThreadGroup(c,credentials);
  Cluster newCluster=new Cluster(threadGroup,c,credentials);
  Clusters.getInstance().register(newCluster);
  return newCluster;
}

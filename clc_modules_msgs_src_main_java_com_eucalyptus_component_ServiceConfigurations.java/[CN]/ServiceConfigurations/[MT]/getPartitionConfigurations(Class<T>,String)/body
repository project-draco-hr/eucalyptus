{
  if (!ComponentConfiguration.class.isAssignableFrom(type)) {
    throw new PersistenceException("Unknown configuration type passed: " + type.getCanonicalName());
  }
  EntityWrapper<T> db=EntityWrapper.get(type);
  List<T> componentList;
  try {
    T conf=type.newInstance();
    conf.setPartition(partition);
    componentList=db.query(conf);
    if (componentList.isEmpty()) {
      throw new NoSuchElementException("Failed to lookup registration for " + type.getSimpleName() + " in partition: "+ partition);
    }
    db.commit();
    return componentList;
  }
 catch (  NoSuchElementException ex) {
    db.rollback();
    throw ex;
  }
catch (  PersistenceException ex) {
    LOG.error(ex,ex);
    db.rollback();
    throw ex;
  }
catch (  Throwable ex) {
    LOG.error(ex,ex);
    db.rollback();
    throw new PersistenceException(ex);
  }
}

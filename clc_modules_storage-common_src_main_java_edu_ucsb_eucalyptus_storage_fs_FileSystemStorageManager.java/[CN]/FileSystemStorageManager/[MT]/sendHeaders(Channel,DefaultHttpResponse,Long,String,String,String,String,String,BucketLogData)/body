{
  httpResponse.addHeader(HttpHeaders.Names.CONTENT_LENGTH,String.valueOf(size));
  httpResponse.addHeader(HttpHeaders.Names.CONTENT_TYPE,contentType != null ? contentType : "binary/octet-stream");
  if (etag != null)   httpResponse.addHeader(HttpHeaders.Names.ETAG,etag);
  httpResponse.addHeader(HttpHeaders.Names.LAST_MODIFIED,lastModified);
  if (contentDisposition != null)   httpResponse.addHeader("Content-Disposition",contentDisposition);
  if (versionId != null) {
    httpResponse.addHeader(WalrusProperties.X_AMZ_VERSION_ID,versionId);
  }
  if (logData != null) {
    logData.setTurnAroundTime(System.currentTimeMillis() - logData.getTurnAroundTime());
    channel.write(httpResponse).addListener(new ChannelFutureListener(){
      @Override public void operationComplete(      ChannelFuture future) throws Exception {
        logData.setTotalTime(System.currentTimeMillis() - logData.getTotalTime());
        WalrusBucketLogger.getInstance().addLogEntry(logData);
      }
    }
);
  }
 else {
    channel.write(httpResponse);
  }
}

{
  try {
    Service service=this.serviceRegistry.deregister(config);
    if (State.STOPPED.ordinal() < this.getLocalService().getState().ordinal()) {
      this.stopService(config);
    }
    try {
      EventRecord.caller(Component.class,EventType.COMPONENT_SERVICE_DESTROY,this.getName(),service.getName(),service.getServiceConfiguration().getUri().toString()).info();
      return this.getLocalService().transitionByName(Transition.DESTROYING);
    }
 catch (    Throwable ex) {
      throw new ServiceRegistrationException("Failed to destroy service: " + config + " because of: "+ ex.getMessage(),ex);
    }
  }
 catch (  NoSuchElementException ex) {
    throw new ServiceRegistrationException("Failed to find service corresponding to: " + config,ex);
  }
}

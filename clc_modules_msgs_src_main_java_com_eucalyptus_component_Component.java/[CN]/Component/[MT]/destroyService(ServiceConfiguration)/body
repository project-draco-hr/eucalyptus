{
  final boolean configLocal=NetworkUtil.testLocal(config.getHostName());
  Service remove=this.lookupServiceByHost(config.getHostName());
  if (remove == null) {
    throw new ServiceRegistrationException("Failed to find service corresponding to: " + config);
  }
 else {
    Service service=this.services.remove(remove.getName());
    if (config.isLocal()) {
      this.localService.set(null);
      try {
        this.stateMachine.transition(Transition.DESTROYING);
      }
 catch (      IllegalStateException ex) {
        LOG.error(ex,ex);
      }
catch (      NoSuchElementException ex) {
        LOG.error(ex,ex);
      }
catch (      ExistingTransitionException ex) {
        LOG.error(ex,ex);
      }
    }
    EventRecord.caller(Component.class,EventType.COMPONENT_SERVICE_DESTROY,this.getName(),service.getName(),service.getUri().toString()).info();
  }
}

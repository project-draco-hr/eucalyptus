{
  Service service=null;
  if (this.serviceRegistry.hasService(configuration)) {
    service=this.serviceRegistry.lookup(configuration);
  }
 else {
    service=this.serviceRegistry.register(configuration);
  }
  service.setGoal(this.serviceRegistry.getServices().size() == 1 ? State.ENABLED : State.DISABLED);
  if (Component.State.PRIMORDIAL.equals(service.getStateMachine().getState())) {
    try {
      service.getStateMachine().transition(State.INITIALIZED);
    }
 catch (    NoSuchElementException ex) {
      LOG.error(ex,ex);
    }
catch (    ExistingTransitionException ex) {
      LOG.error(ex,ex);
    }
  }
  return ServiceTransitions.enableTransitionChain(configuration);
}

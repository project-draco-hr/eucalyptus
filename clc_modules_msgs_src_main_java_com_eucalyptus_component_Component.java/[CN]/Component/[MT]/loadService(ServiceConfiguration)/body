{
  this.lookupRegisteredService(config);
  if (State.PRIMORDIAL.equals(config.lookupState()) || State.INITIALIZED.equals(config.lookupState())) {
    try {
      CheckedListenableFuture<ServiceConfiguration> ret=Automata.sequenceTransitions(config,Component.State.PRIMORDIAL,Component.State.INITIALIZED,Component.State.LOADED).call();
      ret.get();
      return ret;
    }
 catch (    Exception ex) {
      throw Exceptions.debug(new ServiceRegistrationException("Failed to initialize service state: " + config + " because of: "+ ex.getMessage(),ex));
    }
  }
  if (State.LOADED.equals(config.lookupState())) {
    return Futures.predestinedFuture(config);
  }
 else {
    return Futures.predestinedFuture(config);
  }
}

{
  EventRecord.caller(Component.class,EventType.COMPONENT_SERVICE_DISABLED,this.getName(),config.getName(),config.getUri().toString()).info();
  if (config.isLocal()) {
    try {
      CheckedListenableFuture<Component> ret=this.stateMachine.transition(State.DISABLED);
      ServiceContextManager.restart();
      return ret;
    }
 catch (    Throwable ex) {
      throw new ServiceRegistrationException("Failed to disable service: " + config + " because of: "+ ex.getMessage(),ex);
    }
  }
 else {
    this.getBuilder().fireDisable(config);
    return Futures.predestinedFuture(this);
  }
}

{
  if (!Bootstrap.isCloudController() && this.getComponentId().isCloudLocal()) {
    ServiceConfiguration config=this.getBuilder().newInstance(this.getComponentId().getPartition(),addr.getHostAddress(),addr.getHostAddress(),this.getComponentId().getPort());
    this.serviceRegistry.register(config);
    return config;
  }
 else   if (Bootstrap.isCloudController() && !Internets.testLocal(addr)) {
    ServiceConfiguration config=this.getBuilder().newInstance(this.getComponentId().getPartition(),addr.getHostAddress(),addr.getHostAddress(),this.getComponentId().getPort());
    this.serviceRegistry.register(config);
    return config;
  }
 else {
    throw new ServiceRegistrationException("Skipping invalid attempt to init remote service configuration for host " + addr + " on component "+ this.getName());
  }
}

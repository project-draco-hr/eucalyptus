{
  Service service=null;
  if ((config.isLocal() || Internets.testLocal(config.getHostName())) && !this.serviceRegistry.hasLocalService()) {
    service=this.serviceRegistry.register(config);
  }
 else   if (this.serviceRegistry.hasService(config)) {
    service=this.serviceRegistry.lookup(config);
  }
 else {
    service=this.serviceRegistry.register(config);
  }
  return service;
}

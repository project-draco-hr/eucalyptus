{
  final ImageInfo image=Images.lookupImage(imageId);
  final String imageOwnerId=image.getOwnerUserId();
  DeleteTagsTask task=new DeleteTagsTask(imageOwnerId,Lists.newArrayList(image.getDisplayName()),Lists.newArrayList(TAG_KEY_STATE,TAG_KEY_MESSAGE));
  CheckedListenableFuture<Boolean> result=task.dispatch();
  if (result.get()) {
    ;
  }
  final List<VmInstance> instances=this.lookupInstances(imageId);
  for (  final VmInstance instance : instances) {
    final String instanceId=instance.getInstanceId();
    final String instanceOwnerId=instance.getOwnerUserId();
    try {
      task=new DeleteTagsTask(instanceOwnerId,Lists.newArrayList(instanceId),Lists.newArrayList(TAG_KEY_STATE,TAG_KEY_MESSAGE));
      result=task.dispatch();
      if (result.get()) {
        ;
      }
    }
 catch (    final Exception ex) {
      ;
    }
  }
}

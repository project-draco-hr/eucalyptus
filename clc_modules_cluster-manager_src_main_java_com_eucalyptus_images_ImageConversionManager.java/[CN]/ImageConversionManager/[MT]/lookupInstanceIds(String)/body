{
  try {
    final List<VmInstance> instances=VmInstances.list(new Predicate<VmInstance>(){
      @Override public boolean apply(      VmInstance arg0){
        return imageId.equals(arg0.getBootRecord().getMachineImageId());
      }
    }
);
    return Lists.transform(instances,new Function<VmInstance,String>(){
      @Override public String apply(      VmInstance arg0){
        return arg0.getInstanceId();
      }
    }
);
  }
 catch (  final Exception ex) {
    return Lists.newArrayList();
  }
}

{
  String external=cloudInfo.getExternalHostPort();
  String internal=cloudInfo.getInternalHostPort();
  String ip=external;
  if (Strings.isNullOrEmpty(external)) {
    ip=internal;
  }
  String callbackUrl="https://" + ip + cloudInfo.getServicePath();
  String rightscaleBaseUrl=clientFactory.getSessionData().getStringProperty(SessionData.RIGHTSCALE_REGISTRATION_BASE_URL,RIGHTSCALE_REGISTRATION_BASE_URL_DEFAULT);
  String rightscaleUrl=rightscaleBaseUrl + URL.encodeQueryString(callbackUrl) + "&registration_version=1.0&retry=1&secret_token="+ URL.encodeQueryString(cloudInfo.getCloudId());
  return rightscaleUrl;
}

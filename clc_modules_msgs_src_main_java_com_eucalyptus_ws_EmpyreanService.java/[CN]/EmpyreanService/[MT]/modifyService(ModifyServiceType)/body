{
  final ModifyServiceResponseType reply=request.getReply();
  if (NamedTransition.INSTANCE.apply(request)) {
    reply.markWinning();
  }
 else {
    try {
      Component.State nextState=Component.State.valueOf(request.getState());
      ServiceConfiguration config=findService(request.getName());
      Topology.transition(nextState).apply(config).get();
    }
 catch (    Exception ex) {
      Exceptions.maybeInterrupted(ex);
      throw Exceptions.toUndeclared("Failed to execute request transition: " + request.getState() + "\nPossible arguments are: \n"+ "TRANSITIONS\n\t"+ Joiner.on("\n\t").join(Topology.Transitions.values())+ "STATES\n\t"+ Joiner.on("\n\t").join(Component.State.values()),ex);
    }
  }
  return reply;
}

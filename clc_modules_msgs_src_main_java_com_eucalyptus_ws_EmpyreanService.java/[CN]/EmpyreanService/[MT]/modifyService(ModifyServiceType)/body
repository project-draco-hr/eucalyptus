{
  final ModifyServiceResponseType reply=request.getReply();
  if (NamedTransition.INSTANCE.apply(request)) {
    reply.markWinning();
  }
 else {
    try {
      Component.State nextState=Component.State.valueOf(request.getState());
      ServiceConfiguration config=findService(request.getName());
      Topology.transition(nextState).apply(config).get();
    }
 catch (    Exception ex) {
      Exceptions.maybeInterrupted(ex);
      throw Exceptions.toUndeclared("Failed to execute request transition: " + request.getState() + "\n(Possible arguments are: "+ Joiner.on("\n").join(TransitionName.values()),ex);
    }
  }
  return reply;
}

{
  final DescribeServicesResponseType reply=request.getReply();
  for (  Component comp : Components.list()) {
    if (comp.hasLocalService()) {
      final Service localService=comp.getLocalService();
      reply.getServiceStatuses().add(new ServiceStatusType(){
{
          setServiceId(localService.getServiceId());
          setLocalEpoch(reply.getBaseEpoch());
          setLocalState(localService.getState().toString());
          getDetails().addAll(localService.getDetails());
        }
      }
);
    }
 else {
      reply.getServiceStatuses().add(new ServiceStatusType(){
{
          setServiceId(new ServiceId());
          setLocalEpoch(reply.getBaseEpoch());
          setLocalState("UNAVAILABLE");
        }
      }
);
    }
  }
  return reply;
}

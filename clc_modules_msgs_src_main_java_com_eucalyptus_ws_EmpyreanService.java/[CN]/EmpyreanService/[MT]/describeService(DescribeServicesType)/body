{
  final DescribeServicesResponseType reply=request.getReply();
  for (  Component comp : Components.list()) {
    if (comp.hasLocalService()) {
      final ServiceConfiguration config=comp.getLocalServiceConfiguration();
      reply.getServiceStatuses().add(new ServiceStatusType(){
{
          setServiceId(Services.transform(config,ServiceId.class));
          setLocalEpoch(reply.getBaseEpoch());
          setLocalState(config.lookupStateMachine().getState().toString());
          getDetails().addAll(Collections2.transform(config.lookupDetails(),Functions.toStringFunction()));
        }
      }
);
    }
  }
  return reply;
}

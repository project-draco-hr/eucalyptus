{
  final boolean listAll=Boolean.TRUE.equals(listAllArg);
  final boolean listInternal=Boolean.TRUE.equals(listInternalArg);
  return new Predicate<ServiceConfiguration>(){
    @Override public boolean apply(    final ServiceConfiguration input){
      if (listAll) {
        return true;
      }
 else       if (input.getComponentId().isInternal() && listInternal) {
        return Internets.testLocal(input.getHostName());
      }
 else       if (input.getComponentId().isPublicService()) {
        return true;
      }
 else       if (input.getComponentId().isAdminService()) {
        return true;
      }
 else       if (input.getComponentId().isRegisterable()) {
        return true;
      }
 else {
        return false;
      }
    }
  }
;
}

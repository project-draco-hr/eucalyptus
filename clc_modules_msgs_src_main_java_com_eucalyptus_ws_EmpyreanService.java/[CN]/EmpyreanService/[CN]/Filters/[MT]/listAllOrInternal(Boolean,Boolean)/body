{
  final boolean listAll=Boolean.TRUE.equals(listAllArg);
  final boolean listInternal=Boolean.TRUE.equals(listInternalArg);
  return new Predicate<ServiceConfiguration>(){
    @Override public boolean apply(    ServiceConfiguration input){
      if (listAll) {
        return true;
      }
 else       if (input.getComponentId().isInternal() && listInternal && input.getPort() == -1 ? true : Internets.testLocal(input.getHostName())) {
        return true;
      }
 else       if (input.getComponentId().isPublicService()) {
        return true;
      }
 else       if (input.getComponentId().isAdminService()) {
        return true;
      }
 else       if (input.getComponentId().isRegisterable()) {
        return true;
      }
 else {
        return false;
      }
    }
  }
;
}

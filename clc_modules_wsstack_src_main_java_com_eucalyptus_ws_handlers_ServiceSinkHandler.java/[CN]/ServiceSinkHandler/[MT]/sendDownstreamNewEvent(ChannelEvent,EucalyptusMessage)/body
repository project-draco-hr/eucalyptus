{
  final MappingHttpMessage request=this.requestLocal.get(e.getChannel());
  if (reply == null) {
    LOG.warn("Received a null response for request: " + request.getMessageString());
    reply=new EucalyptusErrorMessageType(this.getClass().getSimpleName(),(EucalyptusMessage)request.getMessage(),"Received a NULL reply");
  }
  LOG.info(EventRecord.create(Component.eucalyptus,reply.getUserId(),reply.getCorrelationId(),EventType.MSG_SERVICED,reply.getClass().getSimpleName()));
  final MappingHttpResponse response=new MappingHttpResponse(request.getProtocolVersion());
  final DownstreamMessageEvent newEvent=new DownstreamMessageEvent(e.getChannel(),e.getFuture(),response,null);
  response.setMessage(reply);
  return newEvent;
}

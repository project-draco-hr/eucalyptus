{
  final MappingHttpMessage request=this.requestLocal.get(ctx.getChannel());
  if (request != null) {
    if (reply == null) {
      LOG.warn("Received a null response for request: " + request.getMessageString());
      reply=new EucalyptusErrorMessageType(this.getClass().getSimpleName(),(EucalyptusMessage)request.getMessage(),"Received a NULL reply");
    }
    LOG.info(EventRecord.here(Component.eucalyptus,EventType.MSG_SERVICED,reply.getClass().getSimpleName(),Long.toString(System.currentTimeMillis() - this.startTime.get())));
    final MappingHttpResponse response=new MappingHttpResponse(request.getProtocolVersion());
    final DownstreamMessageEvent newEvent=new DownstreamMessageEvent(ctx.getChannel(),e.getFuture(),response,null);
    response.setMessage(reply);
    ctx.sendDownstream(newEvent);
  }
}

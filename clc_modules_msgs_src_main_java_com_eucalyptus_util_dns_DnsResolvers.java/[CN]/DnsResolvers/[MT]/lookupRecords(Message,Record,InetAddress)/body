{
  final Name name=query.getName();
  final int type=query.getType();
  for (  final DnsResolver r : DnsResolvers.resolversFor(query,source)) {
    try {
      LOG.debug("DnsResolver: " + r.getClass().getSimpleName() + " for name "+ name);
      final DnsResponse reply=r.lookupRecords(query);
      if (reply.hasAnswer()) {
        for (        ResponseSection s : ResponseSection.values()) {
          RRset rrset=reply.section(s);
          if (rrset != null) {
            addRRset(name,response,rrset,type);
          }
        }
        return SetResponse.ofType(SetResponse.SUCCESSFUL);
      }
    }
 catch (    final Exception ex) {
      LOG.error(ex);
      LOG.debug(ex,ex);
    }
  }
  return SetResponse.ofType(SetResponse.UNKNOWN);
}

{
  if (event instanceof StartComponentEvent) {
    StartComponentEvent e=(StartComponentEvent)event;
    if (Component.cluster.equals(e.getComponent()) && e.getConfiguration() instanceof ClusterConfiguration) {
      try {
        LOG.info("Starting up cluster: " + LogUtil.dumpObject(e));
        Cluster newCluster=ClusterBootstrapper.lookupCluster((ClusterConfiguration)e.getConfiguration());
        this.registerClusterStateHandler(newCluster);
        ListenerRegistry.getInstance().fireEvent(new NewClusterEvent().setMessage(newCluster));
        return;
      }
 catch (      EucalyptusCloudException e1) {
        return;
      }
catch (      EventVetoedException e1) {
        return;
      }
    }
  }
 else   if (event instanceof StopComponentEvent) {
    StopComponentEvent e=(StopComponentEvent)event;
    if (Component.cluster.equals(e.getComponent()) && e.getConfiguration() instanceof ClusterConfiguration) {
      LOG.info("Tearing down cluster: " + LogUtil.dumpObject(e));
      Cluster c=Clusters.getInstance().lookup(e.getConfiguration().getName());
      Clusters.getInstance().deregister(c.getName());
      c.stop();
      try {
        ListenerRegistry.getInstance().fireEvent(new TeardownClusterEvent().setMessage(c));
        this.deregisterClusterStateHandler(c);
        return;
      }
 catch (      EventVetoedException e1) {
        return;
      }
    }
  }
}

{
  if (event instanceof LifecycleEvent) {
    ServiceConfiguration conf=((LifecycleEvent)event).getConfiguration();
    if (conf instanceof ClusterConfiguration) {
      if (event instanceof StartComponentEvent) {
        EventRecord.here(ClusterBootstrapper.class,EventType.COMPONENT_SERVICE_START_REMOTE,conf.getName(),conf.getUri()).info();
      }
 else       if (event instanceof StopComponentEvent) {
        EventRecord.here(ClusterBootstrapper.class,EventType.COMPONENT_SERVICE_STOP_REMOTE,conf.getName(),conf.getUri()).info();
      }
    }
  }
  if (event instanceof StartComponentEvent) {
    StartComponentEvent e=(StartComponentEvent)event;
    if (e.getConfiguration() instanceof ClusterConfiguration) {
      try {
        LOG.info("Starting up cluster: " + LogUtil.dumpObject(e));
        Cluster newCluster=ClusterBootstrapper.lookupCluster((ClusterConfiguration)e.getConfiguration());
        this.registerClusterStateHandler(newCluster);
        ListenerRegistry.getInstance().fireEvent(new NewClusterEvent().setMessage(newCluster));
        return;
      }
 catch (      EucalyptusCloudException e1) {
        return;
      }
catch (      EventVetoedException e1) {
        return;
      }
    }
  }
 else   if (event instanceof StopComponentEvent) {
    StopComponentEvent e=(StopComponentEvent)event;
    if (e.getConfiguration() instanceof ClusterConfiguration) {
      LOG.info("Tearing down cluster: " + LogUtil.dumpObject(e));
      Cluster c=Clusters.getInstance().lookup(e.getConfiguration().getName());
      Clusters.getInstance().deregister(c.getName());
      c.stop();
      try {
        ListenerRegistry.getInstance().fireEvent(new TeardownClusterEvent().setMessage(c));
        this.deregisterClusterStateHandler(c);
        return;
      }
 catch (      EventVetoedException e1) {
        return;
      }
    }
  }
}

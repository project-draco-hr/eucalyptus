{
  try {
    RandomAccessFile raf=new RandomAccessFile(new File(getObjectPath(bucketName,objectName)),"r");
    httpResponse.addHeader(HttpHeaders.Names.CONTENT_TYPE,contentType != null ? contentType : "binary/octet-stream");
    if (etag != null)     httpResponse.addHeader(HttpHeaders.Names.ETAG,etag);
    httpResponse.addHeader(HttpHeaders.Names.LAST_MODIFIED,lastModified);
    if (contentDisposition != null)     httpResponse.addHeader("Content-Disposition",contentDisposition);
    ChunkedInput file;
    isCompressed=isCompressed == null ? false : isCompressed;
    if (isCompressed) {
      file=new CompressedChunkedFile(raf,size);
    }
 else {
      file=new ChunkedDataFile(raf,0,size,8192);
      httpResponse.addHeader(HttpHeaders.Names.CONTENT_LENGTH,String.valueOf(size));
    }
    channel.write(httpResponse);
    ChannelFuture writeFuture=channel.write(file);
    writeFuture.addListener(ChannelFutureListener.CLOSE);
  }
 catch (  Exception ex) {
    LOG.error(ex,ex);
  }
}

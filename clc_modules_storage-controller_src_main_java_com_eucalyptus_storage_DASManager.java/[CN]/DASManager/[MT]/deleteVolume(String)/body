{
  updateVolumeGroup();
  VolumeEntityWrapperManager volumeManager=new VolumeEntityWrapperManager();
  LVMVolumeInfo foundLVMVolumeInfo=volumeManager.getVolumeInfo(volumeId);
  if (foundLVMVolumeInfo != null) {
    String lvName=foundLVMVolumeInfo.getLvName();
    String absoluteLVName=lvmRootDirectory + PATH_SEPARATOR + volumeGroup+ PATH_SEPARATOR+ lvName;
    volumeManager.unexportVolume(foundLVMVolumeInfo);
    try {
      String returnValue="";
      for (int i=0; i < 5; ++i) {
        returnValue=removeLogicalVolume(absoluteLVName);
        if (returnValue.length() != 0) {
          if (returnValue.contains("successfully removed")) {
            break;
          }
        }
        try {
          Thread.sleep(500);
        }
 catch (        InterruptedException e) {
          LOG.error(e);
          break;
        }
      }
      if (returnValue.length() == 0) {
        throw new EucalyptusCloudException("Unable to remove logical volume " + absoluteLVName);
      }
      volumeManager.remove(foundLVMVolumeInfo);
      volumeManager.finish();
    }
 catch (    ExecutionException ex) {
      volumeManager.abort();
      String error="Unable to run command: " + ex.getMessage();
      LOG.error(error);
      throw new EucalyptusCloudException(error);
    }
  }
 else {
    volumeManager.abort();
    throw new EucalyptusCloudException("Unable to find volume: " + volumeId);
  }
}

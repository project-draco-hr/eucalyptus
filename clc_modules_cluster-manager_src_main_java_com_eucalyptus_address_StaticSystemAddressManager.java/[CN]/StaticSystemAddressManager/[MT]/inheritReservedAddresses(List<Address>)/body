{
  int allocCount=Addresses.getSystemReservedAddressCount() - reservedAddresses.size();
  LOG.debug("Allocating additional " + allocCount + " addresses in static public addresing mode");
  allocCount=Addresses.getInstance().listDisabledValues().size() < allocCount ? Addresses.getInstance().listDisabledValues().size() : allocCount;
  if (allocCount > 0) {
    for (int i=0; i < allocCount; i++) {
      try {
        this.allocateNext(ComponentIds.lookup(Eucalyptus.class).getFullName());
      }
 catch (      NotEnoughResourcesAvailable e) {
        break;
      }
    }
  }
 else {
    for (    Address addr : Addresses.getInstance().listValues()) {
      if (addr.getOwner().getName().equals(Address.SYSTEM_ALLOCATED_USERID) && !addr.isAssigned() && !addr.isPending()) {
        addr.release();
        if (allocCount++ >= 0)         break;
      }
    }
  }
}

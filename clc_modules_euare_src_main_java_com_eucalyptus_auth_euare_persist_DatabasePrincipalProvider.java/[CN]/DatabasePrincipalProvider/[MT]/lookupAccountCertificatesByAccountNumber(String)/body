{
  try (final TransactionResource tx=Entities.readOnlyDistinctTransactionFor(CertificateEntity.class)){
    final List<X509Certificate> certificates=Lists.newArrayList();
    for (    final User user : Accounts.lookupAccountById(accountNumber).getUsers()) {
      Iterables.addAll(certificates,Iterables.transform(Iterables.filter(user.getCertificates(),CollectionUtils.propertyPredicate(false,revoked())),x509Certificate()));
    }
    return certificates;
  }
 }

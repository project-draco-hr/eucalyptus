{
  LOG.debug(request);
  final PutInstanceImportTaskStatusResponseType reply=request.getReply();
  reply.setCancelled(false);
  try {
    final String taskId=request.getImportTaskId();
    ImagingTask imagingTask=null;
    try {
      imagingTask=ImagingTasks.lookup(taskId);
    }
 catch (    final Exception ex) {
      reply.setCancelled(true);
      throw new Exception("imaging task with " + taskId + " is not found");
    }
    if (ImportTaskState.CONVERTING.equals(imagingTask.getState())) {
      final WorkerTaskState workerState=WorkerTaskState.fromString(request.getStatus());
switch (workerState) {
case EXTANT:
        ;
      break;
case DONE:
    try {
      ImagingTasks.transitState(imagingTask,ImportTaskState.CONVERTING,ImportTaskState.COMPLETED,null);
    }
 catch (    final Exception ex) {
      ;
    }
  break;
case FAILED:
ImagingTasks.setState(imagingTask,ImportTaskState.FAILED,request.getStatusMessage());
break;
}
}
 else {
reply.setCancelled(true);
}
}
 catch (final Exception ex) {
LOG.warn("Failed to update the task's state",ex);
}
LOG.debug(reply);
return reply;
}

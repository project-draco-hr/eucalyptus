{
  final PutInstanceImportTaskStatusResponseType reply=request.getReply();
  reply.setCancelled(false);
  try {
    final String taskId=request.getImportTaskId();
    ImagingTask imagingTask=null;
    try {
      imagingTask=ImagingTasks.lookup(taskId);
    }
 catch (    final Exception ex) {
      LOG.warn("imaging task with " + taskId + " is not found");
      reply.setCancelled(true);
    }
    if (imagingTask != null) {
      final WorkerTaskState workerState=WorkerTaskState.fromString(request.getStatus());
switch (workerState) {
case EXTANT:
        ;
      break;
case DONE:
    ImagingTasks.setState(imagingTask,ImportTaskState.COMPLETED,null);
  break;
case FAILED:
ImagingTasks.setState(imagingTask,ImportTaskState.FAILED,request.getStatusMessage());
break;
}
}
}
 catch (final Exception ex) {
LOG.error("Failed to update the task's state",ex);
}
return reply;
}

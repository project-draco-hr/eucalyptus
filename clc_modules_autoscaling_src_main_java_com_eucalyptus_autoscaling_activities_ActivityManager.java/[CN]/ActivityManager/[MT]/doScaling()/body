{
  timeoutScalingActivities();
  try {
    for (    final AutoScalingGroup group : autoScalingGroups.listRequiringScaling()) {
      int compareResult=group.getCapacity().compareTo(group.getDesiredCapacity());
      if (compareResult < 0) {
        runTask(new LaunchInstancesScalingProcessTask(group));
      }
 else       if (compareResult > 0) {
        runTask(perhapsTerminateInstances(group,group.getCapacity() - group.getDesiredCapacity()));
      }
    }
  }
 catch (  Exception e) {
    logger.error(e,e);
  }
  try {
    for (    final AutoScalingGroup group : autoScalingGroups.listRequiringInstanceReplacement()) {
      runTask(perhapsReplaceInstances(group));
    }
  }
 catch (  Exception e) {
    logger.error(e,e);
  }
  try {
    for (    final AutoScalingGroup group : autoScalingGroups.listRequiringMonitoring(10000L)) {
      runTask(new MonitoringScalingProcessTask(group,Lists.newArrayList(Iterables.transform(autoScalingInstances.listByGroup(group),instanceId()))));
    }
  }
 catch (  Exception e) {
    logger.error(e,e);
  }
}

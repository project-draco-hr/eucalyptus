{
  try {
    for (    final ScalingActivity activity : scalingActivities.list(null)) {
      if (!completedActivityStates.contains(activity.getActivityStatusCode()) && isTimedOut(activity.getLastUpdateTimestamp())) {
        scalingActivities.update(activity.getOwner(),activity.getActivityId(),new Callback<ScalingActivity>(){
          @Override public void fire(          final ScalingActivity scalingActivity){
            scalingActivity.setActivityStatusCode(ActivityStatusCode.Cancelled);
            scalingActivity.setEndTime(new Date());
          }
        }
);
      }
    }
  }
 catch (  Exception e) {
    logger.error(e,e);
  }
}

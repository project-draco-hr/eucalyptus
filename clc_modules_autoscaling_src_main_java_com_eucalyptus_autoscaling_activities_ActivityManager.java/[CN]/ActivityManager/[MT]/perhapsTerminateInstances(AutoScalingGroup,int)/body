{
  final List<String> instancesToTerminate=Lists.newArrayList();
  try {
    final List<AutoScalingInstance> currentInstances=autoScalingInstances.listByGroup(group.getOwner(),group.getAutoScalingGroupName());
    if (currentInstances.size() == terminateCount) {
      Iterables.addAll(instancesToTerminate,Iterables.transform(currentInstances,AutoScalingInstances.instanceId()));
    }
 else {
      final List<AutoScalingInstance> remainingInstances=Lists.newArrayList(currentInstances);
      for (int i=0; i < terminateCount && remainingInstances.size() >= 1; i++) {
        final AutoScalingInstance instanceForTermination=TerminationPolicyType.selectForTermination(group.getTerminationPolicies(),remainingInstances);
        remainingInstances.remove(instanceForTermination);
        instancesToTerminate.add(instanceForTermination.getInstanceId());
      }
    }
  }
 catch (  final Exception e) {
    logger.error(e,e);
  }
  return terminateInstances(group,instancesToTerminate,false);
}

{
  final List<String> instanceIds=Lists.newArrayList();
  for (  final LaunchInstanceScalingActivityTask task : tasks) {
    instanceIds.addAll(task.getInstanceIds());
  }
  try {
    final boolean scalingRequired=instanceIds.size() != launchCount || getGroup().getCapacity() + launchCount != getGroup().getDesiredCapacity();
    autoScalingGroups.update(getOwner(),getGroup().getAutoScalingGroupName(),new Callback<AutoScalingGroup>(){
      @Override public void fire(      final AutoScalingGroup autoScalingGroup){
        if (getGroup().getVersion().equals(autoScalingGroup.getVersion())) {
          autoScalingGroup.setScalingRequired(scalingRequired);
        }
        autoScalingGroup.setCapacity(autoScalingGroup.getCapacity() + instanceIds.size());
      }
    }
);
  }
 catch (  AutoScalingMetadataException e) {
    logger.error(e,e);
  }
  getEucalyptusClient().dispatch(tagInstances(instanceIds,getGroup().getAutoScalingGroupName(),getTags(getGroup())),new Callback.Failure<CreateTagsResponseType>(){
    @Override public void fireException(    final Throwable e){
      logger.error(e,e);
    }
  }
);
}

{
  try {
    if (!isConnected()) {
      throw new EucalyptusCloudException("Resource is not connected to peer.");
    }
    if (!isUpToDate()) {
      throw new EucalyptusCloudException("Resource is not up to date");
    }
    if (Component.State.ENABLED.equals(Components.lookup("walrus").getState())) {
      if (!isPrimary()) {
        throw new EucalyptusCloudException("Oh nos. Is not primary but I r master. wtf?");
      }
    }
 else {
      if (Component.State.DISABLED.equals(Components.lookup("walrus").getState())) {
        if (!isSecondary()) {
          throw new EucalyptusCloudException("Oh nos. Is not secondary but I r slave. wtf?");
        }
      }
    }
  }
 catch (  ExecutionException ex) {
    throw new EucalyptusCloudException(ex);
  }
}

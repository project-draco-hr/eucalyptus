{
  LOG.debug(e,e);
  LOG.debug("Trying to remove invalid volume attachment " + this.getRequest().getVolumeId() + " from instance "+ this.getRequest().getInstanceId());
  try {
    VmInstance vm=VmInstances.getInstance().lookup(this.getRequest().getInstanceId());
    AttachedVolume failVol=new AttachedVolume(this.getRequest().getVolumeId());
    NavigableSet<AttachedVolume> volList=vm.getVolumes().subSet(failVol,true,failVol,true);
    if (!volList.isEmpty()) {
      AttachedVolume volume=volList.first();
      vm.getVolumes().remove(failVol);
    }
 else {
      LOG.error("Failed to find volume attachment information for volume: " + failVol);
    }
    LOG.debug("Removed failed attachment: " + failVol.getVolumeId() + " -> "+ vm.getInstanceId());
    LOG.debug("Final volume attachments for " + vm.getInstanceId() + " "+ vm.getVolumes());
  }
 catch (  NoSuchElementException e1) {
  }
}

{
  DescribeRegionsResponseType reply=(DescribeRegionsResponseType)request.getReply();
  try {
    Component euca=Components.lookup(Eucalyptus.class);
    NavigableSet<ServiceConfiguration> configs=euca.lookupServiceConfigurations();
    if (!configs.isEmpty() && Component.State.ENABLED.isIn(configs.first())) {
      reply.getRegionInfo().add(new RegionInfoType(euca.getComponentId().name(),configs.first().getUri().toASCIIString()));
    }
  }
 catch (  NoSuchElementException ex) {
    LOG.error(ex,ex);
  }
  try {
    Component walrus=Components.lookup(Walrus.class);
    NavigableSet<ServiceConfiguration> configs=walrus.lookupServiceConfigurations();
    if (!configs.isEmpty() && Component.State.ENABLED.isIn(configs.first())) {
      reply.getRegionInfo().add(new RegionInfoType(walrus.getComponentId().name(),configs.first().getUri().toASCIIString()));
    }
  }
 catch (  NoSuchElementException ex) {
    LOG.error(ex,ex);
  }
  return reply;
}

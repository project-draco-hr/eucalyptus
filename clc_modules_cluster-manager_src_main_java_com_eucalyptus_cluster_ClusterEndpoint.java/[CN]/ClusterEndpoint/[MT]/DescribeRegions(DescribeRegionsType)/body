{
  DescribeRegionsResponseType reply=(DescribeRegionsResponseType)request.getReply();
  try {
    Component euca=Components.lookup(Eucalyptus.class);
    NavigableSet<ServiceConfiguration> configs=euca.services();
    if (!configs.isEmpty() && Component.State.ENABLED.equals(configs.first().lookupState())) {
      reply.getRegionInfo().add(new RegionInfoType(euca.getComponentId().name(),ServiceUris.remotePublicify(configs.first()).toASCIIString()));
    }
  }
 catch (  NoSuchElementException ex) {
    LOG.error(ex,ex);
  }
  try {
    Component walrus=Components.lookup(Walrus.class);
    NavigableSet<ServiceConfiguration> configs=walrus.services();
    if (!configs.isEmpty() && Component.State.ENABLED.equals(configs.first().lookupState())) {
      reply.getRegionInfo().add(new RegionInfoType(walrus.getComponentId().name(),ServiceUris.remotePublicify(configs.first()).toASCIIString()));
    }
  }
 catch (  NoSuchElementException ex) {
    LOG.error(ex,ex);
  }
  return reply;
}

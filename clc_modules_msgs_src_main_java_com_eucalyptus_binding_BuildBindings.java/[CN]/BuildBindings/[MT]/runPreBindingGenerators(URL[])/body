{
  ClassLoader old=Thread.currentThread().getContextClassLoader();
  ClassLoader cl=getUrlClassLoader();
  Thread.currentThread().setContextClassLoader(cl);
  try {
    BindingGenerator.MSG_TYPE=cl.loadClass("edu.ucsb.eucalyptus.msgs.BaseMessage");
    BindingGenerator.DATA_TYPE=cl.loadClass("edu.ucsb.eucalyptus.msgs.EucalyptusData");
    Map<String,Class> classes=new ConcurrentHashMap<String,Class>(){
{
        put(BindingGenerator.MSG_TYPE.getName(),BindingGenerator.MSG_TYPE);
        put(BindingGenerator.DATA_TYPE.getName(),BindingGenerator.DATA_TYPE);
      }
    }
;
    for (    FileSet fs : this.classFileSets) {
      for (      String classFileName : fs.getDirectoryScanner(getProject()).getIncludedFiles()) {
        try {
          if (!classFileName.endsWith("class"))           continue;
          Class c=cl.loadClass(classFileName.replaceFirst("[^/]*/[^/]*/","").replaceAll("/",".").replaceAll("\\.class.{0,1}",""));
          classes.put(c.getName(),c);
        }
 catch (        ClassNotFoundException e) {
          e.printStackTrace();
        }
      }
    }
    try {
      for (      Class c : classes.values()) {
        if (BindingGenerator.MSG_TYPE.isAssignableFrom(c) || BindingGenerator.DATA_TYPE.isAssignableFrom(c)) {
          for (          BindingGenerator gen : BindingGenerator.getPreGenerators()) {
            gen.processClass(c);
          }
        }
        classes.remove(c.getName());
      }
    }
  finally {
      for (      BindingGenerator gen : BindingGenerator.getPreGenerators()) {
        gen.close();
      }
    }
  }
 catch (  Exception e1) {
    e1.printStackTrace();
  }
 finally {
    Thread.currentThread().setContextClassLoader(old);
  }
}

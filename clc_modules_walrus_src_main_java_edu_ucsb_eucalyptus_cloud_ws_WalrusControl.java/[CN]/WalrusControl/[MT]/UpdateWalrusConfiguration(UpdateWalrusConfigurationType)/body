{
  UpdateWalrusConfigurationResponseType reply=(UpdateWalrusConfigurationResponseType)request.getReply();
  if (Component.eucalyptus.name().equals(request.getEffectiveUserId()))   throw new AccessDeniedException("Only admin can change walrus properties.");
  if (request.getProperties() != null) {
    for (    ComponentProperty prop : request.getProperties()) {
      LOG.info("Walrus property: " + prop.getDisplayName() + " Qname: "+ prop.getQualifiedName()+ " Value: "+ prop.getValue());
      try {
        ConfigurableProperty entry=PropertyDirectory.getPropertyEntry(prop.getQualifiedName());
        entry.setValue(prop.getValue());
      }
 catch (      IllegalAccessException e) {
        LOG.error(e,e);
      }
    }
  }
  String name=request.getName();
  if (name != null)   WalrusProperties.NAME=name;
  walrusManager.check();
  return reply;
}

{
  if (info.getPhysicalResourceId() == null)   return;
  ServiceConfiguration configuration=Topology.lookup(Compute.class);
  if (properties.getAllocationId() != null) {
    DescribeAddressesType describeAddressesType=new DescribeAddressesType();
    describeAddressesType.setAllocationIds(Lists.newArrayList(properties.getAllocationId()));
    describeAddressesType.setEffectiveUserId(info.getEffectiveUserId());
    DescribeAddressesResponseType describeAddressesResponseType=AsyncRequests.<DescribeAddressesType,DescribeAddressesResponseType>sendSync(configuration,describeAddressesType);
    if (describeAddressesResponseType.getAddressesSet() != null && !describeAddressesResponseType.getAddressesSet().isEmpty()) {
      DisassociateAddressType disassociateAddressType=new DisassociateAddressType();
      disassociateAddressType.setPublicIp(properties.getEip());
      disassociateAddressType.setEffectiveUserId(info.getEffectiveUserId());
      AsyncRequests.<DisassociateAddressType,DisassociateAddressResponseType>sendSync(configuration,disassociateAddressType);
    }
  }
  if (properties.getEip() != null) {
    DescribeAddressesType describeAddressesType=new DescribeAddressesType();
    describeAddressesType.setPublicIpsSet(Lists.newArrayList(properties.getEip()));
    describeAddressesType.setEffectiveUserId(info.getEffectiveUserId());
    DescribeAddressesResponseType describeAddressesResponseType=AsyncRequests.<DescribeAddressesType,DescribeAddressesResponseType>sendSync(configuration,describeAddressesType);
    if (describeAddressesResponseType.getAddressesSet() != null && !describeAddressesResponseType.getAddressesSet().isEmpty()) {
      DisassociateAddressType disassociateAddressType=new DisassociateAddressType();
      disassociateAddressType.setPublicIp(properties.getEip());
      disassociateAddressType.setEffectiveUserId(info.getEffectiveUserId());
      AsyncRequests.<DisassociateAddressType,DisassociateAddressResponseType>sendSync(configuration,disassociateAddressType);
    }
  }
}

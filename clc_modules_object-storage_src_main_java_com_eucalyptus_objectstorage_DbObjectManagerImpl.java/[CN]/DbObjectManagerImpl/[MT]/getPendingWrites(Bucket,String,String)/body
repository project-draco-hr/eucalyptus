{
  try {
    EntityTransaction db=Entities.get(ObjectEntity.class);
    try {
      ObjectEntity searchExample=new ObjectEntity(bucket.getBucketName(),objectKey,versionId);
      Criteria search=Entities.createCriteria(ObjectEntity.class);
      List results=search.add(Example.create(searchExample)).add(Restrictions.isNull("objectModifiedTimestamp")).list();
      db.commit();
      return (List<ObjectEntity>)results;
    }
  finally {
      if (db != null && db.isActive()) {
        db.rollback();
      }
    }
  }
 catch (  NoSuchElementException e) {
    return new ArrayList<ObjectEntity>(0);
  }
catch (  Exception e) {
    LOG.error("Error fetching pending write records for object " + bucket.getBucketName() + "/"+ objectKey+ "?versionId="+ versionId);
    throw e;
  }
}

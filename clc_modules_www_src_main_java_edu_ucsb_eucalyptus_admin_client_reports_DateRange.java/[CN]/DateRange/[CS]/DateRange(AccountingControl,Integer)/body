{
  this.controller=controller;
  this.days=days;
  Integer absdays=Math.abs(this.days);
  Date now=new Date();
  Long nowMillis=now.getTime();
  Date start=new Date(nowMillis - (1000l * 60 * 24* absdays));
  this.startDate=new DatePickerPanel("From",start,new ValueChangeHandler<Date>(){
    public void onValueChange(    ValueChangeEvent<Date> event){
      Long newValue=DateRange.this.controller.changeStartMillis(event.getValue().getTime());
      DateRange.this.startDate.setValue(new Date(newValue));
    }
  }
);
  this.endDate=new DatePickerPanel("To",now,new ValueChangeHandler<Date>(){
    public void onValueChange(    ValueChangeEvent<Date> event){
      Long newValue=DateRange.this.controller.changeEndMillis(event.getValue().getTime());
      DateRange.this.endDate.setValue(new Date(newValue));
    }
  }
);
}

{
  EntityTransaction db=Entities.get(SnapshotInfo.class);
  SnapshotInfo snapshotInfo=new SnapshotInfo(snapshotId);
  try {
    SnapshotInfo foundSnapshotInfo=Entities.uniqueResult(snapshotInfo);
    foundSnapshotInfo.setProgress("100");
    foundSnapshotInfo.setShouldTransfer(false);
    db.commit();
  }
 catch (  Exception ex) {
    failed();
    LOG.error("Error updating snapshot upload progress in DB.",ex);
  }
 finally {
    if (db != null && db.isActive()) {
      db.rollback();
    }
  }
}

{
  try {
    final String instanceId=addr.getInstanceId();
    if (addr.isAssigned()) {
      AsyncRequests.newRequest(addr.unassign().getCallback()).then(new UnconditionalCallback(){
        @Override public void fire(){
          try {
            final VmInstance vm=VmInstances.getInstance().lookup(instanceId);
            Addresses.system(vm);
          }
 catch (          NoSuchElementException ex) {
          }
        }
      }
).dispatch(addr.getCluster());
    }
 else {
      addr.release();
    }
  }
 catch (  IllegalStateException e) {
    LOG.debug(e,e);
  }
}

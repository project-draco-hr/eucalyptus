{
  try {
    if (VmState.PENDING.equals(vm.getRuntimeState()) || VmState.RUNNING.equals(vm.getRuntimeState())) {
      Addresses.getInstance().getAddressManager().assignSystemAddress(vm);
    }
  }
 catch (  NotEnoughResourcesException e) {
    LOG.warn("No addresses are available to provide a system address for: " + LogUtil.dumpObject(vm));
    LOG.debug(e,e);
  }
}

{
  final Optional<Address> addressOptional;
  final Function<Address,String> addressExtractor=Strings.startsWith(Address.ID_PREFIX_ALLOC).apply(input) ? allocation() : Strings.startsWith(Address.ID_PREFIX_ASSOC).apply(input) ? association() : null;
  if (addressExtractor != null) {
    addressOptional=Iterables.tryFind(Addresses.getInstance().listValues(),CollectionUtils.propertyPredicate(input,addressExtractor));
  }
 else {
    addressOptional=Optional.of(Addresses.getInstance().lookup(input));
  }
  if (!addressOptional.isPresent()) {
    throw new NoSuchElementException("Address not found for " + input);
  }
  return addressOptional.get();
}

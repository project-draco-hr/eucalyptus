{
  Address address=null;
  try {
    address=Addresses.getInstance().lookup(addr);
  }
 catch (  NoSuchElementException e) {
    throw new EucalyptusCloudException("Permission denied while trying to release address: " + addr);
  }
  if (address.isSystemOwned()) {
    throw new EucalyptusCloudException("Non admin user cannot manipulate system owned address " + addr);
  }
  if (!RestrictedTypes.filterPrivileged().apply(address)) {
    throw new EucalyptusCloudException("Permission denied while trying to access address " + addr);
  }
  return address;
}

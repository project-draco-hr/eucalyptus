{
  try {
    Context ctx=Contexts.lookup();
    LOG.debug(EventRecord.here(VmControl.class,EventType.MSG_RECEIVED,ctx.getCorrelationId(),msg.getClass().getSimpleName()));
  }
 catch (  NoSuchContextException e1) {
    LOG.debug(e1,e1);
  }
  DescribeInstancesResponseType reply=(DescribeInstancesResponseType)msg.getReply();
  try {
    reply.setReservationSet(SystemState.handle(msg.getUserId(),msg.getInstancesSet(),msg.isAdministrator()));
  }
 catch (  Exception e) {
    LOG.error(e);
    LOG.debug(e,e);
    throw new EucalyptusCloudException(e.getMessage());
  }
  return reply;
}

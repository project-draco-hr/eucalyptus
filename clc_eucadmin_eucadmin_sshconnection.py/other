'\nCreated on Mar 7, 2012\n@author: clarkmatthew\n\nsimple class to establish an ssh session\nexample usage:\n    import sshconnection\n    ssh = SshConnection( \'192.168.1.1\', keypath=\'/home/testuser/keyfile.pem\')\n\n    #use sys() to get either a list of output lines or a single string buffer depending on listformat flag\n    output = ssh.sys(\'ls /dev/sd*\',timeout=10)\n    print output[0]\n    print ssh.lastcmd+" exited with code: "+str(ssh.lastexitcode)\n\n    #...or use cmd to get a dict of output, exitstatus, and elapsed time to execute...\n    out = ssh.cmd(\'ping 192.168.1.2 -c 1 -W 5\')\n\n     print out[\'cmd\']+" exited with status:"+out[\'status\']+", elapsed time:"+out[\'elapsed\']\n     print out[\'output\']\n\nexample with proxy:\n    import sshconnection\n\n    instance_private_ip = \'10.1.1.5\'\n    instance_user = \'root\'\n    instance_keypath = \'/tmp/instancekey.pem\'\n\n    proxy_ip = \'192.168.1.2\'\n    proxy_username = \'testuser\'\n    #proxy_password = \'foo\'\n    proxy_keypath = \'/home/testuser/keyfile.pem\'\n\n\n    example output from ipython:\n\n    In[4]: instance_ssh = SshConnection( instance_private_ip, username=instance_user, keypath=instance_keypath,\n            proxy=proxy_ip, proxy_username = proxy_username, proxy_keypath = proxy_keypath, debug_connect = True)\n    ssh_connect args:\n    hostname:10.1.1.5\n    username:root\n    password:None\n    keypath:/tmp/instancekey.pem\n    timeout:60\n    retry:1\n    IPV6 DNS lookup disabled, do IPV4 resolution and pass IP to connect()\n    10.1.1.5, is already an ip, dont do host lookup...\n    192.168.1.2, is already an ip, dont do host lookup...\n    SSH connection attempt(1 of 2), host:\'root@10.1.1.5\', using ipv4:10.1.1.5, thru proxy:\'192.168.1.2\'\n    Using Keypath:/tmp/instancekey.pem\n    SSH - Connected to 10.1.1.5 via proxy host:192.168.1.2:22\n\n    In [5]: instance_ssh.sys(\'hostname\')\n    Out[5]: [\'euca_10_1_1_5.eucalyptus_cloud.com\']\n\n'
import copy
import os
import paramiko
import re
import select
import socket
import time

{
  Ats ats=Ats.inClassHierarchy(rscType);
  Ats msgAts=Ats.inClassHierarchy(msgType);
  if (!ats.has(PolicyVendor.class) && !msgAts.has(PolicyVendor.class)) {
    throw new IllegalArgumentException("Failed to determine policy for allocating type instance " + rscType.getCanonicalName() + ": required @PolicyVendor missing in resource type hierarchy "+ rscType.getCanonicalName()+ " and request type hierarchy "+ msgType.getCanonicalName());
  }
 else   if (!ats.has(PolicyResourceType.class) && !msgAts.has(PolicyResourceType.class)) {
    throw new IllegalArgumentException("Failed to determine policy for looking up type instance " + rscType.getCanonicalName() + ": required @PolicyResourceType missing in resource type hierarchy "+ rscType.getCanonicalName()+ " and request type hierarchy "+ msgType.getCanonicalName());
  }
  return ats;
}

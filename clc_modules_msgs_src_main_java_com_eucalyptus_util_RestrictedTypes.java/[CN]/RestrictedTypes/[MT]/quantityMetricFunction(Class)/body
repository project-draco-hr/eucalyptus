{
  for (  Class subType : Classes.ancestors(type)) {
    if (quantityMetricFunctions.containsKey(subType)) {
      return quantityMetricFunctions.get(subType);
    }
  }
  throw new NoSuchElementException("Failed to lookup quantity metric function for type: " + type);
}

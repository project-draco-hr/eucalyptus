{
  for (  ComponentId componentId : ComponentIds.list()) {
    try {
      FaultLogger faultLogger=FaultSubsystem.getFaultLogger(componentId);
      LOG.debug("Triggering fault in component " + componentId.getName() + " with id "+ id+ " and vars "+ varProps);
      Fault fault=FaultSubsystem.fault(id);
      if (fault == null) {
        LOG.error("Error triggering fault: " + id + ", no fault found in XML files");
      }
      if (varProps != null) {
        Enumeration e=varProps.propertyNames();
        while (e.hasMoreElements()) {
          String name=(String)e.nextElement();
          String value=varProps.getProperty(name);
          if (value == null)           continue;
          fault=fault.withVar(name,value);
        }
      }
      faultLogger.log(fault);
    }
 catch (    Exception ex) {
      LOG.error("Error triggering fault: " + ex);
      ex.printStackTrace();
    }
  }
}

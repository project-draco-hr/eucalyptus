{
  final EucalyptusRemoteFault remoteFault=Exceptions.findCause(e,EucalyptusRemoteFault.class);
  if (remoteFault != null) {
    final HttpResponseStatus status=Objects.firstNonNull(remoteFault.getStatus(),HttpResponseStatus.INTERNAL_SERVER_ERROR);
    final String code=remoteFault.getFaultCode();
    final String message=remoteFault.getFaultDetail();
switch (status.getCode()) {
case 400:
      throw new ComputeServiceClientException(code,message);
case 403:
    throw new ComputeServiceAuthorizationException(code,message);
case 503:
  throw new ComputeServiceUnavailableException(message);
default :
throw new ComputeServiceException(code,message);
}
}
}

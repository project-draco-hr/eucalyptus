{
  final boolean showAll=ids.remove("verbose");
  final Context ctx=Contexts.lookup();
  final AccountFullName accountFullName=ctx.getUserFullName().asAccountFullName();
  final OwnerFullName ownerFullName=ctx.isAdministrator() && showAll ? null : accountFullName;
  final Filter filter=Filters.generate(filters,persistent);
  final Predicate<? super AP> requestedAndAccessible=CloudMetadatas.filteringFor(persistent).byId(identifier.normalize(ids)).byPredicate(filter.asPredicate()).byPrivileges().buildPredicate();
  try (final TransactionResource tx=Entities.readOnlyDistinctTransactionFor(persistent)){
    results.addAll(lister.list(ownerFullName,filter.asCriterion(),filter.getAliases(),requestedAndAccessible,TypeMappers.lookup(persistent,api)));
    populateTags(accountFullName,persistent,results,idFunction);
  }
 catch (  Exception e) {
    throw handleException(e);
  }
}

{
  if (!StorageProperties.enableSnapshots) {
    LOG.error("Snapshot functionality disabled. Please check connection to Walrus");
    throw new EucalyptusCloudException("could not connect to Walrus.");
  }
  String snapshotLocation="snapshots" + "/" + snapshotId;
  String absoluteSnapshotPath=snapDestination;
  File file=new File(absoluteSnapshotPath);
  HttpReader snapshotGetter=new HttpReader(snapshotLocation,null,file,"GetWalrusSnapshot","",false);
  snapshotGetter.run();
  EntityWrapper<SnapshotInfo> db=StorageController.getEntityWrapper();
  SnapshotInfo snapshotInfo=new SnapshotInfo(snapshotId);
  snapshotInfo.setProgress("100");
  snapshotInfo.setStartTime(new Date());
  snapshotInfo.setStatus(StorageProperties.Status.available.toString());
  blockManager.addSnapshot(snapshotId);
}

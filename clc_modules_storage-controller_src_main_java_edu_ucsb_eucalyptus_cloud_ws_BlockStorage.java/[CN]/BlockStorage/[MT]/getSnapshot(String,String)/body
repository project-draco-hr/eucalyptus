{
  if (!StorageProperties.enableSnapshots) {
    LOG.error("Snapshot functionality disabled. Please check connection to Walrus");
    throw new EucalyptusCloudException("could not connect to Walrus.");
  }
  String snapshotLocation="snapshots" + "/" + snapshotId;
  String absoluteSnapshotPath=snapDestination;
  File file=new File(absoluteSnapshotPath);
  HttpReader snapshotGetter=new HttpReader(snapshotLocation,null,file,"GetWalrusSnapshot","",true,blockManager.getStorageRootDirectory());
  snapshotGetter.run();
  blockManager.addSnapshot(snapshotId);
}

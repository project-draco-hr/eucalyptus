{
  DeleteStorageVolumeResponseType reply=(DeleteStorageVolumeResponseType)request.getReply();
  if (!StorageProperties.enableStorage) {
    LOG.error("BlockStorage has been disabled. Please check your setup");
    return reply;
  }
  String volumeId=request.getVolumeId();
  LOG.info("Processing DeleteStorageVolume request for volume " + volumeId);
  EntityWrapper<VolumeInfo> db=StorageProperties.getEntityWrapper();
  VolumeInfo volumeInfo=new VolumeInfo();
  volumeInfo.setVolumeId(volumeId);
  List<VolumeInfo> volumeList=db.query(volumeInfo);
  if (volumeList.size() > 0) {
    VolumeInfo foundVolume=volumeList.get(0);
    String status=foundVolume.getStatus();
    if (status.equals(StorageProperties.Status.available.toString()) || status.equals(StorageProperties.Status.failed.toString())) {
      foundVolume.setStatus(StorageProperties.Status.deleting.toString());
    }
    reply.set_return(Boolean.TRUE);
  }
 else {
    LOG.error("Unable to find volume in SC database: " + volumeId);
    reply.set_return(Boolean.FALSE);
  }
  db.commit();
  return reply;
}

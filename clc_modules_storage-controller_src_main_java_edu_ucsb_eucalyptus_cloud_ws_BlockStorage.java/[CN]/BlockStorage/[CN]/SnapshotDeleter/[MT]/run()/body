{
  try {
    blockManager.deleteSnapshot(snapshotId);
    snapshotStorageManager.deleteObject("",snapshotId);
  }
 catch (  EucalyptusCloudException e1) {
    LOG.error(e1);
    return;
  }
catch (  IOException e) {
    LOG.error(e);
    return;
  }
  SnapshotInfo snapInfo=new SnapshotInfo(snapshotId);
  EntityWrapper<SnapshotInfo> db=StorageController.getEntityWrapper();
  SnapshotInfo foundSnapshotInfo;
  try {
    foundSnapshotInfo=db.getUnique(snapInfo);
    db.delete(foundSnapshotInfo);
    db.commit();
  }
 catch (  EucalyptusCloudException e) {
    db.rollback();
    LOG.error(e);
    return;
  }
  HttpWriter httpWriter=new HttpWriter("DELETE","snapset",snapshotId,"DeleteWalrusSnapshot",null);
  try {
    httpWriter.run();
  }
 catch (  EucalyptusCloudException ex) {
    LOG.error(ex);
  }
}

{
synchronized (this) {
    StorageProperties.enableStorage=StorageProperties.enableSnapshots=false;
    EntityWrapper<VolumeInfo> db=StorageController.getEntityWrapper();
    VolumeInfo volumeInfo=new VolumeInfo();
    volumeInfo.setStatus(StorageProperties.Status.available.toString());
    List<VolumeInfo> volumes=db.query(volumeInfo);
    for (    VolumeInfo volume : volumes) {
      try {
        String volumePath=fromBlockManager.getVolumePath(volume.getVolumeId());
        blockManager.importVolume(volume.getVolumeId(),volumePath,volume.getSize());
        blockManager.finishVolume(volume.getVolumeId());
      }
 catch (      EucalyptusCloudException ex) {
        LOG.error(ex);
      }
    }
    db.commit();
    StorageProperties.enableStorage=StorageProperties.enableSnapshots=true;
  }
}

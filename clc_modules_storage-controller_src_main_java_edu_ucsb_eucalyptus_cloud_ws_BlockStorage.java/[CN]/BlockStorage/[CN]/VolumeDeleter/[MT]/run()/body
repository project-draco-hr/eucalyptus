{
  try {
    blockManager.deleteVolume(volumeId);
  }
 catch (  EucalyptusCloudException e1) {
    LOG.error(e1);
    return;
  }
  EntityWrapper<VolumeInfo> db=StorageProperties.getEntityWrapper();
  VolumeInfo foundVolume;
  try {
    foundVolume=db.getUnique(new VolumeInfo(volumeId));
    db.delete(foundVolume);
    db.commit();
    EucaSemaphoreDirectory.removeSemaphore(volumeId);
    if (StorageProperties.trackUsageStatistics) {
      blockStorageStatistics.decrementVolumeCount();
      blockStorageStatistics.updateSpaceUsed(-(foundVolume.getSize() * StorageProperties.GB));
    }
  }
 catch (  EucalyptusCloudException e) {
    db.rollback();
    LOG.error(e);
  }
}

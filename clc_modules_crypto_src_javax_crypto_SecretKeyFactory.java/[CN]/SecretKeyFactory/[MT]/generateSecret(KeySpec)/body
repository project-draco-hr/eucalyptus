{
  if (serviceIterator == null) {
    return spi.engineGenerateSecret(keySpec);
  }
  Exception failure=null;
  SecretKeyFactorySpi mySpi=spi;
  do {
    try {
      return mySpi.engineGenerateSecret(keySpec);
    }
 catch (    Exception e) {
      if (failure == null) {
        failure=e;
      }
      mySpi=nextSpi(mySpi);
    }
  }
 while (mySpi != null);
  if (failure instanceof InvalidKeySpecException) {
    throw (InvalidKeySpecException)failure;
  }
  throw new InvalidKeySpecException("Could not generate secret key",failure);
}

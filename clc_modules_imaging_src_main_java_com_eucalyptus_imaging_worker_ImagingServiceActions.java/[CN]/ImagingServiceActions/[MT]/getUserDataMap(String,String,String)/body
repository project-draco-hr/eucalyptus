{
  Map<String,String> kvMap=new HashMap<String,String>();
  if (ntpServer != null)   kvMap.put("ntp_server",ntpServer);
  if (logServer != null)   kvMap.put("log_server",logServer);
  if (logServerPort != null)   kvMap.put("log_server_port",logServerPort);
  ServiceConfiguration service=Topology.lookup(Eucalyptus.class);
  kvMap.put("eucalyptus_port",Integer.toString(service.getPort()));
  kvMap.put("ec2_path",service.getServicePath());
  service=Topology.lookup(Imaging.class);
  kvMap.put("imaging_path",service.getServicePath());
  final StringBuilder sb=new StringBuilder();
  for (  String key : kvMap.keySet()) {
    String value=kvMap.get(key);
    sb.append(String.format("%s=%s;",key,value));
  }
  return sb.toString();
}

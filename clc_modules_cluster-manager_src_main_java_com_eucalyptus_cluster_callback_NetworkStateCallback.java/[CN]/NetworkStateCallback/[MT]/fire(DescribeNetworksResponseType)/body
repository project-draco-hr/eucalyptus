{
  for (  Network net : Networks.getInstance().listValues()) {
    net.trim(reply.getAddrsPerNet());
  }
  this.getSubject().getState().setAddressCapacity(reply.getAddrsPerNet());
  this.getSubject().getState().setMode(reply.getUseVlans());
  List<String> active=Lists.newArrayList();
  for (  NetworkInfoType netInfo : reply.getActiveNetworks()) {
    Network net=null;
    try {
      net=Networks.getInstance().lookup(netInfo.getUserName() + "-" + netInfo.getNetworkName());
    }
 catch (    NoSuchElementException e1) {
      net=new Network(netInfo.getUserName(),netInfo.getNetworkName(),netInfo.getUuid());
    }
    active.add(net.getName());
    if (net.getVlan().equals(Integer.valueOf(0)) && net.initVlan(netInfo.getVlan())) {
      NetworkToken netToken=new NetworkToken(this.getSubject().getName(),netInfo.getUserName(),netInfo.getNetworkName(),netInfo.getUuid(),netInfo.getVlan());
      netToken=net.addTokenIfAbsent(netToken);
    }
  }
  for (  Network net : Networks.getInstance().listValues(Networks.State.ACTIVE)) {
    net.trim(reply.getAddrsPerNet());
  }
  List<Cluster> ccList=Clusters.getInstance().listValues();
  int ccNum=ccList.size();
  for (  Cluster c : ccList) {
    ccNum-=c.getState().getMode();
  }
}

{
  ConcurrentNavigableMap<String,Address> unusedAddresses=Addresses.getInstance().getDisabledMap();
  if (unusedAddresses.size() < count)   throw new NotEnoughResourcesAvailable("Not enough resources available: addresses (try --addressing private)");
  List<Address> addressList=Lists.newArrayList();
  for (int i=0; i < count; i++) {
    Map.Entry<String,Address> addressEntry=unusedAddresses.pollFirstEntry();
    if (addressEntry != null) {
      Address addr=addressEntry.getValue();
      addressList.add(addr);
    }
 else {
      for (      Address a : addressList) {
        unusedAddresses.putIfAbsent(a.getName(),a);
      }
      throw new NotEnoughResourcesAvailable("Not enough resources available: addresses (try --addressing private)");
    }
  }
  return addressList;
}

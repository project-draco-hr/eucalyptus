{
  int allocatedCount=0;
  for (  Address allocatedAddr : Addresses.getInstance().listValues()) {
    if (allocatedAddr.isSystemAllocated()) {
      allocatedCount++;
      if (edu.ucsb.eucalyptus.util.EucalyptusProperties.getSystemConfiguration().isDoDynamicPublicAddresses() && !allocatedAddr.isAssigned() && !allocatedAddr.isPending()) {
        LOG.debug("Deallocating unassigned public address in dynamic public addressing mode: " + allocatedAddr.getName());
        allocatedAddr.release();
      }
    }
  }
  return allocatedCount;
}

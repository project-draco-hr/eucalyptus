{
  try {
    Account blockstorageAccount=Accounts.lookupAccountByName(StorageProperties.BLOCKSTORAGE_ACCOUNT);
    Role role=blockstorageAccount.lookupRoleByName("S3Access");
    SecurityToken token=SecurityTokenManager.issueSecurityToken(role,(int)TimeUnit.HOURS.toSeconds(1));
    s3Client=new S3Client(new BasicSessionCredentials(token.getAccessKeyId(),token.getSecretKey(),token.getToken()),false);
    s3Client.setUsePathStyle(true);
    s3Client.setS3Endpoint(StorageProperties.WALRUS_URL);
  }
 catch (  AuthException ex) {
    LOG.error("Something went really wrong. Block storage account does not exist or have an associated role.");
    LOG.error(ex,ex);
  }
}

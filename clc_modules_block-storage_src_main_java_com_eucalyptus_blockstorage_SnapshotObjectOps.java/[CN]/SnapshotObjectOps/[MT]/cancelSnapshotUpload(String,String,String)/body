{
  LOG.debug("Cancelling upload of snapshot " + snapshotId + " to objectstorage: bucket="+ bucket+ ", key="+ key);
  refreshOsgURI();
  try {
    if (checkSnapshotExists(bucket,key)) {
      deleteSnapshot(bucket,key);
    }
 else {
      new SnapshotUploader(snapshotId,bucket,key,s3Client).cancelUpload();
    }
  }
 catch (  Exception ex) {
    LOG.warn("Failed to cancel of snapshot " + snapshotId + " to objectstorage: bucket="+ bucket+ ", key="+ key,ex);
    throw new EucalyptusCloudException(ex);
  }
}

{
  return regionDispatchAndReduce(new NonNullFunction<IdentityProvider,Either<AuthException,UserPrincipal>>(){
    @Nonnull @Override public Either<AuthException,UserPrincipal> apply(    final IdentityProvider identityProvider){
      try {
        return Either.right(identityProvider.lookupPrincipalByCanonicalId(canonicalId));
      }
 catch (      AuthException e) {
        return Either.left(e);
      }
    }
  }
);
}

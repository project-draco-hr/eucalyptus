{
  if (!(Bootstrap.isFinished() && Topology.isEnabled(Eucalyptus.class)))   return;
  if (emi != null) {
    try {
      final List<ImageDetails> images=EucalyptusActivityTasks.getInstance().describeImages(Lists.newArrayList(emi));
      if (images == null || images.size() <= 0)       throw new EucalyptusCloudException("No such EMI is found in the system");
      if (!images.get(0).getImageId().toLowerCase().equals(emi.toLowerCase()))       throw new EucalyptusCloudException("No such EMI is found in the system");
    }
 catch (    final EucalyptusCloudException ex) {
      throw ex;
    }
catch (    final Exception ex) {
      throw new EucalyptusCloudException("Failed to verify EMI in the system");
    }
  }
  if (instanceType != null) {
    ;
  }
  if (keyname != null && !keyname.equals("")) {
    try {
      final List<DescribeKeyPairsResponseItemType> keypairs=EucalyptusActivityTasks.getInstance().describeKeyPairs(Lists.newArrayList(keyname));
      if (keypairs == null || keypairs.size() <= 0)       throw new EucalyptusCloudException("No such keypair is found in the system");
      if (!keypairs.get(0).getKeyName().equals(keyname))       throw new EucalyptusCloudException("No such keypair is found in the system");
    }
 catch (    final EucalyptusCloudException ex) {
      throw ex;
    }
catch (    final Exception ex) {
      throw new EucalyptusCloudException("Failed to verify the keyname in the system");
    }
  }
}

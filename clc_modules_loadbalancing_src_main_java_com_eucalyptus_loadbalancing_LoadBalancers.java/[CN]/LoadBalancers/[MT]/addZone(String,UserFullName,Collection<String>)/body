{
  LoadBalancer lb=null;
  try {
    lb=LoadBalancers.getLoadbalancer(ownerFullName,lbName);
  }
 catch (  Exception ex) {
    throw new AccessPointNotFoundException();
  }
  final EntityTransaction db=Entities.get(LoadBalancerZone.class);
  for (  String zone : zones) {
    try {
      final LoadBalancerZone sample=LoadBalancerZone.named(lb,zone);
      final LoadBalancerZone exist=Entities.uniqueResult(sample);
      LOG.warn("existing zone is found: " + exist);
      db.commit();
    }
 catch (    NoSuchElementException ex) {
      final LoadBalancerZone newZone=LoadBalancerZone.named(lb,zone);
      Entities.persist(newZone);
      db.commit();
    }
catch (    Exception ex) {
      db.rollback();
      LOG.error("failed to persist the zone " + zone,ex);
    }
  }
}

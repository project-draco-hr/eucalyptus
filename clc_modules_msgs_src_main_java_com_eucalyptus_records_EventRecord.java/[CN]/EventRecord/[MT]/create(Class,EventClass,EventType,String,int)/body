{
  BaseMessage msg=tryForMessage();
  StackTraceElement[] stack=Thread.currentThread().getStackTrace();
  StackTraceElement ste=stack[dist + 3 < stack.length ? dist + 3 : stack.length - 1];
  FullName userFn=Bootstrap.isFinished() ? FakePrincipals.NOBODY_USER_ERN : FakePrincipals.SYSTEM_USER_ERN;
  try {
    Context ctx=Contexts.lookup(msg.getCorrelationId());
    userFn=ctx.getUserFullName();
  }
 catch (  Exception ex) {
  }
  return new LogFileRecord(eventClass,eventName,component,ste,userFn.toString(),msg.getCorrelationId(),other);
}

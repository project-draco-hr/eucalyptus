{
  EntityTransaction db=Entities.get(AlarmEntity.class);
  try {
    Criteria criteria=Entities.createCriteria(AlarmEntity.class);
    criteria=criteria.setProjection(Projections.rowCount());
    if (accountId != null) {
      criteria=criteria.add(Restrictions.eq("accountId",accountId));
    }
    return (Long)criteria.uniqueResult();
  }
 catch (  RuntimeException ex) {
    Logs.extreme().error(ex,ex);
    throw ex;
  }
 finally {
    db.rollback();
  }
}

{
  return new Function<VmVolumeAttachment,AttachedVolume>(){
    @Override public AttachedVolume apply(    VmVolumeAttachment vol){
      if (vm == null) {
        return new AttachedVolume(vol.getVolumeId(),vol.getVmInstance().getInstanceId(),vol.getDevice(),vol.getRemoteDevice());
      }
 else {
        return new AttachedVolume(vol.getVolumeId(),vm.getInstanceId(),vol.getDevice(),vol.getRemoteDevice());
      }
    }
  }
;
}

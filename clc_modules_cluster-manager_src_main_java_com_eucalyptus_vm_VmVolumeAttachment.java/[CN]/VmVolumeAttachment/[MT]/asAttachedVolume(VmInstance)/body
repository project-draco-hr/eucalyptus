{
  return new Function<VmVolumeAttachment,AttachedVolume>(){
    @Override public AttachedVolume apply(    VmVolumeAttachment vol){
      AttachedVolume attachment=null;
      if (vm == null) {
        attachment=new AttachedVolume(vol.getVolumeId(),vol.getVmInstance().getInstanceId(),vol.getDevice(),vol.getRemoteDevice());
      }
 else {
        attachment=new AttachedVolume(vol.getVolumeId(),vm.getInstanceId(),vol.getDevice(),vol.getRemoteDevice());
      }
      attachment.setAttachTime(vol.getAttachTime());
      return attachment;
    }
  }
;
}

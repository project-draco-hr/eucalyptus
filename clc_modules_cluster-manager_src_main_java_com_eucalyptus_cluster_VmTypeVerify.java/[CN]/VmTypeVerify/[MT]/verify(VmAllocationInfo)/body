{
  String instanceType=vmAllocInfo.getRequest().getInstanceType();
  VmType v=VmTypes.getVmType((instanceType == null) ? "m1.small" : instanceType);
  if (v == null) {
    throw new EucalyptusCloudException("instance type does not exist: " + vmAllocInfo.getRequest().getInstanceType());
  }
  vmAllocInfo.setVmTypeInfo(v.getAsVmTypeInfo());
  return vmAllocInfo;
}

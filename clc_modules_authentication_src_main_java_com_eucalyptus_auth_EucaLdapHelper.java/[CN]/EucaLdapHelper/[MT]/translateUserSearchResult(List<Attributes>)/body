{
  List<User> users=Lists.newArrayList();
  for (  Attributes attrs : results) {
    List<Object> entities=EucaLdapMapper.attributeToEntity(attrs,UserEntity.class,UserInfo.class,LdapUserGroups.class);
    int size=entities.size();
    if (size > 0 && size < 4) {
      UserEntity user=(UserEntity)entities.get(0);
      UserInfo info=(size > 1) ? (UserInfo)entities.get(1) : null;
      LdapUserGroups groups=(size > 2) ? (LdapUserGroups)entities.get(2) : null;
      LdapWrappedUser wrapped=new LdapWrappedUser(user,info,groups);
      users.add(wrapped);
    }
 else {
      LOG.debug("Got invalid mapping result with " + size + " objects for "+ attrs.toString());
    }
  }
  if (users.size() < 1) {
    throw new EntryNotFoundException("Final search result is empty");
  }
  return users;
}

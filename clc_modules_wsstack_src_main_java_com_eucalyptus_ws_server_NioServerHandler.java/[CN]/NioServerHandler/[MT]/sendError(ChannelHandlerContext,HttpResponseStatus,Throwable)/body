{
  Logs.exhaust().error(t,t);
  final HttpResponse response=new DefaultHttpResponse(HttpVersion.HTTP_1_1,status);
  response.setHeader(HttpHeaders.Names.CONTENT_TYPE,"text/plain; charset=UTF-8");
  response.setContent(ChannelBuffers.copiedBuffer(Binding.createRestFault(status.toString(),t.getMessage(),Exceptions.createFaultDetails(t)),"UTF-8"));
  ChannelFuture writeFuture=Channels.future(ctx.getChannel());
  writeFuture.addListener(ChannelFutureListener.CLOSE);
  if (ctx.getChannel().isConnected()) {
    Channels.write(ctx,writeFuture,response);
  }
}

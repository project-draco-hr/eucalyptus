{
  while (true) {
    try {
      PrintWriter out=new PrintWriter(new FileWriter(BaseDirectory.LOG.getChildFile("db-stats"),true));
      LOG.info("Number of db aliases = " + ((ProxoolFacade.getAliases() != null) ? -1 : ProxoolFacade.getAliases().length));
      for (      String alias : ProxoolFacade.getAliases()) {
        ConnectionPoolDefinitionIF definition=ProxoolFacade.getConnectionPoolDefinition(alias);
        SnapshotIF statistics=ProxoolFacade.getSnapshot(alias,true);
        out.println("alias=" + definition.getAlias() + ",maxConnectionCount="+ definition.getMaximumConnectionCount());
        out.println("activeConnectionCount=" + statistics.getActiveConnectionCount() + ",availableConnectionCount="+ statistics.getAvailableConnectionCount()+ ",connectionCount="+ statistics.getConnectionCount());
      }
      out.close();
    }
 catch (    Exception ex) {
      LOG.error(ex);
    }
    try {
      Thread.sleep(POLL_TIME);
    }
 catch (    InterruptedException ex) {
      LOG.warn("Polling thread interrupted");
    }
  }
}

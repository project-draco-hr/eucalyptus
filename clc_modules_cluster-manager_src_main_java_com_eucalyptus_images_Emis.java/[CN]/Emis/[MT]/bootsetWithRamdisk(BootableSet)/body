{
  String ramdiskId=determineRamdiskId(bootSet);
  LOG.debug("Determined the appropriate ramdiskId to be " + ramdiskId + " for "+ bootSet.toString());
  if (ramdiskId == null) {
    return bootSet;
  }
 else {
    try {
      RamdiskImageInfo ramdisk=Lookups.doPrivileged(ramdiskId,LookupRamdisk.INSTANCE);
      return new TrifectaBootableSet(bootSet.getMachine(),bootSet.getKernel(),ramdisk);
    }
 catch (    AuthException ex) {
      LOG.error(ex,ex);
      throw new EucalyptusCloudException(ex);
    }
catch (    IllegalContextAccessException ex) {
      LOG.error(ex,ex);
      throw new EucalyptusCloudException(ex);
    }
catch (    NoSuchElementException ex) {
      LOG.error(ex,ex);
      throw new EucalyptusCloudException(ex);
    }
catch (    PersistenceException ex) {
      LOG.error(ex,ex);
      throw new EucalyptusCloudException(ex);
    }
  }
}

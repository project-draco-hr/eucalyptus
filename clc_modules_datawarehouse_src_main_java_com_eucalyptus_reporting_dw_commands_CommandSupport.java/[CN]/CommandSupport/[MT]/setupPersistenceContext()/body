{
  final Properties properties=new Properties();
  try {
    properties.load(CommandSupport.class.getResourceAsStream("../datawarehouse_persistence.properties"));
  }
 catch (  IOException e) {
    throw Exceptions.toUndeclared(e);
  }
  properties.setProperty("jdbc-0.proxool.driver-url",String.format("jdbc:postgresql://%s:%s/%s%s",arguments.getArgument("db-host","localhost"),arguments.getArgument("db-port","5432"),arguments.getArgument("db-name","eucalyptus_reporting"),arguments.hasArgument("db-ssl") ? "?ssl=true&sslfactory=com.eucalyptus.postgresql.PostgreSQLSSLSocketFactory" : ""));
  properties.setProperty("jdbc-0.user",arguments.getArgument("db-user","eucalyptus"));
  properties.setProperty("jdbc-0.password",arguments.getArgument("db-pass",""));
  try {
    PropertyConfigurator.configure(properties);
  }
 catch (  ProxoolException e) {
    throw Exceptions.toUndeclared(e);
  }
  Ejb3Configuration config=new Ejb3Configuration();
  config.setProperties(properties);
  config.addPackage(ReportingUser.class.getPackage().getName());
  config.addPackage(ReportingEventSupport.class.getPackage().getName());
  PersistenceContexts.registerPersistenceContext("eucalyptus_reporting",config);
}

{
  final DescribeAccountsResponseType response=request.getReply();
  final DescribeAccountsResult result=new DescribeAccountsResult();
  try {
    final AccountIdentifiers accountIdentifiers;
    if (request.getAlias() != null) {
      accountIdentifiers=identityProvider.lookupAccountIdentifiersByAlias(request.getAlias());
    }
 else     if (request.getCanonicalId() != null) {
      accountIdentifiers=identityProvider.lookupAccountIdentifiersByCanonicalId(request.getCanonicalId());
    }
 else {
      accountIdentifiers=null;
    }
    final ArrayList<Account> accounts=Lists.newArrayList();
    if (accountIdentifiers != null) {
      accounts.add(TypeMappers.transform(accountIdentifiers,Account.class));
    }
    result.setAccounts(accounts);
  }
 catch (  AuthException e) {
    throw handleException(e);
  }
  response.setDescribeAccountsResult(result);
  return response;
}

def _walk_recursive(paths, fn, *params):
    symlinks = []
    for path in paths:
        fn(path, *params)
        for (dirpath, dirs, files) in os.walk(path):
            for d in dirs:
                fullpath = os.path.join(dirpath, d)
                if os.path.islink(fullpath):
                    symlinks.append(fullpath)
                else:
                    fn(fullpath, *params)
            for f in files:
                fn(os.path.join(dirpath, f), *params)
    return symlinks

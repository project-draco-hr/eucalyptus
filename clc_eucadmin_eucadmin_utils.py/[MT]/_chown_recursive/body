def _chown_recursive(paths, uid, gid):
    symlinks = []
    for path in paths:
        os.chown(path, uid, gid)
        for (dirpath, dirs, files) in os.walk(path):
            for d in dirs:
                fullpath = os.path.join(dirpath, d)
                if os.path.islink(fullpath):
                    symlinks.append(fullpath)
                else:
                    os.chown(fullpath, uid, gid)
            for f in files:
                os.chown(os.path.join(dirpath, f), uid, gid)
    return symlinks

{
  try {
    VmInstance vm=VmInstances.getInstance().lookup(msg.getInstanceId());
    VmState vmState=vm.getState();
    if (!VmState.RUNNING.equals(vmState) && !VmState.PENDING.equals(vmState)) {
      throw new EucalyptusClusterException("Ignoring assignment to a vm which is not running: " + msg);
    }
 else {
      LOG.debug("Assign [" + msg.getSource() + "]  => ["+ msg.getDestination()+ "]");
      this.parent.getNetworkConfig().setIgnoredPublicIp(msg.getSource());
    }
  }
 catch (  Exception e) {
    LOG.debug(e,e);
  }
}

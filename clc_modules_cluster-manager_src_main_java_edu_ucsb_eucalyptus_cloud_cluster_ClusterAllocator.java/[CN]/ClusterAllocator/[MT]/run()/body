{
  this.state=State.CREATE_NETWORK;
  while (!this.state.equals(State.FINISHED)) {
    try {
      this.queueEvents();
switch (this.state) {
case CREATE_NETWORK:
        this.setState(State.CREATE_NETWORK_RULES);
      break;
case CREATE_NETWORK_RULES:
    this.setState(State.CREATE_VMS);
  break;
case CREATE_VMS:
this.setState(State.ASSIGN_ADDRESSES);
break;
case ASSIGN_ADDRESSES:
this.setState(State.FINISHED);
break;
case ROLLBACK:
this.setState(State.FINISHED);
break;
}
this.clearQueue();
}
 catch (Throwable e) {
LOG.error(e,e);
}
}
}

{
  for (  QueuedEvent event : this.msgMap.get(this.state)) {
    if (event.getCallback() instanceof MultiClusterCallback) {
      MultiClusterCallback callback=(MultiClusterCallback)event.getCallback();
      callback.fireEventAsyncToAllClusters((EucalyptusMessage)event.getEvent());
      callback.waitForEvent();
    }
 else {
      this.pendingEvents.add(event);
      this.cluster.getMessageQueue().enqueue(event);
    }
  }
}

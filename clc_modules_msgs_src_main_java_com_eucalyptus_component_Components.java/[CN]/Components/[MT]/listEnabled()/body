{
  List<Component> components=Lists.newArrayList();
  if (Components.lookup(Eucalyptus.class).isAvailableLocally()) {
    for (    Component comp : Components.list()) {
      if (comp.getIdentity().isCloudLocal()) {
        components.add(comp);
      }
    }
  }
  for (  Component comp : Components.list()) {
    if (comp.isRunningLocally()) {
      if (!comp.getIdentity().isCloudLocal()) {
        components.add(comp);
      }
    }
  }
  return components;
}

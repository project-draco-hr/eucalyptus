def encode_character(self, immune, char):
    '\n        Encodes a character for safe use in an HTML entity field.\n        '
    if (char in immune):
        return char
    if (not codec.is_8bit(char)):
        return char
    if char.isalnum():
        return char
    if (codec.is_control_char(char) and (char != '\t') and (char != '\n') and (char != '\r')):
        return ' '
    entity_name = self.entity_values_to_names.get(ord(char), None)
    if (entity_name is not None):
        return (('&' + entity_name) + ';')
    hex_str = codec.get_hex_for_char(char).lower()
    return (('&#x' + hex_str) + ';')

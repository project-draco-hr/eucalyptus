{
  if (!Bootstrap.isOperational() || !enabled) {
    return false;
  }
 else   if ((RequestType.A.apply(query) || RequestType.AAAA.apply(query)) && query.getName().isAbsolute() && !DomainNames.isSystemSubdomain(query.getName())) {
    return true;
  }
 else   if (RequestType.PTR.apply(query) && !Subnets.isSystemManagedAddress(DomainNameRecords.inAddrArpaToInetAddress(query.getName()))) {
    return true;
  }
  return false;
}

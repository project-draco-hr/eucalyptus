{
  for (  Bootstrapper bootstrap : BootstrapperDiscovery.getBootstrappers()) {
    Class<ComponentId> compType;
    String bc=bootstrap.getClass().getCanonicalName();
    Bootstrap.Stage stage=bootstrap.getBootstrapStage();
    compType=bootstrap.getProvides();
    if (Any.class.equals(compType)) {
      for (      Component c : Components.list()) {
        if (!bootstrap.checkLocal()) {
          EventRecord.here(Bootstrap.class,EventType.BOOTSTRAPPER_SKIPPED,currentStage.name(),bc,"DependsLocal",bootstrap.getDependsLocal().toString()).info();
        }
 else         if (!bootstrap.checkRemote()) {
          EventRecord.here(Bootstrap.class,EventType.BOOTSTRAPPER_SKIPPED,currentStage.name(),bc,"DependsRemote",bootstrap.getDependsRemote().toString()).info();
        }
 else {
          EventRecord.here(Bootstrap.class,EventType.BOOTSTRAPPER_ADDED,stage.name(),bc,"component=" + c.getName()).info();
          c.getBootstrapper().addBootstrapper(bootstrap);
        }
      }
    }
 else     if (Empyrean.class.equals(compType)) {
      if (!bootstrap.checkLocal()) {
        EventRecord.here(Bootstrap.class,EventType.BOOTSTRAPPER_SKIPPED,currentStage.name(),bc,"DependsLocal",bootstrap.getDependsLocal().toString()).info();
      }
 else       if (!bootstrap.checkRemote()) {
        EventRecord.here(Bootstrap.class,EventType.BOOTSTRAPPER_SKIPPED,currentStage.name(),bc,"DependsRemote",bootstrap.getDependsRemote().toString()).info();
      }
 else {
        EventRecord.here(Bootstrap.class,EventType.BOOTSTRAPPER_ADDED,stage.name(),bc,"component=" + compType.getSimpleName()).info();
        stage.addBootstrapper(bootstrap);
      }
    }
 else {
      ComponentId comp;
      try {
        comp=compType.newInstance();
        Components.lookup(comp).getBootstrapper().addBootstrapper(bootstrap);
      }
 catch (      InstantiationException ex) {
        LOG.error(ex,ex);
        System.exit(1);
      }
catch (      IllegalAccessException ex) {
        LOG.error(ex,ex);
        System.exit(1);
      }
    }
  }
}

{
  for (  Bootstrapper bootstrap : BootstrapperDiscovery.getBootstrappers()) {
    com.eucalyptus.bootstrap.Component comp;
    String bc=bootstrap.getClass().getCanonicalName();
    Bootstrap.Stage stage=bootstrap.getBootstrapStage();
    comp=bootstrap.getProvides();
    if (Components.delegate.any.equals(comp)) {
      for (      Component c : Components.list()) {
        if (!bootstrap.checkLocal()) {
          EventRecord.here(Bootstrap.class,EventType.BOOTSTRAPPER_SKIPPED,currentStage.name(),bc,"DependsLocal",comp.name(),"Component." + comp.name() + ".isLocal",comp.isLocal().toString()).info();
        }
 else         if (!bootstrap.checkRemote()) {
          EventRecord.here(Bootstrap.class,EventType.BOOTSTRAPPER_SKIPPED,currentStage.name(),bc,"DependsRemote",comp.name(),"Component." + comp.name() + ".isLocal",comp.isLocal().toString()).info();
        }
 else {
          c.getBootstrapper().addBootstrapper(bootstrap);
        }
      }
    }
 else     if (Components.delegate.bootstrap.equals(comp)) {
      EventRecord.here(Bootstrap.class,EventType.BOOTSTRAPPER_ADDED,stage.name(),bc,"component=" + comp.name()).info();
      if (!bootstrap.checkLocal()) {
        EventRecord.here(Bootstrap.class,EventType.BOOTSTRAPPER_SKIPPED,currentStage.name(),bc,"DependsLocal",comp.name(),"Component." + comp.name() + ".isLocal",comp.isLocal().toString()).info();
      }
 else       if (!bootstrap.checkRemote()) {
        EventRecord.here(Bootstrap.class,EventType.BOOTSTRAPPER_SKIPPED,currentStage.name(),bc,"DependsRemote",comp.name(),"Component." + comp.name() + ".isLocal",comp.isLocal().toString()).info();
      }
 else {
        stage.addBootstrapper(bootstrap);
      }
    }
 else {
      Components.lookup(comp).getBootstrapper().addBootstrapper(bootstrap);
    }
  }
}

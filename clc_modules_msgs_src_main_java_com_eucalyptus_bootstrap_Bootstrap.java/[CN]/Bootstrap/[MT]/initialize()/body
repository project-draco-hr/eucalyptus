{
  LOG.info(LogUtil.header("Initializing discoverable bootstrap resources."));
  Bootstrap.doDiscovery();
  LOG.info(LogUtil.header("Initializing component resources:"));
  for (  Component c : Components.list()) {
    Bootstrap.applyTransition(c,Component.Transition.INITIALIZING);
  }
  LOG.info(LogUtil.header("Building core local services."));
  final Component eucalyptusComp=Components.lookup("eucalyptus");
  Iterables.all(Components.list(),new Callback.Success<Component>(){
    @Override public void fire(    Component comp){
      if ((comp.isAvailableLocally() && comp.getComponentId().isAlwaysLocal()) || (eucalyptusComp.isLocal() && comp.getComponentId().isCloudLocal())) {
        try {
          comp.initService();
        }
 catch (        ServiceRegistrationException ex) {
          BootstrapException.throwFatal(ex.getMessage(),ex);
        }
      }
    }
  }
);
  LOG.info(LogUtil.header("Initializing bootstrappers."));
  Bootstrap.initBootstrappers();
  LOG.info(LogUtil.header("System ready: starting bootstrap."));
}

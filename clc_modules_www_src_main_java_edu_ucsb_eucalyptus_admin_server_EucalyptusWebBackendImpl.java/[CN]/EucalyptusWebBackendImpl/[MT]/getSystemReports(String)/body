{
  SessionInfo session=verifySession(sessionId);
  UserInfoWeb reqUser=verifyUser(session,session.getUserId(),true);
  if (!reqUser.isAdministrator()) {
    throw new Exception("Only admin can view reports.");
  }
  List<ReportInfo> reports=new ArrayList<ReportInfo>();
  for (  File report : SubDirectory.REPORTS.getFile().listFiles(new FilenameFilter(){
    @Override public boolean accept(    File arg0,    String arg1){
      return arg1.endsWith(".jrxml");
    }
  }
)) {
    String reportName=report.getName().replaceAll(".jrxml","");
    try {
      ReportCache reportCache=Reports.getReportManager(reportName);
      Integer lastPage=reportCache.getLength();
      reports.add(new ReportInfo(reportCache.getReportName(),reportName,lastPage));
    }
 catch (    Throwable e) {
      LOG.error(e,e);
      LOG.error("Failed to read report file: " + report.getCanonicalPath() + " because of: "+ e.getMessage());
    }
  }
  return reports;
}

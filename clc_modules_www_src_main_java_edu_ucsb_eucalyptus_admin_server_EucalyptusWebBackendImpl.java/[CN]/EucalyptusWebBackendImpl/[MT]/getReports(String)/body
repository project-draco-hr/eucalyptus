{
  SessionInfo session=verifySession(sessionId);
  UserInfoWeb reqUser=verifyUser(session,session.getUserId(),true);
  if (!reqUser.isAdministrator()) {
    throw new Exception("Only admin can view reports.");
  }
  List<ReportInfo> reports=new ArrayList<ReportInfo>();
  for (  Component c : Components.list()) {
    for (    Service s : c.getServices()) {
      if (!s.getServiceConfiguration().getComponent().isSingleton() || com.eucalyptus.bootstrap.Component.walrus.equals(s.getServiceConfiguration().getComponent())) {
        reports.add(new ReportInfo("service",s.getServiceConfiguration().getName() + "-" + s.getServiceConfiguration().getComponent().name(),"service-" + s.getServiceConfiguration().getComponent().name() + "@"+ s.getServiceConfiguration().getHostName(),1));
        if (com.eucalyptus.bootstrap.Component.cluster.equals(s.getServiceConfiguration().getComponent())) {
          Cluster cluster=Clusters.getInstance().lookup(s.getServiceConfiguration().getName());
          for (          String nodeTag : cluster.getNodeTags()) {
            reports.add(new ReportInfo("service",s.getServiceConfiguration().getName() + "-nc","service-nc@" + URI.create(nodeTag).getHost(),1));
          }
        }
      }
    }
  }
  for (  File report : SubDirectory.REPORTS.getFile().listFiles(new FilenameFilter(){
    @Override public boolean accept(    File arg0,    String arg1){
      return arg1.endsWith(".jrxml");
    }
  }
)) {
    String reportName=report.getName().replaceAll(".jrxml","");
    try {
      ReportCache reportCache=Reports.getReportManager(reportName,false);
      Integer lastPage=reportCache.getLength();
      reports.add(new ReportInfo(reportCache.getReportGroup(),reportCache.getReportName(),reportName,lastPage));
    }
 catch (    Throwable e) {
      LOG.error(e,e);
      LOG.error("Failed to read report file: " + report.getCanonicalPath() + " because of: "+ e.getMessage());
    }
  }
  return reports;
}

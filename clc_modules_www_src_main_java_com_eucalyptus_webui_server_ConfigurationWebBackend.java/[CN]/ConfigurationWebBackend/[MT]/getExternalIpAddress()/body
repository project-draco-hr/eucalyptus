{
  HttpClient httpClient=new HttpClient();
  String clientVersion=(String)httpClient.getParams().getDefaults().getParameter(HttpMethodParams.USER_AGENT);
  String javaVersion=System.getProperty("java.version");
  String osName=System.getProperty("os.name");
  String osArch=System.getProperty("os.arch");
  String eucaVersion=System.getProperty("euca.version");
  String extraVersion=BillOfMaterials.getExtraVersion();
  LOG.debug("Eucalyptus EXTRA VERSION: " + extraVersion);
  String userAgent=clientVersion + " (java " + javaVersion+ "; "+ osName+ " "+ osArch+ ") Eucalyptus/"+ eucaVersion;
  if (extraVersion != null) {
    userAgent=userAgent + "-" + extraVersion;
  }
  httpClient.getParams().setParameter(HttpMethodParams.USER_AGENT,userAgent);
  if (HttpServerBootstrapper.httpProxyHost != null && (HttpServerBootstrapper.httpProxyHost.length() > 0)) {
    String proxyHost=HttpServerBootstrapper.httpProxyHost;
    if (HttpServerBootstrapper.httpProxyPort != null && (HttpServerBootstrapper.httpProxyPort.length() > 0)) {
      int proxyPort=Integer.parseInt(HttpServerBootstrapper.httpProxyPort);
      httpClient.getHostConfiguration().setProxy(proxyHost,proxyPort);
    }
 else {
      httpClient.getHostConfiguration().setProxyHost(new ProxyHost(proxyHost));
    }
  }
}

{
  EntityWrapper<SystemConfiguration> db=EntityWrapper.get(SystemConfiguration.class);
  SystemConfiguration sysConf=null;
  try {
    sysConf=db.getUnique(new SystemConfiguration());
    deserializeSystemConfiguration(sysConf,input);
    db.commit();
    DNSProperties.update();
  }
 catch (  EucalyptusCloudException e) {
    try {
      LOG.debug(e,e);
      sysConf=new SystemConfiguration();
      deserializeSystemConfiguration(sysConf,input);
      db.persist(sysConf);
      db.commit();
      DNSProperties.update();
    }
 catch (    Exception e1) {
      LOG.error("Failed to set system configuration",e1);
      throw new EucalyptusServiceException("Failed to set system configuration",e1);
    }
  }
  try {
    ListenerRegistry.getInstance().fireEvent(new SystemConfigurationEvent(sysConf));
  }
 catch (  EventFailedException e) {
    LOG.debug(e,e);
  }
}

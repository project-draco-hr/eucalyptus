{
  if (!request.isAdministrator()) {
    throw new EucalyptusCloudException("You are not authorized to interact with this service.");
  }
  DescribePropertiesResponseType reply=request.getReply();
  List<Property> props=reply.getProperties();
  if (request.getProperties().isEmpty()) {
    for (    ConfigurableProperty entry : PropertyDirectory.getPropertyEntrySet()) {
      String value="********";
      if (!entry.getWidgetType().equals(ConfigurableFieldType.KEYVALUEHIDDEN))       value=entry.getValue();
      props.add(new Property(entry.getQualifiedName(),value,entry.getDescription()));
    }
  }
 else {
    Iterable<String> eucas=Iterables.filter(request.getProperties(),new Predicate<String>(){
      @Override public boolean apply(      String arg0){
        return arg0.matches("euca=.*");
      }
    }
);
    for (    String altValue : eucas) {
      props.add(new Property((altValue=altValue.replaceAll("euca=","")),"" + GroovyUtil.eval(altValue),altValue));
    }
    for (    ConfigurableProperty entry : PropertyDirectory.getPropertyEntrySet()) {
      if (request.getProperties().contains(entry.getQualifiedName())) {
        String value="********";
        if (!entry.getWidgetType().equals(ConfigurableFieldType.KEYVALUEHIDDEN))         value=entry.getValue();
        props.add(new Property(entry.getQualifiedName(),value,entry.getDescription()));
      }
    }
    for (    String entrySetName : PropertyDirectory.getPropertyEntrySetNames()) {
      if (request.getProperties().contains(entrySetName)) {
        String value="********";
        for (        ConfigurableProperty entry : PropertyDirectory.getPropertyEntrySet(entrySetName)) {
          if (!entry.getWidgetType().equals(ConfigurableFieldType.KEYVALUEHIDDEN)) {
            value=entry.getValue();
          }
          props.add(new Property(entry.getQualifiedName(),value,entry.getDescription()));
        }
      }
    }
  }
  return reply;
}

{
  EntityWrapper<SystemConfiguration> confDb=new EntityWrapper<SystemConfiguration>();
  SystemConfiguration conf=null;
  try {
    conf=confDb.getUnique(new SystemConfiguration());
  }
 catch (  EucalyptusCloudException e) {
    confDb.rollback();
    throw new EucalyptusCloudException("Failed to load system configuration",e);
  }
  confDb.commit();
  String walrusUrl=null;
  try {
    walrusUrl=(new URL(conf.getStorageUrl() + "/")).toString();
  }
 catch (  MalformedURLException e) {
    throw new EucalyptusCloudException("System is misconfigured: cannot parse Walrus URL.",e);
  }
  return conf;
}

{
  VmType input=deserializeVmType(row);
  if (input == null) {
    throw new EucalyptusServiceException("Invalid input");
  }
  Set<VmType> newVms=Sets.newTreeSet();
  for (  VmType v : VmTypes.list()) {
    if (v.getName().equals(input.getName())) {
      newVms.add(input);
    }
 else {
      newVms.add(v);
    }
  }
  try {
    for (    VmType newVm : newVms) {
      VmType vmType=VmTypes.lookup(newVm.getName());
      if (!vmType.equals(newVm)) {
        vmType.setDisk(newVm.getDisk());
        vmType.setCpu(newVm.getCpu());
        vmType.setMemory(newVm.getMemory());
        VmTypes.update(vmType);
      }
    }
  }
 catch (  NoSuchMetadataException e) {
    LOG.error("Failed to update VmType for row " + row,e);
    throw new EucalyptusServiceException(e.getMessage(),e);
  }
}

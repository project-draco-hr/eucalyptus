{
  ArrayList<Grant> grants=accessControlList.getGrants();
  if (grants.size() > 0) {
    for (    Grant grant : grants) {
      String permission=grant.getPermission();
      if (permission.equals("private")) {
        setFullControl(ownerId,grantInfos);
        continue;
      }
      GrantInfo grantInfo=new GrantInfo();
      Grantee grantee=grant.getGrantee();
      if (grantee.getCanonicalUser() != null) {
        String displayName=grantee.getCanonicalUser().getDisplayName();
        if (displayName == null || displayName.length() == 0) {
          String id=grantee.getCanonicalUser().getID();
          if (id == null || id.length() == 0)           continue;
          try {
            displayName=Users.lookupUserByAccessKeyId(id).getUserId();
          }
 catch (          AuthException e) {
            LOG.warn(e,e);
          }
          if (displayName == null)           continue;
        }
        grantInfo.setUserId(displayName);
      }
 else {
        grantInfo.setGrantGroup(grantee.getGroup().getUri());
      }
      if (permission.equals("FULL_CONTROL")) {
        grantInfo.setFullControl();
      }
 else       if (permission.equals("READ")) {
        grantInfo.setCanRead(true);
      }
 else       if (permission.equals("WRITE")) {
        grantInfo.setCanWrite(true);
      }
 else       if (permission.equals("READ_ACP")) {
        grantInfo.setCanReadACP(true);
      }
 else       if (permission.equals("WRITE_ACP")) {
        grantInfo.setCanWriteACP(true);
      }
      grantInfos.add(grantInfo);
    }
  }
 else {
    setFullControl(ownerId,grantInfos);
  }
}

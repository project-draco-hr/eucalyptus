{
  String returnValue="";
synchronized (this) {
    try {
      try {
        connect();
      }
 catch (      EucalyptusCloudException e) {
        LOG.error(e);
        return "";
      }
      writer.write("" + task.getCommand() + task.getEOFCommand());
      writer.flush();
      for (String line=null; (line=reader.readLine()) != null; ) {
        line=line + "\r";
        if (line.contains("" + task.getEOFCommand()))         break;
        returnValue+=line;
      }
    }
 catch (    IOException e) {
      LOG.error(e,e);
    }
 finally {
      try {
        if (reader != null) {
          reader.close();
          reader=null;
        }
        if (writer != null) {
          writer.close();
          writer=null;
        }
        if (channel != null) {
          channel.getSession().disconnect();
          channel.disconnect();
          channel=null;
        }
      }
 catch (      JSchException|IOException e) {
        LOG.error(e,e);
      }
    }
  }
  return returnValue;
}

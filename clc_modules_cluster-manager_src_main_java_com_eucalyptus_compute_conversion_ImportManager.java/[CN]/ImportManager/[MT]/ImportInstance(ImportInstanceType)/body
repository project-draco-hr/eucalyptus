{
  LOG.info(request);
  final ImportInstanceResponseType reply=request.getReply();
  ConversionTask task=new ConversionTask();
  ImportInstanceTaskDetails taskDetails=new ImportInstanceTaskDetails();
  final UserFullName ufn=Contexts.lookup().getUserFullName();
  for (  DiskImage diskImage : request.getDiskImageSet()) {
    final DiskImageDetail imageDetails=diskImage.getImage();
    final String manifestLocation=imageDetails.getImportManifestUrl();
    final String imageDescription=diskImage.getDescription();
    ImportInstanceVolumeDetail volumeDetail=new ImportInstanceVolumeDetail();
    volumeDetail.setBytesConverted(0L);
    volumeDetail.setDescription(imageDescription);
    volumeDetail.setAvailabilityZone("");
    volumeDetail.setVolume(new DiskImageVolumeDescription(diskImage.getVolume().getSize(),""));
    volumeDetail.setImage(new DiskImageDescription(imageDetails.getFormat(),imageDetails.getBytes(),imageDetails.getImportManifestUrl(),""));
    volumeDetail.setStatus(ConversionState.active.name());
    volumeDetail.setStatusMessage("Pending");
    taskDetails.getVolumes().add(volumeDetail);
  }
  String taskId=Crypto.generateId(request.getCorrelationId(),"import-i");
  final String instanceId=Crypto.generateId(request.getCorrelationId(),"i");
  final String reservationId=Crypto.generateId(request.getCorrelationId(),"r");
  final String imageId=Crypto.generateId(request.getCorrelationId(),"emi");
  task.setConversionTaskId(taskId);
  Date expiration=Dates.hoursFromNow(CONVERSION_EXPIRATION_TIMEOUT);
  task.setExpirationTime(expiration.toString());
  task.setState(ConversionState.active.name());
  task.setStatusMessage(LogUtil.dumpObject(request));
  taskDetails.setInstanceId(instanceId);
  taskDetails.setPlatform(request.getPlatform());
  taskDetails.setDescription(request.getDescription());
  task.setImportInstance(taskDetails);
  reply.setConversionTask(task);
  tasks.put(taskId,task);
  return reply;
}

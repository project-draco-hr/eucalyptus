{
  this.verifyOpen();
  try {
    this.delegate.commit();
  }
 catch (  final RuntimeException e) {
    if ((this.delegate != null) && this.delegate.isActive()) {
      this.delegate.rollback();
      LOG.debug(e,e);
    }
    throw e;
  }
 finally {
    this.cleanup();
  }
}

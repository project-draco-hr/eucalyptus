import os
from eucadmin.command import Command
OpenSSLCmd = 'openssl pkcs12 -in %s -name eucalyptus -name "eucalyptus" -password pass:eucalyptus  -passin pass:eucalyptus -passout pass:eucalyptus -nodes | grep -A30 "friendlyName: eucalyptus" | grep -A26 "BEGIN RSA" >  %s'
MySQLCmd = 'echo "select \n\t\tu.auth_user_token,\n\t\tk.auth_access_key_query_id, \n\t\tk.auth_access_key_key\n\tfrom (\n\t\tauth_access_key k \n\t\tjoin \n\t\t\tauth_user u on k.auth_access_key_owning_user=u.id \n\t\tjoin \n\t\t\tauth_group_has_users gu on u.id=gu.auth_user_id \n\t\tjoin\n\t\t\tauth_group g on gu.auth_group_id=g.id \n\t\tjoin \n\t\t\tauth_account a on g.auth_group_owning_account=a.id \n\t\t)\n\twhere \n\t\ta.auth_account_name=\'${1}\'\n\t\tand g.auth_group_name=\'_${2}\'\n\t\tand k.auth_access_key_active=1;\n        "  | mysql -u eucalyptus -P 8777 --protocol=TCP --password=%s eucalyptus_auth | tail -n1'
DBPassCmd = 'echo -n eucalyptus | openssl dgst -sha256 -sign %(EUCALYPTUS)s/var/lib/eucalyptus/keys/cloud-pk.pem -hex'
WGETCmd = 'wget --no-check-certificate "https://localhost:8443/getX509?account=%s&user=%s&code=%s" -O %s'
EucaP12File = '%(EUCALYPTUS)s/var/lib/eucalyptus/keys/euca.p12'
CloudPKFile = '%(EUCALYPTUS)s/var/lib/eucalyptus/keys/cloud-pk.pem'

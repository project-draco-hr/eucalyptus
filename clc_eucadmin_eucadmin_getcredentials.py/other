import os
import time
import boto.utils
from eucadmin.command import Command
OpenSSLCmd = 'openssl pkcs12 -in %s -name eucalyptus -name "eucalyptus" -password pass:eucalyptus  -passin pass:eucalyptus -passout pass:eucalyptus -nodes | grep -A30 "friendlyName: eucalyptus" | grep -A26 "BEGIN RSA" >  %s'
MySQLCmd = 'echo "select u.auth_user_token,k.auth_access_key_query_id,k.auth_access_key_key from (auth_access_key k join auth_user u on k.auth_access_key_owning_user=u.id join auth_group_has_users gu on u.id=gu.auth_user_id join auth_group g on gu.auth_group_id=g.id join auth_account a on g.auth_group_owning_account=a.id) where a.auth_account_name=\'%s\' and g.auth_group_name=\'_%s\' and k.auth_access_key_active=1;"  | mysql -u eucalyptus -P 8777 --protocol=TCP --password=%s eucalyptus_auth | tail -n1 | awk \'{print $1}\' '
DBPassCmd = 'echo -n eucalyptus | openssl dgst -sha256 -sign %(EUCALYPTUS)s/var/lib/eucalyptus/keys/cloud-pk.pem -hex'
GetCertURL = 'https://localhost:8443/getX509?account=%s&user=%s&code=%s'
EucaP12File = '%(EUCALYPTUS)s/var/lib/eucalyptus/keys/euca.p12'
CloudPKFile = '%(EUCALYPTUS)s/var/lib/eucalyptus/keys/cloud-pk.pem'

def query_mysql(self, query, num_retries=10):
    result = None
    i = 0
    while (i < num_retries):
        cmd = Command((query % (self.account, self.user, self.db_pass)))
        result = cmd.stdout.strip()
        if result:
            break
        print 'waiting for MySQL to respond'
        time.sleep(10)
        i += 1
    if (not result):
        raise ValueError('cannot find code in database')
    return result

def setup_query(self):
    self.token = None
    self.db_pass = None
    if ('euca_home' in self.request_params):
        self.euca_home = self.request_params['euca_home']
    elif ('EUCALYPTUS' in os.environ):
        self.euca_home = os.environ['EUCALYPTUS']
    elif os.path.exists(os.path.join(self.ServiceClass.InstallPath, 'var/lib/eucalyptus/keys/')):
        self.euca_home = self.ServiceClass.InstallPath
    else:
        raise ValueError('Unable to find EUCALYPTUS home')
    self.account = self.request_params['account']
    self.user = self.request_params['user']
    self.zipfile = self.request_params['zipfile']
    self.eucap12_file = (EucaP12File % self.euca_home)
    self.cloudpk_file = (CloudPKFile % self.euca_home)
    if (not self.check_cloudpk_file):
        self.gen_cloudpk_file()
    self.get_dbpass()

def build_parser():
    parser = argparse.ArgumentParser(description='Eucalyptus cloud validator')
    parser.add_argument('stage', choices=('preinstall', 'postinstall', 'register', 'monitor'), default='monitor', help='Which test stage to run (default: monitor)')
    parser.add_argument('-c', '--config-file', default=DEFAULT_CONFIG_FILE, help='The path to the eucadmin config')
    parser.add_argument('-C', '--component', default='CLC', help='The cloud component role(s) of this system.')
    parser.add_argument('-t', '--traverse', action='store_true', help='Traverse other components in the cloud (requires ssh credentials)')
    group = parser.add_mutually_exclusive_group()
    group.add_argument('-j', '--json', action='store_true', help='Output JSON-formatted results')
    group.add_argument('-q', '--quiet', action='store_true', help='No output; only a return code')
    parser.add_argument('-l', '--log-level', choices=LOGLEVELS, default='INFO', type=str.upper, help='Log level (default: INFO)')
    parser.add_argument('-s', '--subtask', action='store_true', help=argparse.SUPPRESS)
    return parser

{
  if (BootstrapArgs.isCloudController() && Bootstrap.isOperational()) {
    try {
      WalrusInfo wInfo=WalrusInfo.getWalrusInfo();
      long capacity=0;
      if (wInfo != null)       capacity=wInfo.getStorageMaxTotalCapacity();
      ListenerRegistry.getInstance().fireEvent(new ResourceAvailabilityEvent(StorageWalrus,new Availability(capacity,Math.max(0,capacity - (long)Math.ceil((double)WalrusUtil.countTotalObjectSize() / FileUtils.ONE_GB)))));
    }
 catch (    Exception ex) {
      logger.error(ex,ex);
    }
  }
}

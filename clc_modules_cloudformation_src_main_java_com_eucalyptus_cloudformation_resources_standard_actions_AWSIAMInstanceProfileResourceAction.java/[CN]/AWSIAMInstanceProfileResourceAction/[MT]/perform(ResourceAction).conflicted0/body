{
  AWSIAMInstanceProfileResourceAction action=(AWSIAMInstanceProfileResourceAction)resourceAction;
  ServiceConfiguration configuration=Topology.lookup(Euare.class);
  if (action.properties.getRoles() != null) {
    for (    String roleName : action.properties.getRoles()) {
      AddRoleToInstanceProfileType addRoleToInstanceProfileType=MessageHelper.createMessage(AddRoleToInstanceProfileType.class,action.info.getEffectiveUserId());
      addRoleToInstanceProfileType.setInstanceProfileName(action.info.getPhysicalResourceId());
      addRoleToInstanceProfileType.setRoleName(roleName);
      AsyncRequests.<AddRoleToInstanceProfileType,AddRoleToInstanceProfileResponseType>sendSync(configuration,addRoleToInstanceProfileType);
    }
  }
  return action;
}

{
  Account requestAccount=ctx.getAccount();
  if (Account.SYSTEM_ACCOUNT.equals(requestAccount.getName())) {
    if (delegate != null) {
      try {
        return Accounts.lookupAccountByName(delegate.getAccountName());
      }
 catch (      AuthException e) {
        throw new EuareException(HttpResponseStatus.NOT_FOUND,EuareException.NO_SUCH_ENTITY,"Can not find delegate account " + delegate.getAccountName());
      }
    }
  }
  return requestAccount;
}

{
  if (VmInstance.DEFAULT_IP.equals(this.getRequest().getDestination())) {
    VmInstance vm=VmInstances.getInstance().lookup(address.getInstanceId());
    String privAddr=vm.getPrivateAddress();
    if (VmInstance.DEFAULT_IP.equals(privAddr)) {
      throw new EucalyptusCloudException("BUG: Failing to assign address because the vm's private address is 0.0.0.0!: " + vm.toString());
    }
 else {
      this.getRequest().setDestination(privAddr);
    }
  }
  EventRecord.here(AssignAddressCallback.class,EventType.ADDRESS_ASSIGNING,Transition.assigning.toString(),address.toString()).debug();
}

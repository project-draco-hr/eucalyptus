{
  final EucalyptusRemoteFault remoteFault=Exceptions.findCause(e,EucalyptusRemoteFault.class);
  if (remoteFault != null) {
    final HttpResponseStatus status=Objects.firstNonNull(remoteFault.getStatus(),HttpResponseStatus.INTERNAL_SERVER_ERROR);
    final String code=remoteFault.getFaultCode();
    final String message=remoteFault.getFaultDetail();
switch (status.getCode()) {
case 400:
      throw new ImagingClientException(code,message);
case 403:
    throw new ImagingAuthorizationException(code,message);
case 409:
  throw new ImagingInvalidConfigurationException(code,message);
case 503:
throw new ImagingUnavailableException(message);
default :
throw new ImagingException(code,Role.Receiver,message);
}
}
}

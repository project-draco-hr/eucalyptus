{
  if (s == null) {
    clearSession();
  }
 else {
    this.session=s;
    if (persistent) {
      Date expiration=new Date(System.currentTimeMillis() + COOKIE_LIFE_IN_MS);
      Cookies.setCookie(SESSION_COOKIE_NAME,this.session.getId(),expiration,null,null,USE_SECURE_COOKIE);
    }
 else {
      Cookies.setCookie(SESSION_COOKIE_NAME,this.session.getId(),null,null,null,USE_SECURE_COOKIE);
    }
  }
}

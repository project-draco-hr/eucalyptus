{
  List<Integer> deviceNumbers=allocateDeviceNumbers();
  int majorNumber=deviceNumbers.get(0);
  int minorNumber=deviceNumbers.get(1);
  String absoluteLVName=lvmRootDirectory + PATH_SEPARATOR + vgName+ PATH_SEPARATOR+ lvName;
  int pid=exportManager.exportVolume(StorageProperties.iface,absoluteLVName,majorNumber,minorNumber);
  boolean success=false;
  String returnValue="";
  int timeout=300;
  if (pid > 0) {
    for (int i=0; i < 5; ++i) {
      returnValue=aoeStatus(pid);
      if (returnValue.length() == 0) {
        success=false;
        try {
          Thread.sleep(timeout);
        }
 catch (        InterruptedException ie) {
          LOG.error(ie);
        }
        timeout+=300;
      }
 else {
        success=true;
        break;
      }
    }
  }
  if (!success) {
    throw new EucalyptusCloudException("Could not export AoE device " + absoluteLVName + " iface: "+ StorageProperties.iface+ " pid: "+ pid+ " returnValue: "+ returnValue);
  }
  File vbladePidFile=new File(eucaHome + EUCA_VAR_RUN_PATH + "/vblade-"+ majorNumber+ minorNumber+ ".pid");
  try {
    FileOutputStream fileOutStream=new FileOutputStream(vbladePidFile);
    String pidString=String.valueOf(pid);
    fileOutStream.write(pidString.getBytes());
    fileOutStream.close();
  }
 catch (  Exception ex) {
    LOG.error("Could not write pid file vblade-" + majorNumber + minorNumber+ ".pid");
  }
  lvmVolumeInfo.setVbladePid(pid);
  lvmVolumeInfo.setMajorNumber(majorNumber);
  lvmVolumeInfo.setMinorNumber(minorNumber);
  return pid;
}

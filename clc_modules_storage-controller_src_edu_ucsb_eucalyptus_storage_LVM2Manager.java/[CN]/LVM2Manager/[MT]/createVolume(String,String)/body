{
  File volumeDir=new File(StorageProperties.storageRootDirectory);
  volumeDir.mkdirs();
  String vgName="vg-" + Hashes.getRandom(4);
  String lvName="lv-" + Hashes.getRandom(4);
  LVMVolumeInfo lvmVolumeInfo=new LVMVolumeInfo();
  int size=(int)(new File(volumePath).length() / StorageProperties.GB);
  String loDevName=createLoopback(volumePath);
  createLogicalVolume(loDevName,vgName,lvName);
  int vbladePid=exportVolume(lvmVolumeInfo,vgName,lvName);
  if (vbladePid < 0) {
    throw new EucalyptusCloudException();
  }
  lvmVolumeInfo.setVolumeId(volumeId);
  lvmVolumeInfo.setLoDevName(loDevName);
  lvmVolumeInfo.setPvName(loDevName);
  lvmVolumeInfo.setVgName(vgName);
  lvmVolumeInfo.setLvName(lvName);
  lvmVolumeInfo.setStatus(StorageProperties.Status.available.toString());
  lvmVolumeInfo.setSize(size);
  EntityWrapper<LVMVolumeInfo> db=new EntityWrapper<LVMVolumeInfo>();
  db.add(lvmVolumeInfo);
  db.commit();
  return size;
}

{
  boolean useHttps=false;
  if (S3ProviderConfiguration.getS3ProviderConfiguration().getS3UseHttps() != null && S3ProviderConfiguration.getS3ProviderConfiguration().getS3UseHttps()) {
    useHttps=true;
  }
  OsgInternalS3Client osgInternalS3Client=new OsgInternalS3Client(requestUser,useHttps);
  osgInternalS3Client.setS3Endpoint(upstreamEndpoint);
  osgInternalS3Client.setUsePathStyle(usePathStyle);
  return osgInternalS3Client;
}

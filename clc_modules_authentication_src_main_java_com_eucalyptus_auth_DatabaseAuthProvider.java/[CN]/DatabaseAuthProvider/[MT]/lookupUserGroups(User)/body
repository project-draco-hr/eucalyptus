{
  List<Group> userGroups=Lists.newArrayList();
  EntityWrapper<GroupEntity> db=Groups.getEntityWrapper();
  try {
    UserEntity userInfo=db.recast(UserEntity.class).getUnique(new UserEntity(user.getName()));
    for (    GroupEntity g : db.query(new GroupEntity())) {
      if (g.isMember(userInfo)) {
        userGroups.add(DatabaseWrappedGroup.newInstance(g));
      }
    }
    db.commit();
  }
 catch (  EucalyptusCloudException e) {
    LOG.debug(e,e);
    db.rollback();
  }
  return userGroups;
}

{
  List<Group> userGroups=Lists.newArrayList();
  EntityWrapper<UserGroupEntity> db=Groups.getEntityWrapper();
  try {
    UserInfo userInfo=db.recast(UserInfo.class).getUnique(UserInfo.named(user.getName()));
    for (    UserGroupEntity g : db.query(new UserGroupEntity())) {
      if (g.belongs(userInfo)) {
        userGroups.add(new DatabaseWrappedGroup(g));
      }
    }
    db.commit();
  }
 catch (  EucalyptusCloudException e) {
    LOG.debug(e,e);
    db.rollback();
  }
  return userGroups;
}

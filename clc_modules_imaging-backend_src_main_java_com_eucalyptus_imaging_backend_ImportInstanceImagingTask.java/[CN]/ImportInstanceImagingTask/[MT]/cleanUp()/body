{
  if (getCleanUpDone())   return;
  boolean cleanedAllVolumes=true;
  final ImportInstanceTaskDetails instanceDetails=this.getTask().getImportInstance();
  if (instanceDetails.getVolumes() == null)   return;
  for (  final ImportInstanceVolumeDetail volumeDetail : instanceDetails.getVolumes()) {
    if (volumeDetail.getVolume() != null && volumeDetail.getVolume().getId() != null) {
      try {
        String volumeId=volumeDetail.getVolume().getId();
        Ec2Client.getInstance().deleteTags(null,Lists.newArrayList(volumeId),Lists.newArrayList(ImagingTaskStateManager.VOLUME_STATUS_TAG));
        final List<Volume> eucaVolumes=Ec2Client.getInstance().describeVolumes(this.getOwnerUserId(),Lists.newArrayList(volumeId));
        if (eucaVolumes.size() != 0) {
          Ec2Client.getInstance().deleteVolume(this.getOwnerUserId(),volumeId);
        }
      }
 catch (      final Exception ex) {
        LOG.warn(String.format("Failed to delete the volume %s for import task %s",volumeDetail.getVolume().getId(),this.getDisplayName()));
        cleanedAllVolumes=false;
      }
    }
  }
  if (cleanedAllVolumes)   setCleanUpDone(true);
}

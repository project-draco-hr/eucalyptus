{
  final CheckedListenableFuture<P> resultFuture=Futures.newGenericeFuture();
  final Callable<CheckedListenableFuture<P>> chainingCallable=new Callable<CheckedListenableFuture<P>>(){
    @Override public CheckedListenableFuture<P> call() throws Exception {
      try {
        final CheckedListenableFuture<P> firstFuture=firstCall.call();
        firstFuture.addListener(new Runnable(){
          @Override public void run(){
            try {
              final P val=firstFuture.get();
              if (secondCall == null) {
                resultFuture.set(val);
              }
 else {
                try {
                  final CheckedListenableFuture<P> secondFuture=secondCall.call();
                  secondFuture.addListener(new Runnable(){
                    @Override public void run(){
                      try {
                        resultFuture.set(secondFuture.get());
                      }
 catch (                      final ExecutionException ex) {
                        resultFuture.setException(ex);
                      }
catch (                      final InterruptedException ex) {
                        Automata.LOG.error("BUG BUG BUG Interrupted calling .get() on a Future which isDone(): " + ex.getMessage(),ex);
                        resultFuture.setException(ex);
                      }
                    }
                  }
);
                }
 catch (                final Exception ex) {
                  resultFuture.setException(ex);
                }
              }
            }
 catch (            final ExecutionException ex) {
              resultFuture.setException(ex.getCause());
            }
catch (            final InterruptedException ex) {
              Automata.LOG.error("BUG BUG BUG Interrupted calling .get() on a Future which isDone(): " + ex.getMessage(),ex);
              resultFuture.setException(ex);
            }
          }
        }
);
      }
 catch (      final Exception ex) {
        Automata.LOG.error(ex,ex);
        resultFuture.setException(ex);
      }
      return resultFuture;
    }
  }
;
  return chainingCallable;
}

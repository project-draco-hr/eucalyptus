{
  final long stopRequestedTime=pendingStopTimestamp.get();
  if (stopRequestedTime > 0 && stopRequestedTime + PENDING_STOP_TIMEOUT < System.currentTimeMillis()) {
synchronized (startStopSync) {
      if (pendingStopTimestamp.compareAndSet(stopRequestedTime,0)) {
        try {
          logger.info("Stopping cloudformation workflow client");
          WorkflowClientManager.stop();
        }
 catch (        Exception e) {
          logger.error("Error stopping cloudformation workflow client",e);
        }
      }
    }
  }
}

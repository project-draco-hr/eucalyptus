{
  logRequest(request);
  Bucket bucket=null;
  try {
    bucket=BucketManagers.getInstance().get(request.getBucket(),false,null);
  }
 catch (  NoSuchElementException e) {
    throw new NoSuchBucketException(request.getBucket());
  }
catch (  Exception e) {
    LOG.error("Internal error finding bucket " + request.getBucket(),e);
    throw new InternalErrorException(request.getBucket());
  }
  if (OSGAuthorizationHandler.getInstance().operationAllowed(request,bucket,null,0)) {
    HeadBucketResponseType reply=(HeadBucketResponseType)request.getReply();
    reply.setBucket(bucket.getBucketName());
    reply.setStatus(HttpResponseStatus.OK);
    reply.setStatusMessage("OK");
    reply.setTimestamp(new Date());
    return reply;
  }
 else {
    throw new AccessDeniedException(request.getBucket());
  }
}

{
  try {
    final HttpRequest request=(HttpRequest)e.getMessage();
    if (Logs.isExtrrreeeme() && request instanceof MappingHttpMessage) {
      Logs.extreme().trace(((MappingHttpMessage)request).logMessage());
    }
    final ChannelPipeline newPipeline=StackConfiguration.STATISTICS ? Channels.pipeline() : ctx.getPipeline();
    FilteredPipeline filteredPipeline=Pipelines.find(request);
    if (this.pipeline.compareAndSet(null,filteredPipeline)) {
      if (StackConfiguration.ASYNC_PIPELINE) {
        newPipeline.addLast("async-pipeline-execution-handler",Handlers.executionHandler());
      }
      this.pipeline.get().unroll(newPipeline);
      if (StackConfiguration.ASYNC_OPERATIONS) {
        newPipeline.addLast("async-pipeline-execution-handler",Handlers.executionHandler());
      }
      Handlers.addSystemHandlers(newPipeline);
      if (StackConfiguration.STATISTICS) {
        for (        Map.Entry<String,ChannelHandler> entry : Handlers.wrapPipeline(newPipeline).toMap().entrySet()) {
          ctx.getPipeline().addLast(entry.getKey(),entry.getValue());
        }
      }
    }
  }
 catch (  DuplicatePipelineException e1) {
    LOG.error("This is a BUG: " + e1,e1);
    throw e1;
  }
catch (  NoAcceptingPipelineException e2) {
    throw e2;
  }
}

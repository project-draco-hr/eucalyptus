{
  Context ctx;
  if ((ctx=tlContext.get()) != null) {
    return Optional.fromNullable(ctx.getCorrelationId());
  }
  MuleMessage muleMsg;
  if (RequestContext.getEvent() != null && RequestContext.getEvent().getMessage() != null) {
    muleMsg=RequestContext.getEvent().getMessage();
  }
 else   if (RequestContext.getEventContext() != null && RequestContext.getEventContext().getMessage() != null) {
    muleMsg=RequestContext.getEventContext().getMessage();
  }
 else {
    muleMsg=null;
  }
  final Object o=muleMsg == null ? null : muleMsg.getPayload();
  if (o instanceof BaseMessage) {
    return Optional.fromNullable(((BaseMessage)o).getCorrelationId());
  }
  if (o instanceof HasRequest) {
    return Optional.fromNullable(((HasRequest)o).getRequest().getCorrelationId());
  }
  return Optional.absent();
}

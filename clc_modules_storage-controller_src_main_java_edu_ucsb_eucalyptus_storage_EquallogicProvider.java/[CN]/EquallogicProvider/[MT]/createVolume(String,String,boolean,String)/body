{
  if (!enabled) {
    checkConnection();
    if (!enabled) {
      LOG.error("Unable to create user " + TARGET_USERNAME + " on target. Will not run command. ");
      return null;
    }
  }
  if (locallyCreated) {
    try {
      String returnValue=execCommand("stty hardwrap off\rvolume select " + sourceVolume + " snapshot select "+ snapshotId+ " clone "+ volumeId+ "\r");
      String targetName=matchPattern(returnValue,VOLUME_CREATE_PATTERN);
      if (targetName != null) {
        returnValue=execCommand("volume select " + volumeId + " access create username "+ TARGET_USERNAME+ "\r");
        if (returnValue.length() == 0) {
          LOG.error("Unable to set access for volume: " + volumeId);
          return null;
        }
      }
      return targetName;
    }
 catch (    EucalyptusCloudException e) {
      LOG.error(e);
      return null;
    }
  }
 else {
    try {
      String returnValue=execCommand("stty hardwrap off\rvolume select " + snapshotId + " offline\rvolume select "+ snapshotId+ " clone "+ volumeId+ "\r");
      String targetName=matchPattern(returnValue,VOLUME_CREATE_PATTERN);
      if (targetName != null) {
        returnValue=execCommand("volume select " + volumeId + " access create username "+ TARGET_USERNAME+ "\r");
        if (returnValue.length() == 0) {
          LOG.error("Unable to set access for volume: " + volumeId);
          return null;
        }
      }
      return targetName;
    }
 catch (    EucalyptusCloudException e) {
      LOG.error(e);
      return null;
    }
  }
}

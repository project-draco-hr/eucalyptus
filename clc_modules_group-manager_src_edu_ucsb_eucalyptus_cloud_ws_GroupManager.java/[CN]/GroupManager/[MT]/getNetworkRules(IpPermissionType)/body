{
  List<NetworkRule> ruleList=new ArrayList<NetworkRule>();
  if (!ipPerm.getGroups().isEmpty()) {
    List<NetworkPeer> networkPeers=new ArrayList<NetworkPeer>();
    for (    UserIdGroupPairType peerInfo : ipPerm.getGroups()) {
      networkPeers.add(new NetworkPeer(peerInfo.getUserId(),peerInfo.getGroupName()));
    }
    NetworkRule rule=new NetworkRule(ipPerm.getIpProtocol(),ipPerm.getFromPort(),ipPerm.getToPort());
    rule.getNetworkPeers().addAll(networkPeers);
    ruleList.add(rule);
  }
 else   if (!ipPerm.getIpRanges().isEmpty()) {
    List<IpRange> ipRanges=new ArrayList<IpRange>();
    for (    String range : ipPerm.getIpRanges()) {
      ipRanges.add(new IpRange(range));
    }
    NetworkRule rule=new NetworkRule(ipPerm.getIpProtocol(),ipPerm.getFromPort(),ipPerm.getToPort(),ipRanges);
    ruleList.add(rule);
  }
  return ruleList;
}

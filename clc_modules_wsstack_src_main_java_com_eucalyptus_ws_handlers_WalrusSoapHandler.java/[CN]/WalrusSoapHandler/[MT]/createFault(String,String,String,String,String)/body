{
  HoldMe.canHas.lock();
  try {
    SOAPFactory soapFactory=HoldMe.getOMSOAP11Factory();
    SOAPFaultCode soapFaultCode=soapFactory.createSOAPFaultCode();
    soapFaultCode.setText(SOAP11Constants.FAULT_CODE_SENDER + "." + faultCode);
    SOAPFaultReason soapFaultReason=soapFactory.createSOAPFaultReason();
    soapFaultReason.setText(faultReason);
    SOAPFaultDetail soapFaultDetail=soapFactory.createSOAPFaultDetail();
    if (resource != null) {
      OMElement detail=soapFactory.createOMElement(new QName(resourceType));
      detail.setText(resource);
      soapFaultDetail.addDetailEntry(detail);
    }
 else {
      soapFaultDetail.setText(faultDetails);
    }
    SOAPEnvelope soapEnv=soapFactory.getDefaultEnvelope();
    SOAPFault soapFault=soapFactory.createSOAPFault();
    soapFault.setCode(soapFaultCode);
    soapFault.setDetail(soapFaultDetail);
    soapFault.setReason(soapFaultReason);
    soapEnv.getBody().addFault(soapFault);
    return soapEnv;
  }
  finally {
    HoldMe.canHas.unlock();
  }
}

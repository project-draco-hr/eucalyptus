{
  Network vmNetwork=new Network(Accounts.lookupAccountFullNameById(this.getAccountId()),this.getDisplayName(),this.getId());
  for (  NetworkRule networkRule : this.getNetworkRules()) {
    PacketFilterRule pfrule=new PacketFilterRule(this.getAccountId(),this.getDisplayName(),networkRule.getProtocol(),networkRule.getLowPort(),networkRule.getHighPort());
    for (    IpRange cidr : networkRule.getIpRanges())     pfrule.getSourceCidrs().add(cidr.getValue());
    for (    NetworkPeer peer : networkRule.getNetworkPeers())     pfrule.addPeer(peer.getUserQueryKey(),peer.getGroupName());
    vmNetwork.getRules().add(pfrule);
  }
  return vmNetwork;
}

{
  if (isAttached())   throw new IllegalStateException("Already attached");
  this.setState(State.in_use);
  this.attachment=attachment;
  this.instance=attachment.getInstance();
}

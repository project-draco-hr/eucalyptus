{
  super();
  try {
    this.requestIp=requestIp;
    String[] path=requestUrl.replaceFirst("/","?").split("\\?");
    if (path.length > 0) {
      this.metadataName=path[0];
      if (path.length > 1) {
        this.localPath=path[1].replaceFirst("^[/]*","").replaceAll("[/]+","/");
      }
 else {
        this.localPath="";
      }
    }
 else {
      this.metadataName="";
      this.localPath="";
    }
    VmInstance findVm=null;
    try {
      try {
        findVm=VmInstances.lookupByPublicIp(requestIp);
      }
 catch (      Exception ex) {
        Logs.exhaust().error(ex);
      }
    }
 catch (    Exception ex2) {
      try {
        findVm=VmInstances.lookupByInstanceIp(requestIp);
      }
 catch (      Exception ex) {
        Logs.exhaust().error(ex);
      }
    }
    this.vm=findVm;
  }
  finally {
    LOG.debug((this.vm != null ? "Instance" : "External") + " Metadata: requestIp=" + this.requestIp+ " metadataName="+ this.metadataName+ " metadataPath="+ this.localPath+ " requestUrl="+ requestUrl);
  }
}

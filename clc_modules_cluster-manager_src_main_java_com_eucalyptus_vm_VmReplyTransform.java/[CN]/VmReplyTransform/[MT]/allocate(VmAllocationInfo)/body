{
  RunInstancesResponseType reply=vmAllocInfo.getReply();
  List<String> networkNames=new ArrayList<String>();
  for (  Network vmNet : vmAllocInfo.getNetworks())   networkNames.add(vmNet.getName());
  ReservationInfoType reservation=new ReservationInfoType(vmAllocInfo.getReservationId(),reply.getUserId(),networkNames);
  for (  ResourceToken allocToken : vmAllocInfo.getAllocationTokens())   for (  String instId : allocToken.getInstanceIds()) {
    reservation.getInstancesSet().add(VmInstances.getInstance().lookup(instId).getAsRunningInstanceItemType(Components.lookup(Dns.class).isLocal()));
  }
  reply.setRsvInfo(reservation);
  return vmAllocInfo.getReply();
}

{
  if (!enabled) {
    checkConnection();
    if (!enabled) {
      LOG.error("Not enabled. Will not run command. ");
      throw new EucalyptusCloudException("Not enabled. Will not run command.");
    }
  }
  EntityWrapper<CHAPUserInfo> db=StorageProperties.getEntityWrapper();
  try {
    CHAPUserInfo userInfo=db.getUnique(new CHAPUserInfo(userName));
    String returnValue=execCommand("stty hardwrap off\rchapuser delete " + userName + "\r");
    if (matchPattern(returnValue,USER_DELETE_PATTERN) != null) {
      db.delete(userInfo);
    }
  }
 catch (  EucalyptusCloudException ex) {
    throw new EucalyptusCloudException("Unable to find user: " + userName);
  }
 finally {
    db.commit();
  }
}

{
  EntityWrapper<CHAPUserInfo> db=StorageProperties.getEntityWrapper();
  try {
    CHAPUserInfo userInfo=db.getUnique(new CHAPUserInfo(TARGET_USERNAME));
    String encryptedPassword=userInfo.getEncryptedPassword();
    db.commit();
    try {
      SANInfo sanInfo=SANInfo.getStorageInfo();
      String returnValue=SystemUtil.run(new String[]{StorageProperties.eucaHome + StorageProperties.EUCA_ROOT_WRAPPER,BaseDirectory.LIB.toString() + File.separator + "disconnect_iscsitarget_sc.pl",System.getProperty("euca.home") + "," + sanInfo.getSanHost()+ ","+ iqn+ ","+ encryptedPassword});
      if (returnValue.length() == 0) {
        throw new EucalyptusCloudException("Unable to disconnect target");
      }
    }
 catch (    ExecutionException e) {
      throw new EucalyptusCloudException("Unable to connect to storage target");
    }
  }
 catch (  EucalyptusCloudException ex) {
    db.rollback();
    throw new EucalyptusCloudException(ex);
  }
}

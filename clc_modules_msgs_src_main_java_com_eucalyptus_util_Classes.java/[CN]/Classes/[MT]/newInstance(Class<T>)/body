{
  if (!Modifier.isPublic(type.getModifiers())) {
    throw new InstantiationError("Attempt to instantiate a class which is not public: " + type.getCanonicalName());
  }
 else   if (type.isEnum()) {
    return type.getEnumConstants()[0];
  }
 else {
    try {
      T t=type.newInstance();
      return t;
    }
 catch (    final InstantiationException ex) {
      throw new InstantiationError("Attempt to instantiate a class which is not public: " + type.getCanonicalName() + " because of: "+ ex.getMessage());
    }
catch (    final IllegalAccessException ex) {
      throw new InstantiationError("Attempt to instantiate a class which is not public: " + type.getCanonicalName() + " because of: "+ ex.getMessage());
    }
  }
}

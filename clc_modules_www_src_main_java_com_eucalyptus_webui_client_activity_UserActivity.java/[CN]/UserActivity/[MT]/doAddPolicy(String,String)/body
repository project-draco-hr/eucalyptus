{
  if (currentSelected == null || currentSelected.size() != 1) {
    return;
  }
  final String userId=this.currentSelected.toArray(new SearchResultRow[0])[0].getField(0);
  this.clientFactory.getShellView().getFooterView().showStatus(StatusType.LOADING,"Adding policy " + name + " ...",0);
  this.clientFactory.getBackendService().addUserPolicy(this.clientFactory.getLocalSession().getSession(),userId,name,document,new AsyncCallback<Void>(){
    @Override public void onFailure(    Throwable caught){
      ActivityUtil.logoutForInvalidSession(clientFactory,caught);
      clientFactory.getShellView().getFooterView().showStatus(StatusType.ERROR,"Failed to add policy",FooterView.DEFAULT_STATUS_CLEAR_DELAY);
      clientFactory.getShellView().getLogView().log(LogType.ERROR,"Failed to add policy " + name + " for user "+ userId+ ": "+ caught.getMessage());
    }
    @Override public void onSuccess(    Void arg){
      clientFactory.getShellView().getFooterView().showStatus(StatusType.NONE,"Policy added",FooterView.DEFAULT_STATUS_CLEAR_DELAY);
      clientFactory.getShellView().getLogView().log(LogType.INFO,"New policy " + name + " is added to user "+ userId);
    }
  }
);
}

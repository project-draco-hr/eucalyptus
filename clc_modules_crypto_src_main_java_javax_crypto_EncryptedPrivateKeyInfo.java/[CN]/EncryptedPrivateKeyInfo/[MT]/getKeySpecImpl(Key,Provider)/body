{
  byte[] encoded=null;
  Cipher c;
  try {
    if (provider == null) {
      c=Cipher.getInstance(algid.getName());
    }
 else {
      c=Cipher.getInstance(algid.getName(),provider);
    }
    c.init(Cipher.DECRYPT_MODE,decryptKey,algid.getParameters());
    encoded=c.doFinal(encryptedData);
    checkPKCS8Encoding(encoded);
  }
 catch (  NoSuchAlgorithmException nsae) {
    throw nsae;
  }
catch (  GeneralSecurityException gse) {
    InvalidKeyException ike=new InvalidKeyException("Cannot retrieve the PKCS8EncodedKeySpec");
    ike.initCause(gse);
    throw ike;
  }
catch (  IOException ioe) {
    InvalidKeyException ike=new InvalidKeyException("Cannot retrieve the PKCS8EncodedKeySpec");
    ike.initCause(ioe);
    throw ike;
  }
  return new PKCS8EncodedKeySpec(encoded);
}

{
  e.getFuture().cancel();
  HttpResponse response=null;
  response=new DefaultHttpResponse(HttpVersion.HTTP_1_1,HttpResponseStatus.TEMPORARY_REDIRECT);
  String redirectUri;
  if (Topology.isEnabled(compClass)) {
    final URI serviceUri=ServiceUris.remote(Topology.lookup(compClass));
    redirectUri=serviceUri.toASCIIString() + originalPath.replace(serviceUri.getPath(),"");
  }
 else {
    final URI serviceUri=ServiceUris.remote(Topology.lookup(Eucalyptus.class));
    redirectUri=serviceUri.toASCIIString() + originalPath.replace(serviceUri.getPath(),"");
  }
  response.setHeader(HttpHeaders.Names.LOCATION,redirectUri);
  final ChannelFuture writeFuture=Channels.future(ctx.getChannel());
  writeFuture.addListener(ChannelFutureListener.CLOSE);
  if (ctx.getChannel().isConnected()) {
    Channels.write(ctx,writeFuture,response);
  }
}

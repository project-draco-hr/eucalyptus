{
  if (!EuarePermission.allowProcessAccountSignup(requestUser)) {
    throw new EucalyptusServiceException("Operation is not authorized");
  }
  ArrayList<String> success=Lists.newArrayList();
  for (  String accountName : accountNames) {
    try {
      Account account=Accounts.lookupAccountByName(accountName);
      User admin=account.lookupUserByName(User.ACCOUNT_ADMIN);
      if (admin.getRegistrationStatus().equals(RegistrationStatus.REGISTERED)) {
        if (approve) {
          admin.setRegistrationStatus(RegistrationStatus.APPROVED);
          notifyAccountApproval(admin,accountName,backendUrl);
        }
 else {
          notiftyAccountRejection(admin,accountName,backendUrl);
          Accounts.deleteAccount(accountName,false,true);
        }
        success.add(accountName);
      }
 else {
        throw new IllegalArgumentException("Account " + accountName + " can not be approved or rejected.");
      }
    }
 catch (    Exception e) {
      LOG.error("Failed to " + (approve ? "approve" : "reject") + " account "+ accountName,e);
      LOG.debug(e,e);
    }
  }
  return success;
}

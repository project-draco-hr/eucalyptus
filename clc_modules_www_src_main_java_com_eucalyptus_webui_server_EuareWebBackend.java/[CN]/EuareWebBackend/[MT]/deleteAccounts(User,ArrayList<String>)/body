{
  if (!requestUser.isSystemAdmin()) {
    throw new EucalyptusServiceException("Operation is not authorized");
  }
  boolean hasError=false;
  for (  String id : ids) {
    try {
      Account account=Accounts.lookupAccountById(id);
      Privileged.deleteAccount(requestUser.isSystemAdmin(),account.getName(),true);
    }
 catch (    Exception e) {
      LOG.error("Failed to delete account " + id,e);
      LOG.debug(e,e);
      hasError=true;
    }
  }
  if (hasError) {
    throw new EucalyptusServiceException("Failed to delete some accounts");
  }
}

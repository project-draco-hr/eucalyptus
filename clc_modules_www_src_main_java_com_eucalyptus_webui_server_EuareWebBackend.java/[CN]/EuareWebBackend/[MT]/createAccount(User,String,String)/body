{
  if (!requestUser.isSystemAdmin()) {
    throw new EucalyptusServiceException("Operation is not authorized");
  }
  try {
    Account account=Accounts.addAccount(accountName);
    User admin=account.addUser(User.ACCOUNT_ADMIN,"/",true,true,null);
    admin.resetToken();
    admin.createConfirmationCode();
    admin.setPassword(Crypto.generateHashedPassword(password));
    admin.setPasswordExpires(System.currentTimeMillis() + User.PASSWORD_LIFETIME);
    return account.getAccountNumber();
  }
 catch (  Exception e) {
    LOG.error("Failed to create account " + accountName,e);
    LOG.debug(e,e);
    throw new EucalyptusServiceException("Failed to create account " + accountName + ": "+ e.getMessage());
  }
}

{
  try {
    String userEmail=user.getInfo(User.EMAIL);
    if (userEmail == null) {
      throw new IllegalArgumentException("Empty user email address for");
    }
    String confirmUrl=QueryBuilder.get().start(QueryType.reset).add(CONFIRMATIONCODE,user.getConfirmationCode()).url(backendUrl);
    String subject=WebProperties.getProperty(WebProperties.PASSWORD_RESET_SUBJECT,WebProperties.PASSWORD_RESET_SUBJECT_DEFAULT);
    String mainMessage=WebProperties.getProperty(WebProperties.PASSWORD_RESET_MESSAGE,WebProperties.PASSWORD_RESET_MESSAGE_DEFAULT);
    String emailMessage=mainMessage + "\n\n" + confirmUrl+ "\n";
    ServletUtils.sendMail(userEmail,userEmail,subject,emailMessage);
  }
 catch (  Exception e) {
    LOG.error("Failed to send password reset notification for " + user,e);
    LOG.debug(e,e);
  }
}

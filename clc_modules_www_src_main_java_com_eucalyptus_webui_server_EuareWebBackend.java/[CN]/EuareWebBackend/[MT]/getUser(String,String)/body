{
  if (userName == null || accountName == null) {
    throw new EucalyptusServiceException("Empty user name or account name");
  }
  try {
    Account account=Accounts.lookupAccountByName(accountName);
    User user=account.lookupUserByName(userName);
    if (!user.isEnabled() || !user.getRegistrationStatus().equals(RegistrationStatus.CONFIRMED)) {
      throw new EucalyptusServiceException("User is not enabled or confirmed");
    }
    return user;
  }
 catch (  EucalyptusServiceException e) {
    LOG.debug(e,e);
    throw e;
  }
catch (  Exception e) {
    LOG.error("Failed to verify user " + userName + "@"+ accountName,e);
    LOG.debug(e,e);
    throw new EucalyptusServiceException("Failed to verify user " + userName + "@"+ accountName+ ": "+ e.getMessage());
  }
}

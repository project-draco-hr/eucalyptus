def post(self, arg):
    action = self.get_argument('action')
    response = None
    error = None
    if (action == 'login'):
        try:
            response = LoginProcessor.post(self)
        except Exception as err:
            traceback.print_exc(file=sys.stdout)
            error = {'status_code': 401, 'message': 'failed to log-in', }
    elif (action == 'session'):
        try:
            response = SessionProcessor.post(self)
        except Exception as err:
            traceback.print_exc(file=sys.stdout)
            error = {'status_code': 400, 'message': "can't retrieve session info", }
    else:
        error = {'status_code': 400, 'message': 'unknown action', }
    if error:
        raise tornado.web.HTTPError(error['status_code'], error['message'])
    else:
        self.write(ProxyResponse.generate(response))

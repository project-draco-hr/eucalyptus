{
  final RebootInstancesResponseType reply=(RebootInstancesResponseType)request.getReply();
  try {
    final Context ctx=Contexts.lookup();
    final boolean result=Iterables.any(request.getInstancesSet(),new Predicate<String>(){
      @Override public boolean apply(      final String instanceId){
        try {
          final VmInstance v=VmInstances.getInstance().lookup(instanceId);
          if (Types.checkPrivilege(request,PolicySpec.VENDOR_EC2,PolicySpec.EC2_RESOURCE_INSTANCE,instanceId,v.getOwner())) {
            final Request<RebootInstancesType,RebootInstancesResponseType> req=AsyncRequests.newRequest(new RebootCallback(v.getInstanceId()));
            req.getRequest().regarding(request);
            req.dispatch(v.getClusterName());
            return true;
          }
 else {
            return false;
          }
        }
 catch (        final NoSuchElementException e) {
          return false;
        }
      }
    }
);
    reply.set_return(result);
    return reply;
  }
 catch (  final Exception e) {
    LOG.error(e);
    LOG.debug(e,e);
    throw new EucalyptusCloudException(e.getMessage());
  }
}

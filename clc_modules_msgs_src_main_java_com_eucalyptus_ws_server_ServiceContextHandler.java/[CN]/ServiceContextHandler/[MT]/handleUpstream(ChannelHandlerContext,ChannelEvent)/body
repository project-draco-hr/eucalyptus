{
  final MappingHttpMessage request=MappingHttpMessage.extractMessage(e);
  final BaseMessage msg=BaseMessage.extractMessage(e);
  if (Logs.EXTREME)   LOG.trace(this.getClass().getSimpleName() + "[incoming]:" + (msg != null ? msg.getClass().getSimpleName() : "")+ " "+ e);
  if (e instanceof ChannelStateEvent) {
    this.channelOpened(ctx,(ChannelStateEvent)e);
    ctx.sendUpstream(e);
  }
 else   if (e instanceof IdleStateEvent) {
    LOG.warn("Closing idle connection: " + e);
    e.getFuture().addListener(ChannelFutureListener.CLOSE);
    ctx.sendUpstream(e);
  }
 else   if (request != null && msg != null) {
    this.messageReceived(ctx,msg);
    ctx.sendUpstream(e);
  }
 else   if (e instanceof ExceptionEvent) {
    this.exceptionCaught(ctx,(ExceptionEvent)e);
    ctx.sendUpstream(e);
  }
 else {
    ctx.sendUpstream(e);
  }
}

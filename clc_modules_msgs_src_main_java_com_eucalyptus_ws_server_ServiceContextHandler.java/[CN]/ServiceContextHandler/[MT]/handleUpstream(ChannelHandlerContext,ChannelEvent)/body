{
  final MappingHttpMessage request=MappingHttpMessage.extractMessage(e);
  final BaseMessage msg=BaseMessage.extractMessage(e);
  if (LogLevels.EXTREME)   LOG.trace(this.getClass().getSimpleName() + "[incoming]:" + (msg != null ? msg.getClass().getSimpleName() : "")+ " "+ e);
  if (e instanceof ExceptionEvent) {
    this.exceptionCaught(ctx,(ExceptionEvent)e);
  }
 else   if (e instanceof IdleStateEvent) {
    LOG.warn("Closing idle connection: " + e);
    e.getFuture().addListener(ChannelFutureListener.CLOSE);
    ctx.sendUpstream(e);
  }
 else   if (request != null && msg != null) {
    this.startTime.set(ctx.getChannel(),System.currentTimeMillis());
    EventRecord.here(ServiceContextHandler.class,EventType.MSG_RECEIVED,msg.getClass().getSimpleName()).trace();
    ServiceContext.dispatch(RequestQueue.ENDPOINT,msg);
  }
 else {
    ctx.sendUpstream(e);
  }
}

{
  EntityWrapper<UserEntity> db=Authentication.getEntityWrapper();
  try {
    UserEntity user=db.getUnique(new UserEntity(principal.getName()));
    UserGroupEntity g=db.recast(UserGroupEntity.class).getUnique(this.group);
    if (!g.belongs(user)) {
      g.getUsers().add(user);
      db.commit();
      return true;
    }
 else {
      db.rollback();
      return false;
    }
  }
 catch (  EucalyptusCloudException e) {
    LOG.debug(e,e);
    db.rollback();
    return false;
  }
}

{
  logData=new LinkedBlockingQueue<BucketLogData>();
  logger=Executors.newScheduledThreadPool(1);
  logger.schedule(new Runnable(){
    @Override public void run(){
      if (logData.size() > LOG_THRESHOLD) {
        ServiceDispatcher dispatcher=ServiceDispatcher.lookupSingle(Component.walrus);
        List<BucketLogData> data=new ArrayList<BucketLogData>();
        logData.drainTo(data);
        for (        BucketLogData entry : data) {
          try {
            PutObjectInlineType putRequest=new PutObjectInlineType();
            putRequest.setBucket(entry.getTargetBucket());
            putRequest.setKey(entry.getTargetPrefix() + "blah");
            PutObjectInlineResponseType putResponse=(PutObjectInlineResponseType)dispatcher.send(putRequest);
          }
 catch (          EucalyptusCloudException ex) {
          }
        }
      }
    }
  }
,5,TimeUnit.SECONDS);
}

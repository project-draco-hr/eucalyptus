{
  NetworkIndexState ret=null;
  if (this.networkIndexes.replace(index,NetworkIndexState.FREE,NetworkIndexState.USED) || ((ret=this.networkIndexes.putIfAbsent(index,NetworkIndexState.USED)) == null) || ret == NetworkIndexState.FREE) {
    EventRecord.caller(this.getClass(),EventType.TOKEN_ALLOCATED,this.fullName.toString(),"cluster",cluster,"networkIndex",index,"state",this.networkIndexes.get(index)).debug();
  }
 else   if (this.networkIndexes.putIfAbsent(index,NetworkIndexState.USED) != NetworkIndexState.FREE) {
    EventRecord.caller(this.getClass(),EventType.TOKEN_ALLOCATED,this.fullName.toString(),"cluster",cluster,"networkIndex",index,"state",this.networkIndexes.get(index)).debug();
  }
 else   if (this.networkIndexes.replace(index,NetworkIndexState.ILLEGAL,NetworkIndexState.OUTLAW)) {
    EventRecord.caller(this.getClass(),EventType.TOKEN_ALLOCATED,"ERROR",this.fullName.toString(),"cluster",cluster,"networkIndex",index,"state",this.networkIndexes.get(index),"Allocated when previous state was",NetworkIndexState.ILLEGAL).debug();
  }
 else {
    EventRecord.caller(this.getClass(),EventType.TOKEN_ALLOCATED,"ERROR",this.fullName.toString(),"cluster",cluster,"networkIndex",index,"state",this.networkIndexes.get(index),"No state information is availble for the index",NetworkIndexState.ILLEGAL).debug();
  }
}

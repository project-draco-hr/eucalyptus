{
  for (  ResourceType rsc : rscUpdate) {
    VmTypeAvailability vmAvailable=this.typeMap.get(rsc.getInstanceType().getName());
    if (vmAvailable == null)     continue;
    int outstandingCount=0;
    for (    ResourceToken token : this.pendingTokens)     if (token.getVmType().equals(rsc.getInstanceType().getName()))     outstandingCount++;
    for (    ResourceToken token : this.submittedTokens)     if (token.getVmType().equals(rsc.getInstanceType().getName()))     outstandingCount++;
    vmAvailable.setAvailable(rsc.getAvailableInstances() - outstandingCount);
    vmAvailable.setMax(rsc.getMaxInstances());
  }
}

{
  if (event.getMessage() instanceof MappingHttpResponse) {
    MappingHttpResponse httpResponse=(MappingHttpResponse)event.getMessage();
    if (httpResponse.getMessage() instanceof WalrusResponseType) {
      WalrusResponseType response=(WalrusResponseType)httpResponse.getMessage();
      BucketLogData logData=response.getLogData();
      if (logData != null) {
        computeStats(logData,httpResponse);
        response.setLogData(null);
      }
    }
 else     if (httpResponse.getMessage() instanceof WalrusErrorMessageType) {
      WalrusErrorMessageType errorMessage=(WalrusErrorMessageType)httpResponse.getMessage();
      BucketLogData logData=errorMessage.getLogData();
      if (logData != null) {
        computeStats(logData,httpResponse);
        logData.setError(errorMessage.getCode());
        errorMessage.setLogData(null);
      }
    }
  }
}

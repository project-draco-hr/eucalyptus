{
  T resource;
  try {
    resource=resolver.resolve(resourceName);
  }
 catch (  Throwable ex) {
    LOG.error(ex,ex);
    throw new ResourceLookupException("Failure occurred while trying to resolve a resource using: " + resolver.getClass().getCanonicalName(),ex);
  }
  Context context=Contexts.lookup();
  String accountId=ownerResolver == null ? null : ownerResolver.getOwningAccountId(resource);
  context.getContracts().putAll(policyEngine.evaluateAuthorization(resourceType,resourceName,accountId,context.getRequest(),context.getUser()));
  return resource;
}

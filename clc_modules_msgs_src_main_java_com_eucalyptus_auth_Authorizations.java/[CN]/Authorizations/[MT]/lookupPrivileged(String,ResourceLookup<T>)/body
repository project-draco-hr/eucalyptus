{
  T resource;
  try {
    resource=resolver.resolve(resourceName);
  }
 catch (  Throwable ex) {
    LOG.error(ex,ex);
    throw new ResourceLookupException("Failure occurred while trying to resolve a resource using: " + resolver.getClass().getCanonicalName(),ex);
  }
  if (!resourceName.equals(resource.getName())) {
    throw new ResourceLookupException("Broken resolver implementation, returned resource " + resource.getClass().getSimpleName() + " which doesn't match requested resource name "+ resourceName+ ": "+ resolver.getClass().getCanonicalName());
  }
  @SuppressWarnings("unchecked") Class<T> resourceType=(Class<T>)resource.getClass();
  return resource;
}

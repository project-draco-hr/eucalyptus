{
  if (event.getMessage() instanceof MappingHttpRequest) {
    MappingHttpRequest httpRequest=(MappingHttpRequest)event.getMessage();
    if (httpRequest.getContent().readableBytes() == 0) {
      waitForNext=true;
      processedFirstChunk=false;
      this.httpRequest=httpRequest;
    }
  }
 else   if (event.getMessage() instanceof DefaultHttpChunk) {
    if (!processedFirstChunk) {
      DefaultHttpChunk httpChunk=(DefaultHttpChunk)event.getMessage();
      httpRequest.setContent(httpChunk.getContent());
      processedFirstChunk=true;
      UpstreamMessageEvent newEvent=new UpstreamMessageEvent(ctx.getChannel(),httpRequest,null);
      ctx.sendUpstream(newEvent);
    }
  }
}

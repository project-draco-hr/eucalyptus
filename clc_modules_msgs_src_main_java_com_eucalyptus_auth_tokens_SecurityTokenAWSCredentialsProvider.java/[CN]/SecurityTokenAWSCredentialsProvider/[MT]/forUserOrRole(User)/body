{
  if (user instanceof HasRole && ((HasRole)user).getRole() != null) {
    return new SecurityTokenAWSCredentialsProvider(((HasRole)user).getRole());
  }
 else {
    return new SecurityTokenAWSCredentialsProvider(user);
  }
}

{
  try {
    LdapWrappedUser foundUser=(LdapWrappedUser)lookupUser(user.getName());
    if (LdapCache.getInstance().isGroupCacheInvalidated()) {
      LdapCache.getInstance().reloadGroups(EucaLdapHelper.getGroups(EucaLdapHelper.FILTER_ALL_GROUPS));
    }
    return LdapCache.getInstance().getGroups(EucaLdapHelper.getNamesFromEucaGroupIds(foundUser.getEucaGroupIds()));
  }
 catch (  NoSuchUserException e) {
    LOG.error(e,e);
  }
catch (  EntryNotFoundException e) {
    LOG.error(e,e);
  }
catch (  LdapException e) {
    LOG.error(e,e);
  }
  return new ArrayList<Group>();
}

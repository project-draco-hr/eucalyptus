{
  Set<String> hosts=HOSTS.get();
  Set<String> union=Sets.newHashSet();
  Set<String> intersection=Sets.newHashSet(hosts);
  LOG.debug("ActiveHostSet: universe of db hosts: " + hosts);
  for (  String ctx : PersistenceContexts.list()) {
    Set<String> activeDatabases=Databases.lookup(ctx).getActiveDatabases();
    union.addAll(activeDatabases);
    intersection.retainAll(activeDatabases);
  }
  LOG.debug("ActiveHostSet: union of activated db connections: " + union);
  LOG.debug("ActiveHostSet: intersection of db hosts and activated db connections: " + intersection);
  LOG.debug("ActiveHostSet: volatile: " + !hosts.containsAll(intersection));
  return intersection;
}

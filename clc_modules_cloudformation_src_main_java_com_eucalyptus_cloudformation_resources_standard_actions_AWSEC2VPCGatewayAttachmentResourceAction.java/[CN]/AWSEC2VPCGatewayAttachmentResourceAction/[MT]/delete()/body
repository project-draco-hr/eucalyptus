{
  if (info.getPhysicalResourceId() == null)   return;
  ServiceConfiguration configuration=Topology.lookup(Compute.class);
  DescribeInternetGatewaysType describeInternetGatewaysType=new DescribeInternetGatewaysType();
  describeInternetGatewaysType.setEffectiveUserId(info.getEffectiveUserId());
  setInternetGatewayId(describeInternetGatewaysType,properties.getInternetGatewayId());
  DescribeInternetGatewaysResponseType describeInternetGatewaysResponseType=AsyncRequests.<DescribeInternetGatewaysType,DescribeInternetGatewaysResponseType>sendSync(configuration,describeInternetGatewaysType);
  if (describeInternetGatewaysResponseType.getInternetGatewaySet() == null || describeInternetGatewaysResponseType.getInternetGatewaySet().getItem() == null || describeInternetGatewaysResponseType.getInternetGatewaySet().getItem().isEmpty()) {
    return;
  }
  if (properties.getVpcId() != null) {
    DescribeVpcsType describeVpcsType=new DescribeVpcsType();
    describeVpcsType.setEffectiveUserId(info.getEffectiveUserId());
    setVpcId(describeVpcsType,properties.getVpcId());
    DescribeVpcsResponseType describeVpcsResponseType=AsyncRequests.<DescribeVpcsType,DescribeVpcsResponseType>sendSync(configuration,describeVpcsType);
    if (describeVpcsResponseType.getVpcSet() == null || describeVpcsResponseType.getVpcSet().getItem() == null || describeVpcsResponseType.getVpcSet().getItem().isEmpty()) {
      return;
    }
    DetachInternetGatewayType detachInternetGatewayType=new DetachInternetGatewayType();
    detachInternetGatewayType.setEffectiveUserId(info.getEffectiveUserId());
    detachInternetGatewayType.setVpcId(properties.getVpcId());
    detachInternetGatewayType.setInternetGatewayId(properties.getInternetGatewayId());
    AsyncRequests.<DetachInternetGatewayType,DetachInternetGatewayResponseType>sendSync(configuration,detachInternetGatewayType);
  }
 else {
    DescribeVpnGatewaysType describeVpnGatewaysType=new DescribeVpnGatewaysType();
    describeVpnGatewaysType.setEffectiveUserId(info.getEffectiveUserId());
    setVpnGatewayId(describeVpnGatewaysType,properties.getVpnGatewayId());
    DescribeVpnGatewaysResponseType describeVpnGatewaysResponseType=AsyncRequests.<DescribeVpnGatewaysType,DescribeVpnGatewaysResponseType>sendSync(configuration,describeVpnGatewaysType);
    if (describeVpnGatewaysResponseType.getVpnGatewaySet() == null || describeVpnGatewaysResponseType.getVpnGatewaySet().getItem() == null || describeVpnGatewaysResponseType.getVpnGatewaySet().getItem().isEmpty()) {
      return;
    }
    DetachVpnGatewayType detachVpnGatewayType=new DetachVpnGatewayType();
    detachVpnGatewayType.setEffectiveUserId(info.getEffectiveUserId());
    detachVpnGatewayType.setVpcId(properties.getVpcId());
    detachVpnGatewayType.setVpnGatewayId(properties.getVpnGatewayId());
    AsyncRequests.<DetachVpnGatewayType,DetachVpnGatewayResponseType>sendSync(configuration,detachVpnGatewayType);
  }
}

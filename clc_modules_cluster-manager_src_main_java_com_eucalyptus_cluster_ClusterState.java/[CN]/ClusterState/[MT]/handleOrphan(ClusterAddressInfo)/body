{
  Integer orphanCount=1;
  orphanCount=orphans.putIfAbsent(address,orphanCount);
  EventRecord.caller(ClusterState.class,EventType.ADDRESS_STATE,"Found orphaned public ip address: " + LogUtil.dumpObject(address) + " count="+ orphanCount).debug();
  orphanCount=(orphanCount == null) ? 1 : orphanCount;
  orphans.put(address,orphanCount + 1);
  EventRecord.caller(ClusterState.class,EventType.ADDRESS_STATE,"Updated orphaned public ip address: " + LogUtil.dumpObject(address) + " count="+ orphanCount).debug();
  if (orphanCount > 3) {
    EventRecord.caller(ClusterState.class,EventType.ADDRESS_STATE,"Unassigning orphaned public ip address: " + LogUtil.dumpObject(address) + " count="+ orphanCount).warn();
    try {
      final Address addr=Addresses.getInstance().lookup(address.getAddress());
      if (addr.isAssigned()) {
        Callbacks.newClusterRequest(new UnassignAddressCallback(address)).dispatch(this.clusterName);
      }
 else       if (addr.isSystemOwned()) {
        addr.release();
      }
    }
 catch (    NoSuchElementException e) {
    }
    orphans.remove(address);
  }
}

{
  AccountFullName accountFn;
  try {
    accountFn=Accounts.lookupAccountFullNameById(accountId);
  }
 catch (  Exception ex) {
    try {
      accountFn=Accounts.lookupAccountFullNameByUserId(accountId);
    }
 catch (    RuntimeException ex1) {
      LOG.error(ex1,ex1);
      throw ex1;
    }
  }
  NetworkToken netToken=new NetworkToken(this.clusterName,accountFn,networkName,networkUuid,vlan);
  if (!ClusterState.availableVlans.remove(vlan)) {
    throw new NetworkAlreadyExistsException();
  }
  return netToken;
}

{
  NavigableSet<Integer> newVlanList=Sets.newTreeSet();
  int min=1;
  int max=4095;
  try {
    for (    ClusterConfiguration cc : Configuration.getClusterConfigurations()) {
      if (cc.getMinVlan() != null)       min=cc.getMinVlan() > min ? cc.getMinVlan() : min;
      if (cc.getMaxVlan() != null)       max=cc.getMaxVlan() < max ? cc.getMaxVlan() : max;
    }
  }
 catch (  EucalyptusCloudException e) {
    LOG.debug(e,e);
  }
  for (int i=min; i < max; i++)   newVlanList.add(i);
  newVlanList.removeAll(availableVlans);
  availableVlans.removeAll(availableVlans.headSet(min));
  availableVlans.removeAll(availableVlans.tailSet(max));
  for (int i=min; i < max; i++) {
    if (!newVlanList.contains(i)) {
      availableVlans.add(i);
    }
  }
  LOG.debug(EventRecord.here(Component.cluster,"CONFIG_VLANS",Integer.toString(min),Integer.toString(max),availableVlans.toString()));
}

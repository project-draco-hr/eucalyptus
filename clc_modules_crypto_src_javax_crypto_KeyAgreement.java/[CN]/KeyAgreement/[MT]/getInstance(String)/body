{
  List services=GetInstance.getServices("KeyAgreement",algorithm);
  Iterator t=services.iterator();
  while (t.hasNext()) {
    Service s=(Service)t.next();
    if (JceSecurity.canUseProvider(s.getProvider()) == false) {
      continue;
    }
    return new KeyAgreement(s,t,algorithm);
  }
  throw new NoSuchAlgorithmException("Algorithm " + algorithm + " not available");
}

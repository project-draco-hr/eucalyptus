{
  if (ex instanceof CheckException) {
    CheckException checkExHead=(CheckException)ex;
    LOG.error("Transition failed on " + parent.lookupComponent().getName() + " "+ checkExHead.getSeverity()+ " due to "+ ex.toString(),ex);
    for (    CheckException checkEx : checkExHead) {
      LifecycleEvents.fireExceptionEvent(parent,checkEx.getSeverity(),checkEx);
    }
    if (checkExHead.getSeverity().ordinal() >= Severity.ERROR.ordinal()) {
      try {
        failureAction.apply(ex);
      }
 catch (      Exception ex1) {
        LOG.error(ex1,ex1);
      }
      return true;
    }
    for (    CheckException checkEx : checkExHead) {
      if (checkEx.getSeverity().ordinal() >= Severity.ERROR.ordinal()) {
        try {
          failureAction.apply(ex);
        }
 catch (        Exception ex1) {
          LOG.error(ex1,ex1);
        }
        return true;
      }
    }
    return false;
  }
 else {
    LOG.error("Transition failed on " + parent.lookupComponent().getName() + " due to "+ ex.toString(),ex);
    LifecycleEvents.fireExceptionEvent(parent,Severity.ERROR,ex);
    try {
      failureAction.apply(ex);
    }
 catch (    Exception ex1) {
      LOG.error(ex1,ex1);
    }
    return true;
  }
}

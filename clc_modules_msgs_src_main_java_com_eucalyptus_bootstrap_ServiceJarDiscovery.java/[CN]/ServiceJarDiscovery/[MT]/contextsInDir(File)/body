{
  ClassLoader oldLoader=Thread.currentThread().getContextClassLoader();
  try {
    Thread.currentThread().setContextClassLoader(makeClassLoader(libDir));
    Set<String> ctxs=Sets.newHashSet();
    for (    Class candidate : getClassList(libDir)) {
      if (Ats.from(candidate).has(Entity.class)) {
        if (Ats.from(candidate).has(PersistenceContext.class)) {
          ctxs.add(Ats.from(candidate).get(PersistenceContext.class).name());
        }
      }
    }
    return Lists.newArrayList(ctxs);
  }
  finally {
    Thread.currentThread().setContextClassLoader(oldLoader);
  }
}

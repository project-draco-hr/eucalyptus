{
  JarFile jar=new JarFile(f);
  Properties props=new Properties();
  Enumeration<JarEntry> jarList=jar.entries();
  LOG.trace("-> Trying to load component info from " + f.getAbsolutePath());
  while (jarList.hasMoreElements()) {
    JarEntry j=jarList.nextElement();
    if (j.getName().matches(".*\\.class.{0,1}")) {
      String classGuess=j.getName().replaceAll("/",".").replaceAll("\\.class.{0,1}","");
      try {
        Class candidate=ClassLoader.getSystemClassLoader().loadClass(classGuess);
        classList.put(candidate,f.getAbsolutePath());
        if (ServiceJarDiscovery.class.isAssignableFrom(candidate) && !ServiceJarDiscovery.class.equals(candidate)) {
          try {
            ServiceJarDiscovery discover=(ServiceJarDiscovery)candidate.newInstance();
            discovery.add(discover);
          }
 catch (          Exception e) {
            LOG.fatal(e,e);
            jar.close();
            throw new RuntimeException(e);
          }
        }
      }
 catch (      ClassNotFoundException e) {
        LOG.debug(e,e);
      }
    }
  }
  jar.close();
}

def __normalize_instances__(self, instances):
    ret = []
    if (not instances):
        return []
    for res in instances:
        if issubclass(res.__class__, EC2Object):
            for inst in res.instances:
                inst.reservation_id = res.id
                inst.owner_id = res.owner_id
                inst.groups = res.groups
                if res.groups:
                    inst.group_name = res.groups[0].id
                ret.append(inst)
        else:
            for inst in res['instances']:
                inst['reservation_id'] = res['id']
                inst['owner_id'] = res['owner_id']
                inst['groups'] = res['groups']
                if res['groups']:
                    inst['group_name'] = res['groups'][0]['id']
                ret.append(inst)
    return ret

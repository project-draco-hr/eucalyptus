{
  final ServiceBuilder builder=component.getBuilder();
  partition=(partition != null ? partition : name);
  LOG.info("Using builder: " + builder.getClass().getSimpleName() + " for: "+ partition+ "."+ name+ "@"+ hostName+ ":"+ port);
  if (!builder.checkAdd(partition,name,hostName,port)) {
    LOG.info(builder.getClass().getSimpleName() + ": checkAdd failed.");
    return false;
  }
  try {
    final ServiceConfiguration newComponent=builder.add(partition,name,hostName,port);
    try {
      component.enableTransition(newComponent).get();
    }
 catch (    Throwable ex) {
      LOG.error(ex,ex);
    }
    return true;
  }
 catch (  Throwable e) {
    LOG.info(builder.getClass().getSimpleName() + ": add failed.");
    LOG.info(e.getMessage());
    LOG.error(e,e);
    throw new ServiceRegistrationException(builder.getClass().getSimpleName() + ": add failed with message: " + e.getMessage(),e);
  }
}

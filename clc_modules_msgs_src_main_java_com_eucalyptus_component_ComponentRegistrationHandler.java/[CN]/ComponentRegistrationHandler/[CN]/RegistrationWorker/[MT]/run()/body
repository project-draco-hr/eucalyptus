{
  if (!this.running.compareAndSet(false,true)) {
    return;
  }
 else {
    while (this.running.get()) {
      Runnable event;
      try {
        if ((event=this.msgQueue.poll(2000,TimeUnit.MILLISECONDS)) != null) {
          event.run();
        }
      }
 catch (      InterruptedException e1) {
        Thread.currentThread().interrupt();
        return;
      }
catch (      final Throwable e) {
        LOG.error(e,e);
      }
    }
    LOG.debug("Shutting down cluster message queue: " + Thread.currentThread().getName());
  }
}

{
  final RunInstancesType req=new RunInstancesType();
  req.setImageId(this.imageId);
  req.setUserData(this.userData);
  req.setInstanceType(this.instanceType);
  req.setKeyName(this.keyName);
  req.setMonitoring(this.monitoringEnabled);
  req.setMinCount(1);
  req.setMaxCount(1);
  if (subnetId != null) {
    final InstanceNetworkInterfaceSetItemRequestType networkInterface=req.primaryNetworkInterface(true);
    networkInterface.setSubnetId(this.subnetId);
    networkInterface.setPrivateIpAddress(this.privateIp);
  }
 else {
    req.setGroupSet(Lists.newArrayList(this.groupNames));
    req.setAvailabilityZone(this.availabilityZone);
  }
  return req;
}

{
  try (final TransactionResource db=Entities.transactionFor(ImagingWorker.class)){
    try {
      final ImagingWorker entity=Entities.uniqueResult(ImagingWorker.named(workerId));
      throw Exceptions.toUndeclared(new Exception("Worker already exists"));
    }
 catch (    final NoSuchElementException ex) {
      final ImagingWorker worker=new ImagingWorker(ImagingWorker.STATE.RUNNING,workerId);
      worker.setWorkerUpdateTime();
      Entities.persist(worker);
      db.commit();
    }
catch (    final Exception ex) {
      throw Exceptions.toUndeclared(ex);
    }
  }
 }

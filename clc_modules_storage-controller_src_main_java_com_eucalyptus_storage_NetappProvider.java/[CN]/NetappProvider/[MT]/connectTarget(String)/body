{
  try {
    SANInfo sanInfo=SANInfo.getStorageInfo();
    String encryptedPassword="not_required";
    try {
      String deviceString=null;
      String[] parts=iqn.split(",");
      if (parts.length > 1) {
        deviceString=System.getProperty("euca.home") + "," + sanInfo.getSanHost()+ ","+ parts[0]+ ","+ encryptedPassword+ ","+ parts[1]+ ","+ StorageProperties.IscsiAuthType.HBA.toString();
      }
 else {
        throw new EucalyptusCloudException("Invalid remote device string.");
      }
      String deviceName=SystemUtil.run(new String[]{StorageProperties.eucaHome + StorageProperties.EUCA_ROOT_WRAPPER,BaseDirectory.LIB.toString() + File.separator + "connect_iscsitarget_sc.pl",deviceString});
      if (deviceName.length() == 0) {
        throw new EucalyptusCloudException("Unable to get device name. Connect failed.");
      }
      return deviceName;
    }
 catch (    ExecutionException e) {
      throw new EucalyptusCloudException("Unable to connect to storage target");
    }
  }
 catch (  EucalyptusCloudException ex) {
    throw ex;
  }
}

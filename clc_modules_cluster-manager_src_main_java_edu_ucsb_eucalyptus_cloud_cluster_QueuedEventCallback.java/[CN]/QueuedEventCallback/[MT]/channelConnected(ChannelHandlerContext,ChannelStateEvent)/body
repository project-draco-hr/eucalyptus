{
  this.channelConnected=e.getFuture();
  ctx.getChannel().getCloseFuture().addListener(CLEAR_PENDING);
  if (super.getRequestQueue().isEmpty()) {
    LOG.debug("Request queue is empty, waiting for write request.");
    ctx.getChannel().close();
  }
 else   if (this.inFlightMessage.compareAndSet(false,true)) {
    Object msg=this.getRequestQueue().peek();
    LOG.debug("Found pending request in the request queue: " + msg.getClass().getCanonicalName());
    this.fireMessage((TYPE)msg,e.getChannel());
  }
  super.channelConnected(ctx,e);
}

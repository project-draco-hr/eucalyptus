{
  try {
    NioClientPipeline clientPipeline=new ClusterClientPipeline(this);
    this.clientBootstrap=ChannelUtil.getClientBootstrap(clientPipeline);
    InetSocketAddress addr=new InetSocketAddress(hostname,port);
    this.request.set(msg);
    this.connectFuture=this.clientBootstrap.connect(addr);
    HttpRequest request=new MappingHttpRequest(HttpVersion.HTTP_1_1,HttpMethod.POST,addr.getHostName(),addr.getPort(),servicePath,msg);
    this.prepare(msg);
    this.connectFuture.addListener(ChannelUtil.WRITE(request));
  }
 catch (  Throwable e) {
    try {
      this.fail(e);
    }
 catch (    Exception e1) {
      LOG.debug(e1,e1);
    }
    if (this.failCallback != null) {
      this.failCallback.failure(this,e);
    }
    this.queueResponse(e);
    this.connectFuture.addListener(ChannelFutureListener.CLOSE);
  }
}

@contextmanager
def ssh_session(host=None, username=None, password=None):
    ssh = paramiko.SSHClient()
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    try:
        sys.stdout.write(('[Connect:%s]' % host))
        ssh.connect(host, username=username, password=password)
        sys.stdout.write('[Connected]')
        yield ssh
    finally:
        ssh.close()

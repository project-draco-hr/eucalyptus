def get_credentials(fileName=None, source=None):
    if source:
        local = ('%s.zip' % os.tempnam((os.path.dirname(fileName) if fileName else '/tmp/')))
    else:
        local = os.path.abspath(fileName)
    if os.path.exists(local):
        print ('ERROR: file %s already exists.' % local)
        sys.exit()
    SSL.Connection.clientPostConnectionCheck = None
    url = ('https://localhost:8443/getX509?user=admin&code=%s' % get_token())
    print ('Fetching credentials:\n-> %s\n<- %s' % (url, local))
    try:
        inUrl = urllib2.urlopen(url)
        outFile = open(local, 'w')
        outFile.write(inUrl.read())
        outFile.close()
        inUrl.close()
        if source:
            zip = zipfile.ZipFile(local)
            for i in zip.namelist():
                of = open(os.path.join(os.path.dirname(local), i), 'wb')
                obj = zip.read(i)
                if (i == 'eucarc'):
                    print obj
                of.write(obj)
                of.close()
            os.remove(local)
    except IOError as ex:
        print ex
        sys.exit()

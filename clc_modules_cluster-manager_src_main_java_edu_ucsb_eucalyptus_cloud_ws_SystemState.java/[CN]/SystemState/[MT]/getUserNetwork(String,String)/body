{
  EntityWrapper<UserInfo> db=new EntityWrapper<UserInfo>();
  try {
    UserInfo user=db.getUnique(new UserInfo(userId));
    for (    NetworkRulesGroup group : user.getNetworkRulesGroup()) {
      if (networkName.equals(group.getName()))       return group.getVmNetwork(userId);
    }
  }
 catch (  EucalyptusCloudException e) {
    db.rollback();
  }
 finally {
    db.commit();
  }
  throw new EucalyptusCloudException("Failed to find network: " + userId + "-"+ networkName);
}

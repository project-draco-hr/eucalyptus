{
  RebootInstancesResponseType reply=(RebootInstancesResponseType)request.getReply();
  reply.set_return(true);
  for (  String instanceId : request.getInstancesSet()) {
    try {
      VmInstance v=VmInstances.getInstance().lookup(instanceId);
      if (request.isAdministrator() || v.getOwnerId().equals(request.getUserId())) {
        Clusters.dispatchEvent(v.getPlacement(),new RebootCallback(v.getInstanceId()).regarding(request));
      }
    }
 catch (    NoSuchElementException e) {
      throw new EucalyptusCloudException(e.getMessage());
    }
  }
  return reply;
}

{
  if (EucalyptusProperties.disableNetworking) {
    return;
  }
 else {
    int networkIndex=vm.getNetworkIndex();
    vm.setNetworkIndex(-1);
    if (networkIndex > 0) {
      try {
        String networkFqName=vm.getOwnerId() + "-" + vm.getNetworkNames().get(0);
        LOG.debug(EventRecord.caller(SystemState.class,EventType.VM_TERMINATING,"NETWORK_INDEX",networkFqName,Integer.toString(networkIndex)));
        Networks.getInstance().lookup(networkFqName).returnNetworkIndex(networkIndex);
      }
 catch (      NoSuchElementException e1) {
        LOG.debug(e1,e1);
      }
    }
  }
}

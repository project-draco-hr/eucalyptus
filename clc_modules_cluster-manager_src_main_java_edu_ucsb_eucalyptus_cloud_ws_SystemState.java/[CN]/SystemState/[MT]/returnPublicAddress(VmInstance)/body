{
  if (EucalyptusProperties.disableNetworking) {
    return;
  }
 else {
    try {
      LOG.debug(EventRecord.caller(SystemState.class,EventType.VM_TERMINATING,vm.getInstanceId()));
      Address address=Addresses.getInstance().lookup(vm.getNetworkConfig().getIgnoredPublicIp());
      if (vm.getInstanceId().equals(address.getInstanceId())) {
        if (address.isSystemAllocated()) {
          LOG.debug(EventRecord.caller(SystemState.class,EventType.VM_TERMINATING,"SYSTEM_ADDRESS",address.toString()));
          AddressUtil.releaseAddress(address);
        }
 else {
          if (address.isAssigned()) {
            LOG.debug(EventRecord.caller(SystemState.class,EventType.VM_TERMINATING,"USER_ADDRESS",address.toString()));
            AddressUtil.unassignAddressFromVm(address,vm);
          }
        }
      }
    }
 catch (    NoSuchElementException e) {
    }
catch (    Throwable e1) {
      LOG.debug(e1,e1);
    }
  }
}

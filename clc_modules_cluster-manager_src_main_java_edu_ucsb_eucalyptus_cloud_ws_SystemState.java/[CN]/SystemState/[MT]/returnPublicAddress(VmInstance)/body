{
  for (  Address address : Addresses.getInstance().listValues()) {
    if (vm.getInstanceId().equals(address.getInstanceId())) {
      if (Component.eucalyptus.name().equals(address.getUserId())) {
        AddressUtil.releaseAddress(address);
      }
    }
 else {
      try {
        AddressUtil.unassignAddressFromVm(address,vm);
      }
 catch (      Throwable e) {
        LOG.debug(e,e);
      }
    }
  }
}

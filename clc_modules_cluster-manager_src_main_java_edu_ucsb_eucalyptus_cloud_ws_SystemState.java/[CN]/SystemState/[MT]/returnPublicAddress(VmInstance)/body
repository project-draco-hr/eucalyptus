{
  if (!Clusters.getInstance().hasNetworking()) {
    return;
  }
 else {
    try {
      LOG.debug(EventRecord.caller(SystemState.class,EventType.VM_TERMINATING,vm.getInstanceId()));
      Address address=Addresses.getInstance().lookup(vm.getNetworkConfig().getIgnoredPublicIp());
      if (vm.getInstanceId().equals(address.getInstanceId())) {
        if (address.isSystemOwned()) {
          LOG.debug(EventRecord.caller(SystemState.class,EventType.VM_TERMINATING,"SYSTEM_ADDRESS",address.toString()));
          Addresses.release(address);
        }
 else         if (address.isAssigned()) {
          LOG.debug(EventRecord.caller(SystemState.class,EventType.VM_TERMINATING,"USER_ADDRESS",address.toString()));
          AddressCategory.unassign(address).dispatch(address.getCluster());
        }
      }
    }
 catch (    NoSuchElementException e) {
    }
catch (    Throwable e1) {
      LOG.debug(e1,e1);
    }
  }
}

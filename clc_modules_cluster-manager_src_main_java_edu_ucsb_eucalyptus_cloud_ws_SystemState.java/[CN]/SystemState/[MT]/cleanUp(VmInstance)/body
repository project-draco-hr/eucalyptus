{
  String networkFqName=!vm.getNetworks().isEmpty() ? vm.getOwnerId() + "-" + vm.getNetworkNames().get(0) : null;
  Cluster cluster=Clusters.getInstance().lookup(vm.getPlacement());
  int networkIndex=vm.getNetworkConfig().getNetworkIndex();
  Address address=null;
  QueuedEventCallback cb=new TerminateCallback(vm.getInstanceId());
  if (Clusters.getInstance().hasNetworking()) {
    try {
      address=Addresses.getInstance().lookup(vm.getNetworkConfig().getIgnoredPublicIp());
    }
 catch (    NoSuchElementException e) {
    }
catch (    Throwable e1) {
      LOG.debug(e1,e1);
    }
  }
  cb.then(SystemState.getCleanUpCallback(address,vm,networkIndex,networkFqName,cluster));
  cb.dispatch(cluster);
}

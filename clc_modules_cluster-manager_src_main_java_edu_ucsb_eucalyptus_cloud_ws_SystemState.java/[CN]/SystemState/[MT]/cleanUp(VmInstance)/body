{
  for (  Address address : Addresses.getInstance().listValues()) {
    if (vm.getInstanceId().equals(address.getInstanceId())) {
      if (Component.eucalyptus.name().equals(address.getUserId())) {
        AddressManager.unassignAddressFromVm(address,vm);
        AddressManager.releaseAddress(address);
      }
    }
  }
  try {
    Clusters.sendClusterEvent(vm.getPlacement(),QueuedEvent.make(new TerminateCallback(),Admin.makeMsg(TerminateInstancesType.class,vm.getInstanceId())));
    try {
      Networks.getInstance().lookup(vm.getNetworkNames().get(0)).returnNetworkIndex(vm.getNetworkIndex());
    }
 catch (    Exception e) {
    }
  }
 catch (  Exception e) {
    LOG.debug(e);
  }
}

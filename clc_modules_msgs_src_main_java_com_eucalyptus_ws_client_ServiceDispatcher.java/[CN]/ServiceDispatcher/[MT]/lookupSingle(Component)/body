{
  try {
    Service first=c.getServices().first();
    if (!Component.State.ENABLED.equals(c.getServices().first().getStateMachine().getState())) {
      LOG.error("Failed to find service dispatcher for component=" + c);
      throw new NoSuchElementException("Failed to find ENABLED service for component=" + c.getName() + " existing services are: "+ c.getServices());
    }
 else {
      return first.getDispatcher();
    }
  }
 catch (  NoSuchElementException ex) {
    LOG.error("Failed to find service dispatcher for component=" + c,ex);
    throw new NoSuchElementException("Failed to find service for component=" + c);
  }
}

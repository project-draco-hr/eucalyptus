{
  DeleteQueueResponseType reply=request.getReply();
  try {
    final Context ctx=Contexts.lookup();
    final String accountId=ctx.getAccountNumber();
    Pair<String,String> accountIdAndQueueName=getAccountIdAndQueueNameFromQueueUrl(request.getQueueUrl());
    if (!accountIdAndQueueName.getLeft().equals(accountId)) {
      throw new AccessDeniedException("Access to the resource " + request.getQueueUrl() + " is denied.");
    }
    String queueName=accountIdAndQueueName.getRight();
    PersistenceFactory.getQueuePersistence().deleteQueue(accountId,queueName);
  }
 catch (  Exception ex) {
    handleException(ex);
  }
  return reply;
}

{
  ListDeadLetterSourceQueuesResponseType reply=request.getReply();
  try {
    final Context ctx=Contexts.lookup();
    final String accountId=ctx.getAccountNumber();
    QueueUrlParts queueUrlParts=getQueueUrlParts(request.getQueueUrl());
    if (!queueUrlParts.getAccountId().equals(accountId)) {
      throw new AccessDeniedException("Access to the resource " + request.getQueueUrl() + " is denied.");
    }
    String queueName=queueUrlParts.getQueueName();
    Queue deadLetterQueue=PersistenceFactory.getQueuePersistence().lookupQueue(accountId,queueName);
    if (deadLetterQueue == null) {
      throw new QueueDoesNotExistException("The specified queue does not exist.");
    }
    String queueArn="arn:aws:sqs:" + RegionConfigurations.getRegionNameOrDefault() + ":"+ accountId+ ":"+ queueName;
    Collection<Queue> sourceQueues=PersistenceFactory.getQueuePersistence().listDeadLetterSourceQueues(accountId,queueArn);
    if (sourceQueues != null) {
      for (      Queue sourceQueue : sourceQueues) {
        reply.getListDeadLetterSourceQueuesResult().getQueueUrl().add(getQueueUrlFromQueueUrlParts(new QueueUrlParts(sourceQueue.getAccountId(),sourceQueue.getQueueName())));
      }
    }
  }
 catch (  Exception ex) {
    handleException(ex);
  }
  return reply;
}

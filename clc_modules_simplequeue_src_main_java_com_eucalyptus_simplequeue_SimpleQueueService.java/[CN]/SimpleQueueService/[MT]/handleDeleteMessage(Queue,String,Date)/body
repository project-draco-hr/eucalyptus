{
  if (PersistenceFactory.getMessagePersistence().deleteMessage(queue,receiptHandle)) {
    if (!"false".equalsIgnoreCase(ENABLE_METRICS_COLLECTION)) {
      ServiceConfiguration cwConfiguration=Topology.lookup(CloudWatch.class);
      PutMetricDataType putMetricDataType=getSQSPutMetricDataType(queue);
      MetricDatum messagesSentMetricDatum=getSQSMetricDatum(queue,now);
      messagesSentMetricDatum.setMetricName(Constants.NUMBER_OF_MESSAGES_DELETED);
      messagesSentMetricDatum.setValue(1.0);
      messagesSentMetricDatum.setUnit("Count");
      putMetricDataType.getMetricData().getMember().add(messagesSentMetricDatum);
      AsyncRequests.sendSync(cwConfiguration,putMetricDataType);
    }
  }
}

{
  AllocateAddressResponseType reply=(AllocateAddressResponseType)request.getReply();
  Context ctx=Contexts.lookup();
  Address address;
  try {
    address=Addresses.allocate(ctx.getUserFullName(),ctx.hasAdministrativePrivileges());
  }
 catch (  NotEnoughResourcesAvailable e) {
    LOG.debug(e,e);
    throw new EucalyptusCloudException(e);
  }
  reply.setPublicIp(address.getName());
  return reply;
}

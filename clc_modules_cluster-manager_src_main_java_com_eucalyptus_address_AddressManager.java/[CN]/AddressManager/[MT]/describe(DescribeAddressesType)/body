{
  DescribeAddressesResponseType reply=(DescribeAddressesResponseType)request.getReply();
  Addresses.updateAddressingMode();
  Context ctx=Contexts.lookup();
  boolean isAdmin=ctx.hasAdministrativePrivileges();
  for (  Address address : Addresses.getInstance().listValues()) {
    if (isAdmin || address.getOwner().equals(ctx.getUserFullName())) {
      reply.getAddressesSet().add(isAdmin ? address.getAdminDescription() : address.getDescription());
    }
  }
  if (isAdmin) {
    for (    Address address : Addresses.getInstance().listDisabledValues()) {
      reply.getAddressesSet().add(new AddressInfoType(address.getName(),FakePrincipals.NOBODY_USER_ERN.getUserName()));
    }
  }
  return reply;
}

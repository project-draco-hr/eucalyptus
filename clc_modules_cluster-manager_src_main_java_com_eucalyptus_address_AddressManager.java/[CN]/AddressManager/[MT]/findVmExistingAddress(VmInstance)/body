{
  Address oldAddr=null;
  if (vm.hasPublicAddress()) {
    try {
      oldAddr=Addresses.getInstance().lookup(vm.getPublicAddress());
      EventRecord.here(AddressManager.class,EventType.ADDRESS_UNASSIGN,vm.getOwnerId(),oldAddr.getUserId(),oldAddr.getName(),vm.getInstanceId()).info();
    }
 catch (    Exception e) {
      LOG.debug(e,e);
    }
  }
  return oldAddr;
}

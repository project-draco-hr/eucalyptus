{
  Class<?> msgType=Iterables.find(Classes.classAncestors(msg),new Predicate<Class<?>>(){
    @Override public boolean apply(    Class<?> arg0){
      return Ats.from(arg0).has(ComponentMessage.class);
    }
  }
);
  if (!compIdMap.containsValue(msgType)) {
    throw new NoSuchElementException("No ComponentMessage with name: " + msgType);
  }
 else {
    return compIdMap.inverse().get(msgType);
  }
}

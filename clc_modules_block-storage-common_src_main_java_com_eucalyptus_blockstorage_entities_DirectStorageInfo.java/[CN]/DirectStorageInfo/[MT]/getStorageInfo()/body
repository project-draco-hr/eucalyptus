{
  DirectStorageInfo conf=null;
  TransactionResource tran=Entities.transactionFor(DirectStorageInfo.class);
  try {
    conf=Entities.uniqueResult(new DirectStorageInfo(StorageProperties.NAME));
    if (null == conf.getTimeoutInMillis()) {
      conf.setTimeoutInMillis(StorageProperties.timeoutInMillis);
      Entities.merge(conf);
    }
    tran.commit();
  }
 catch (  NoSuchElementException e) {
    LOG.warn("Failed to get storage info for: " + StorageProperties.NAME + ". Loading defaults.");
    conf=new DirectStorageInfo(StorageProperties.NAME,StorageProperties.iface,StorageProperties.storageRootDirectory,StorageProperties.zeroFillVolumes,StorageProperties.timeoutInMillis);
    Entities.persist(conf);
    tran.commit();
  }
catch (  Exception t) {
    LOG.error("Unable to get storage info for: " + StorageProperties.NAME);
    tran.rollback();
    return new DirectStorageInfo(StorageProperties.NAME,StorageProperties.iface,StorageProperties.storageRootDirectory,StorageProperties.zeroFillVolumes,StorageProperties.timeoutInMillis);
  }
  return conf;
}

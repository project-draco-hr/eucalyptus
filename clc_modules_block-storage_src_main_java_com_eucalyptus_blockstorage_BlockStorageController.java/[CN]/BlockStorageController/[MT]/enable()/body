{
  blockManager.configure();
  try {
    startupChecks();
  }
 catch (  EucalyptusCloudException ex) {
    LOG.error("Startup checks failed ",ex);
  }
  blockManager.enable();
  checkerService.add(new VolumeStateChecker(blockManager));
  for (  CheckerTask checker : blockManager.getCheckers()) {
    checkerService.add(checker);
  }
  checkerService.add(new VolumeDeleterTask());
  checkerService.add(new SnapshotDeleterTask());
  StorageProperties.enableSnapshots=StorageProperties.enableStorage=true;
  try {
    User systemAdmin=Accounts.lookupSystemAdmin();
    List<AccessKey> keys=systemAdmin.getKeys();
    if (!keys.isEmpty()) {
      AccessKey key=keys.get(0);
      snapshotOps=new SnapshotObjectOps(key.getAccessKey(),key.getSecretKey());
    }
 else {
      LOG.error("System admin account does not have any associated keys.");
      throw new EucalyptusCloudException("Unable to find system admin credentials");
    }
  }
 catch (  Exception e) {
    LOG.error("Failed to initialize snapshot trasfer mechanism from SC to OSG",e);
  }
}

{
  displayStatusPage("Drawing the tabs...");
  HorizontalPanel top_bar=new HorizontalPanel();
  top_bar.getElement().setClassName("euca-top-bar");
  HorizontalPanel name_panel=new HorizontalPanel();
  name_panel.getElement().setClassName("euca-top-bar-left");
  name_panel.setSpacing(5);
  name_panel.add(new HTML(Theme.draw_header()));
  top_bar.add(name_panel);
  top_bar.setCellHorizontalAlignment(name_panel,HorizontalPanel.ALIGN_LEFT);
  top_bar.setCellVerticalAlignment(name_panel,HorizontalPanel.ALIGN_TOP);
  HorizontalPanel upanel=new HorizontalPanel();
  upanel.getElement().setClassName("euca-top-bar-right");
  Label user_name=new HTML("Logged in as <b>" + loggedInUser.getUserName() + "</b>&nbsp;&nbsp;|&nbsp;&nbsp;");
  Hyperlink logout_button=new Hyperlink("Logout","logout");
  logout_button.addClickListener(LogoutButtonListener);
  upanel.add(user_name);
  upanel.add(logout_button);
  top_bar.add(upanel);
  top_bar.setCellHorizontalAlignment(upanel,HorizontalPanel.ALIGN_RIGHT);
  top_bar.setCellVerticalAlignment(upanel,HorizontalPanel.ALIGN_TOP);
  final HorizontalPanel messageBox=new HorizontalPanel();
  messageBox.setStyleName("euca-message-bar");
  messageBox.setSpacing(3);
  messageBox.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_RIGHT);
  messageBox.add(statusMessage);
  statusMessage.setStyleName("euca-small-text");
  final VerticalPanel wrapper=new VerticalPanel();
  wrapper.setStyleName("euca-tab-contents");
  int nTabs=0;
  allTabs=new TabBar();
  allTabs.addTab("Credentials");
  credsTabIndex=nTabs++;
  allTabs.addTab("Images");
  imgTabIndex=nTabs++;
  if (loggedInUser.isAdministrator().booleanValue()) {
    allTabs.addTab("Users");
    usrTabIndex=nTabs++;
    allTabs.addTab("Configuration");
    confTabIndex=nTabs++;
    allTabs.addTab("Extras");
    downTabIndex=nTabs++;
    if (extensions != null && extensions.contains("store")) {
      allTabs.addTab("Store");
      storeTabIndex=nTabs++;
    }
  }
  if (currentTabIndex > (nTabs - 1)) {
    currentTabIndex=0;
  }
  allTabs.addTabListener(new TabListener(){
    public void onTabSelected(    SourcesTabEvents sender,    int tabIndex){
      String error="This tab is not implemented yet, sorry!";
      statusMessage.setText("");
      wrapper.clear();
      currentTabIndex=tabIndex;
      if (tabIndex == credsTabIndex) {
        displayCredentialsTab(wrapper);
      }
 else       if (tabIndex == imgTabIndex) {
        displayImagesTab(wrapper);
      }
 else       if (tabIndex == usrTabIndex) {
        displayUsersTab(wrapper);
      }
 else       if (tabIndex == confTabIndex) {
        displayConfTab(wrapper);
      }
 else       if (tabIndex == downTabIndex) {
        displayDownloadsTab(wrapper);
      }
 else       if (tabIndex == storeTabIndex) {
        displayStoreTab(wrapper);
      }
 else {
        displayErrorPage("Invalid tab!");
      }
    }
    public boolean onBeforeTabSelected(    SourcesTabEvents sender,    int tabIndex){
      return true;
    }
  }
);
  RootPanel.get().clear();
  RootPanel.get().add(top_bar);
  RootPanel.get().add(allTabs);
  RootPanel.get().add(messageBox);
  RootPanel.get().add(wrapper);
  allTabs.selectTab(currentTabIndex);
}

{
  if (action.equals("approve") || action.equals("reject") || action.equals("delete")|| action.equals("disable")|| action.equals("enable")) {
    String userName=(String)urlParams.get("user");
    if (!loggedInUser.isAdministrator().booleanValue()) {
      displayErrorPage("Administrative privileges required");
    }
 else     if (userName == null) {
      displayErrorPage("Username not specified");
    }
 else {
      attemptAction(action,userName);
    }
  }
 else   if (action.equals("delete_image") || action.equals("disable_image") || action.equals("enable_image")) {
    String imageId=(String)urlParams.get("id");
    if (!loggedInUser.isAdministrator().booleanValue()) {
      displayErrorPage("Administrative privileges required");
    }
 else     if (imageId == null) {
      displayErrorPage("Image ID not specified");
    }
 else {
      attemptAction(action,imageId);
    }
  }
 else   if (action.equals("confirm") || action.equals("recover")) {
    String code=(String)urlParams.get("code");
    if (code == null) {
      displayErrorPage("Confirmation code not specified");
    }
 else {
      if (action.equals("confirm")) {
        attemptAction(action,code);
      }
 else       if (action.equals("recover")) {
        displayCompletePasswordRecoveryPage(code);
      }
    }
  }
 else {
    displayErrorPage("Action '" + action + "' not recognized");
  }
}

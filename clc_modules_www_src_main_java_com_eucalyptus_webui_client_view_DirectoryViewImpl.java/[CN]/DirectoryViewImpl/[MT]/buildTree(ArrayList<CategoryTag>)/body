{
  if (data == null || data.size() < 1) {
    LOG.log(Level.WARNING,"Can not build category tree: data is empty.");
    return;
  }
  final SingleSelectionModel<CategoryItem> selectionModel=new SingleSelectionModel<CategoryItem>(CategoryItem.KEY_PROVIDER);
  selectionModel.addSelectionChangeHandler(new SelectionChangeEvent.Handler(){
    @Override public void onSelectionChange(    SelectionChangeEvent event){
      CategoryItem selected=selectionModel.getSelectedObject();
      if (selected != null) {
        LOG.log(Level.INFO,"Selected: " + selected.getName());
        searchHandler.search(selected.getQuery());
      }
    }
  }
);
  CellTree.Resources resource=GWT.create(TreeResources.class);
  CellTree tree=new CellTree(new CategoryTreeModel(data,selectionModel),null,resource);
  tree.setKeyboardSelectionPolicy(KeyboardSelectionPolicy.DISABLED);
  tree.setAnimationEnabled(false);
  tree.setDefaultNodeSize(TREENODE_SIZE);
  openAllNode(tree.getRootTreeNode());
  treePanel.clear();
  treePanel.add(tree);
}

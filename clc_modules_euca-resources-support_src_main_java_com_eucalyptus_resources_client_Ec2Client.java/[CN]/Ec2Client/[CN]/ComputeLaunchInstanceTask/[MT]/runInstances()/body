{
  OwnerFullName systemAcct=AccountFullName.getInstance(Principals.systemAccount());
  LOG.info("runInstances with zone=" + availabilityZone + ", account="+ systemAcct);
  final RunInstancesType runInstances=new RunInstancesType();
  runInstances.setImageId(imageId);
  runInstances.setInstanceType(instanceType);
  if (groupName != null) {
    runInstances.setSecurityGroups(Lists.newArrayList(new GroupItemType(groupName,null)));
  }
  if (availabilityZone != null)   runInstances.setAvailabilityZone(availabilityZone);
  runInstances.setMinCount(Math.max(1,numInstances));
  runInstances.setMaxCount(Math.max(1,numInstances));
  runInstances.setUserData(userData);
  return runInstances;
}

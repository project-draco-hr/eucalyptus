{
  EntityWrapper<ImageInfo> db=new EntityWrapper<ImageInfo>();
  List<ImageDetails> repList=Lists.newArrayList();
  try {
    for (    String execUserId : executable) {
      try {
        if ("all".equals(execUserId))         continue;
        UserInfo execUser=db.recast(UserInfo.class).getUnique(new UserInfo(execUserId));
        List<ImageInfo> results=db.query(new ImageInfo());
        for (        ImageInfo img : results) {
          ImageDetails imgDetails=img.getAsImageDetails();
          if (img.isAllowed(execUser) && img.getImageOwnerId().equals(user.getUserName())) {
            repList.add(imgDetails);
          }
        }
      }
 catch (      Throwable e) {
        LOG.debug(e,e);
      }
    }
    db.commit();
  }
 catch (  Exception e) {
    LOG.debug(e,e);
    db.commit();
  }
  return repList;
}

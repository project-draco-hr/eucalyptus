{
  List<ImageDetails> repList=Lists.newArrayList();
  EntityWrapper<ImageInfo> db=new EntityWrapper<ImageInfo>();
  try {
    for (    String execUserId : executable) {
      if ("all".equals(execUserId))       continue;
      final UserInfo execUser=UserInfoStore.getUserInfo(new UserInfo(execUserId));
      Iterable<ImageInfo> results=Iterables.filter(db.query(ImageInfo.ALL),new Predicate<ImageInfo>(){
        @Override public boolean apply(        ImageInfo arg0){
          return arg0.isAllowed(execUser) || arg0.getImagePublic();
        }
      }
);
      repList.addAll(Lists.transform(Lists.newArrayList(results),ImageInfo.TO_IMAGE_DETAILS));
    }
    db.commit();
  }
 catch (  NoSuchUserException e) {
    LOG.debug(e,e);
    db.commit();
  }
  return repList;
}

{
  String diskUrl=getImageUrl(walrusUrl,diskInfo);
  if (!ImageManager.IMAGE_PLATFORM_WINDOWS.equals(diskInfo.getPlatform())) {
    String kernelUrl=getImageUrl(walrusUrl,kernelInfo);
    String ramdiskUrl=null;
    if (ramdiskInfo != null)     ramdiskUrl=getImageUrl(walrusUrl,ramdiskInfo);
    VmImageInfo vmImgInfo=new VmImageInfo(diskInfo.getImageId(),kernelInfo.getImageId(),ramdiskInfo == null ? null : ramdiskInfo.getImageId(),diskUrl,kernelUrl,ramdiskInfo == null ? null : ramdiskUrl,productCodes,diskInfo.getPlatform());
    return vmImgInfo;
  }
 else {
    return new VmImageInfo(diskInfo.getImageId(),diskUrl,productCodes,diskInfo.getPlatform());
  }
}

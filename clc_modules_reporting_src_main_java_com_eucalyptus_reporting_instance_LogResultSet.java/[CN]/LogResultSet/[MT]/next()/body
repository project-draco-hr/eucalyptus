{
  if (nextSnapshot != null) {
    snapshotList=new ArrayList<UsageSnapshot>();
    snapshotList.add(this.nextSnapshot);
    insAttrs=this.nextInsAttrs;
    nextSnapshot=null;
  }
  while (iter.hasNext()) {
    Object[] row=(Object[])iter.next();
    InstanceAttributes ia=(InstanceAttributes)row[0];
    InstanceUsageSnapshot ius=(InstanceUsageSnapshot)row[1];
    UsageSnapshot us=ius.getUsageSnapshot();
    if (insAttrs == null) {
      insAttrs=ia;
      snapshotList=new ArrayList<UsageSnapshot>();
      snapshotList.add(us);
    }
 else     if (insAttrs.getUuid().equals(ia.getUuid())) {
      snapshotList.add(us);
    }
 else {
      nextInsAttrs=ia;
      nextSnapshot=us;
      break;
    }
  }
  return (iter.hasNext() || nextSnapshot != null);
}

{
  Map params=new HashMap();
  params.put("criterion",criterion.toString());
  if (groupBy != null) {
    params.put("groupByCriterion",groupBy.toString());
  }
  JRDataSource dataSource=new JRBeanCollectionDataSource(items);
  try {
    JasperReport report=JasperCompileManager.compileReport(jrxmlFile.getAbsolutePath());
    JasperPrint print=JasperFillManager.fillReport(report,params,dataSource);
    JRAbstractExporter exporter=format.getExporter();
    exporter.setParameter(JRExporterParameter.JASPER_PRINT,print);
    exporter.setParameter(JRExporterParameter.OUTPUT_STREAM,dest);
    exporter.exportReport();
  }
 catch (  JRException e) {
    log.error(e.getMessage(),e);
    e.printStackTrace();
  }
}

{
  final String vmType=allocInfo.getVmType().getName();
  RestrictedTypes.allocate(vmType,Long.valueOf(allocInfo.getAllocationTokens().size()),allocInfo.getVmType().allocator());
  List<VmInstance> vms=Lists.newArrayList();
  for (  final ResourceToken token : allocInfo.getAllocationTokens()) {
    Supplier<VmInstance> allocator=new Supplier<VmInstance>(){
      @Override public VmInstance get(){
        try {
          return VmInstance.Create.INSTANCE.apply(token);
        }
 catch (        Exception ex) {
          LOG.error(ex,ex);
          throw new RuntimeException(ex);
        }
      }
    }
;
    VmInstance vmInst=RestrictedTypes.allocate(allocator);
    token.setVmInstance(vmInst);
  }
  return allocInfo;
}

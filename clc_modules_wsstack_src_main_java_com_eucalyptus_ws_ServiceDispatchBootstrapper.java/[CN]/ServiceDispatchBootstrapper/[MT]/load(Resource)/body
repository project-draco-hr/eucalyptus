{
  LOG.trace("Touching class: " + ServiceDispatcher.class);
  for (  Component v : Component.values()) {
    LOG.info("Ensure component is initialized: " + LogUtil.dumpObject(v));
  }
  if (!Component.eucalyptus.isLocal()) {
    Component.eucalyptus.setHostAddress(Component.db.getHostAddress());
    Component.jetty.setHostAddress(Component.db.getHostAddress());
    Component.cluster.setHostAddress(Component.db.getHostAddress());
  }
 else   if (Component.eucalyptus.isLocal()) {
    try {
      registerLocalComponent(Component.eucalyptus);
      registerLocalComponent(Component.dns);
      registerLocalComponent(Component.cluster);
      registerLocalComponent(Component.jetty);
    }
 catch (    Exception e) {
      LOG.fatal(e,e);
      return false;
    }
  }
  if (!Component.walrus.isLocal()) {
    List<WalrusConfiguration> walri=Configuration.getWalrusConfigurations();
    for (    WalrusConfiguration w : walri) {
      try {
        if (NetworkUtil.testLocal(w.getHostName())) {
          Component.walrus.markLocal();
          registerLocalComponent(Component.walrus);
        }
 else {
          Component.walrus.setHostAddress(w.getHostName());
          registerComponent(Component.walrus,w);
        }
      }
 catch (      Exception e) {
        LOG.error("Failed to create walrus service proxy: " + e);
      }
      break;
    }
  }
 else {
    registerLocalComponent(Component.walrus);
  }
  List<StorageControllerConfiguration> scs=Configuration.getStorageControllerConfigurations();
  for (  StorageControllerConfiguration sc : scs) {
    try {
      if (NetworkUtil.testLocal(sc.getHostName())) {
        Component.storage.markLocal();
        registerLocalComponent(Component.storage);
      }
 else {
        registerComponent(Component.storage,sc);
      }
    }
 catch (    Exception e) {
      LOG.error("Failed to create storage controller " + sc.getName() + " service proxy: "+ e);
    }
  }
  return true;
}

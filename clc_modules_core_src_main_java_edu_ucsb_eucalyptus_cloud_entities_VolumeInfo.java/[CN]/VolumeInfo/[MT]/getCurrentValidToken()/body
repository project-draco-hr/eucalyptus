{
  EntityTransaction db=Entities.get(VolumeInfo.class);
  try {
    VolumeInfo volEntity=Entities.merge(this);
    for (    VolumeToken tok : volEntity.getAttachmentTokens()) {
      if (tok.getIsValid()) {
        db.commit();
        return tok;
      }
    }
    db.commit();
  }
 catch (  Exception e) {
    LOG.trace("Failed to lookup valid token found for volume " + this.getVolumeId());
  }
 finally {
    if (db.isActive()) {
      db.rollback();
    }
  }
  return null;
}

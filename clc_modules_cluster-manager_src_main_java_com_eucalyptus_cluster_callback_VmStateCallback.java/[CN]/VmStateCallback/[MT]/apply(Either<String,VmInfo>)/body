{
  final String instanceId=input == null ? null : input.isLeft() ? input.getLeft() : input.getRight().getInstanceId();
  try {
    final Runnable run=new Runnable(){
      @Override public void run(){
        try {
          UpdateTaskFunction.this.task(input);
        }
 catch (        Exception e) {
          LOG.error("Failed to handle " + UpdateTaskFunction.this.name().toLowerCase() + " instance: "+ instanceId+ " because of "+ e.getMessage());
        }
 finally {
          pendingUpdates.remove(instanceId);
        }
      }
    }
;
    if (input != null && instanceId != null && pendingUpdates.putIfAbsent(instanceId,System.currentTimeMillis()) == null) {
      return Optional.of(run);
    }
 else {
      return Optional.absent();
    }
  }
 catch (  Exception e) {
    return Optional.absent();
  }
}

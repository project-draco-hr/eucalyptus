{
  return new Predicate<VmInstance>(){
    @Override public boolean apply(    VmInstance input){
      if (VmState.RUNNING.apply(input)) {
        try {
          VmInstance vm=Entities.merge(input);
          return vm.eachVolumeAttachment(new Predicate<VmVolumeAttachment>(){
            @Override public boolean apply(            VmVolumeAttachment arg0){
              return arg0.getAttachmentState().isVolatile();
            }
          }
);
        }
 catch (        Exception ex) {
          Logs.extreme().error(ex,ex);
          return false;
        }
      }
 else {
        return false;
      }
    }
  }
;
}

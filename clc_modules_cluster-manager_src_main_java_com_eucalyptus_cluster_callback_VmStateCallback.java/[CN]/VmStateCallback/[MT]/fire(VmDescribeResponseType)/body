{
  reply.setOriginCluster(this.getSubject().getConfiguration().getName());
  for (  VmInfo vmInfo : reply.getVms()) {
    vmInfo.setPlacement(this.getSubject().getConfiguration().getName());
    VmTypeInfo typeInfo=vmInfo.getInstanceType();
    if (typeInfo.getName() == null || "".equals(typeInfo.getName())) {
      for (      VmType t : VmTypes.list()) {
        if (t.getCpu().equals(typeInfo.getCores()) && t.getDisk().equals(typeInfo.getDisk()) && t.getMemory().equals(typeInfo.getMemory())) {
          typeInfo.setName(t.getName());
        }
      }
    }
  }
  for (  final VmInfo runVm : reply.getVms()) {
    if (!VmState.PENDING.equals(VmState.Mapper.get(runVm.getStateName()))) {
      VmStateCallback.handleReportedState(runVm);
    }
  }
  final List<String> unreportedVms=VmStateCallback.findUnreported(reply);
  VmStateCallback.handleUnreported(unreportedVms);
}

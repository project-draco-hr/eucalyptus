{
  final VmState runVmState=VmState.Mapper.get(runVm.getStateName());
  if (VmStateSet.RUN.contains(runVmState)) {
    try {
      if (VmInstances.cachedLookup(runVm.getInstanceId()) != null) {
        return;
      }
    }
 catch (    Exception ex) {
      LOG.error(ex);
      Logs.extreme().error(ex,ex);
    }
    try {
      VmInstance.RestoreAllocation.INSTANCE.apply(runVm);
    }
 catch (    Throwable ex) {
      LOG.error(ex);
      Logs.extreme().error(ex,ex);
    }
  }
}

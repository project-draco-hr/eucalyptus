{
  return Suppliers.memoize(new Supplier<Set<String>>(){
    @Override public Set<String> get(){
      EntityTransaction db=Entities.get(VmInstance.class);
      try {
        Collection<VmInstance> clusterInstances=VmInstances.list(filter);
        Collection<String> instanceNames=Collections2.transform(clusterInstances,CloudMetadatas.toDisplayName());
        Set<String> ret=Sets.newHashSet(instanceNames);
        db.rollback();
        return ret;
      }
 catch (      Exception ex) {
        Logs.extreme().error(ex,ex);
        db.rollback();
        return Sets.newHashSet();
      }
    }
  }
);
}

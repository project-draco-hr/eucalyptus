{
  try {
    if (event instanceof StartComponentEvent) {
      StartComponentEvent e=(StartComponentEvent)event;
      ServiceDispatcher sd=null;
      if (e.isLocal()) {
        Component c=e.getComponent();
        URI uri=new URI(c.getLocalAddress());
        sd=new LocalDispatcher(c,c.name(),uri);
        ServiceDispatcher.register(c.getRegistryKey("localhost"),sd);
      }
 else {
        ComponentConfiguration config=e.getConfiguration();
        Component c=e.getComponent();
        URI uri=new URI(c.makeUri(config.getHostName()));
        sd=new RemoteDispatcher(c,c.name(),uri);
        ServiceDispatcher.register(c.getRegistryKey(config.getHostName()),sd);
      }
      LOG.info("Registering service dispatcher: " + LogUtil.dumpObject(sd));
    }
  }
 catch (  URISyntaxException e) {
    LOG.warn(e,e);
  }
}

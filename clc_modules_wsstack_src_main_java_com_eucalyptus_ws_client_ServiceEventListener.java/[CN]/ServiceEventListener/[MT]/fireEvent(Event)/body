{
  try {
    if (event instanceof StartComponentEvent) {
      StartComponentEvent e=(StartComponentEvent)event;
      ServiceDispatcher sd=null;
      if (Component.db.equals(e.getComponent())) {
        LOG.info(LogUtil.header("Got information for the " + e.getComponent() + " "+ LogUtil.dumpObject(e.getConfiguration())));
      }
      if (e.isLocal()) {
        Component c=e.getComponent();
        URI uri=new URI(c.getLocalAddress());
        sd=new LocalDispatcher(c,c.name(),uri);
        if (Component.storage.equals(c)) {
          System.setProperty("euca.storage.name",e.getConfiguration().getName());
        }
        ServiceDispatcher.register(c.getRegistryKey("localhost"),sd);
      }
 else {
        ComponentConfiguration config=e.getConfiguration();
        Component c=e.getComponent();
        URI uri=new URI(c.makeUri(config.getHostName()));
        sd=new RemoteDispatcher(c,c.name(),uri);
        ServiceDispatcher.register(c.getRegistryKey(config.getHostName()),sd);
      }
      LOG.info("Registering service dispatcher: " + LogUtil.dumpObject(sd));
    }
  }
 catch (  URISyntaxException e) {
    LOG.warn(e,e);
  }
}

{
  try {
    if (parent.isVmLocal() || (parent.isHostLocal() && Bootstrap.isCloudController())) {
      try {
        LocalTransitionCallbacks.valueOf(transitionAction.name()).fire(parent);
      }
 catch (      Exception ex) {
        LOG.error(ex,ex);
        throw ex;
      }
    }
 else     if (Bootstrap.isCloudController()) {
      try {
        RemoteTransitionCallbacks.valueOf(transitionAction.name()).fire(parent);
      }
 catch (      Exception ex) {
        LOG.error(ex,ex);
      }
    }
 else {
      LOG.debug("Silentlty accepting remotely inferred state transition for " + parent);
    }
    transitionCallback.fire();
  }
 catch (  Throwable ex) {
    if (ServiceTransitions.filterExceptions(parent,ex,errorFilterCheckTransition(parent))) {
      transitionCallback.fireException(ex);
    }
 else {
      transitionCallback.fire();
    }
  }
}

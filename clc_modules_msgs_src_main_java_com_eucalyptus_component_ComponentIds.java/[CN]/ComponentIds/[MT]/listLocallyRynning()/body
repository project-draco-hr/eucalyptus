{
  List<ComponentId> components=Lists.newArrayList();
  for (  Component comp : Components.list()) {
    if (ComponentIds.lookup(Eucalyptus.class).isAvailableLocally() && comp.getComponentId().isCloudLocal()) {
      components.add(comp.getComponentId());
    }
 else     if (comp.getComponentId().isAlwaysLocal()) {
      components.add(comp.getComponentId());
    }
 else     if (comp.isEnabledLocally()) {
      components.add(comp.getComponentId());
    }
  }
  LOG.trace("Found the following running components: " + components);
  return components;
}

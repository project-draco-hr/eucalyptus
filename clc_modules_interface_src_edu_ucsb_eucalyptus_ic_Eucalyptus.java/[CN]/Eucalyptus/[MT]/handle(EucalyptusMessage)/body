{
  if (msg instanceof DescribeRegionsType) {
    DescribeRegionsResponseType reply=(DescribeRegionsResponseType)msg.getReply();
    try {
      SystemConfiguration config=EucalyptusProperties.getSystemConfiguration();
      reply.getRegionInfo().add(new RegionInfoType("Eucalyptus",config.getStorageUrl().replaceAll("Walrus","Eucalyptus")));
      reply.getRegionInfo().add(new RegionInfoType("Walrus",config.getStorageUrl()));
    }
 catch (    EucalyptusCloudException e) {
    }
    return reply;
  }
  LOG.info(EventRecord.create(this.getClass().getSimpleName(),msg.getUserId(),msg.getCorrelationId(),EventType.MSG_RECEIVED,msg.getClass().getSimpleName()));
  long startTime=System.currentTimeMillis();
  Messaging.dispatch("vm://RequestQueue",msg);
  EucalyptusMessage reply=null;
  reply=ReplyQueue.getReply(msg.getCorrelationId());
  LOG.info(EventRecord.create(this.getClass().getSimpleName(),msg.getUserId(),msg.getCorrelationId(),EventType.MSG_SERVICED,(System.currentTimeMillis() - startTime)));
  if (reply == null)   return new EucalyptusErrorMessageType(this.getClass().getSimpleName(),msg,"Received a NULL reply");
  return reply;
}

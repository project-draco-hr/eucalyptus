{
  if (Bootstrap.isFinished() && Hosts.isCoordinator()) {
    final List<Availability> resourceAvailability=Lists.newArrayList();
    for (    final Cluster cluster : Clusters.getInstance().listValues()) {
      resourceAvailability.add(new Availability(0,StorageUtil.getBlockStorageTotalSize(cluster.getPartition()),Lists.<Tag>newArrayList(new ResourceAvailabilityEvent.Dimension("availabilityZone",cluster.getPartition()),new ResourceAvailabilityEvent.Dimension("cluster",cluster.getName()))));
    }
    try {
      ListenerRegistry.getInstance().fireEvent(new ResourceAvailabilityEvent(StorageEBS,resourceAvailability));
    }
 catch (    Exception ex) {
      logger.error(ex,ex);
    }
  }
}

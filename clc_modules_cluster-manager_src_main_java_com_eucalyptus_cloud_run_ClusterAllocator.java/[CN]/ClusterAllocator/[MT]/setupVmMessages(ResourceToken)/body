{
  final String networkName=NetworkGroups.networkingConfiguration().hasNetworking() ? this.allocInfo.getPrimaryNetwork().getNaturalId() : NetworkGroups.lookup(this.allocInfo.getOwnerFullName(),NetworkGroups.defaultNetworkName()).getNaturalId();
  final SshKeyPair keyInfo=this.allocInfo.getSshKeyPair();
  final VmTypeInfo vmInfo=this.allocInfo.getVmTypeInfo();
  Request cb=null;
  try {
    final VirtualBootRecord root=vmInfo.lookupRoot();
    final VmTypeInfo childVmInfo=this.makeVmTypeInfo(vmInfo,token,root);
    cb=this.makeRunRequest(token,childVmInfo,networkName);
    this.messages.addRequest(State.CREATE_VMS,cb);
    LOG.debug("Queued RunInstances: " + token);
  }
 catch (  final Exception ex) {
    Logs.extreme().error(ex,ex);
    throw ex;
  }
}

{
  Set<ConfigResource> configs=Sets.newHashSet();
  configs.add(Components.lookup("bootstrap").getIdentity().getModel());
  if (Components.lookup("eucalyptus").isAvailableLocally()) {
    for (    Component comp : Components.list()) {
      if (comp.getIdentity().isCloudLocal()) {
        LOG.info("-> Preparing cloud-local cfg: " + comp.getIdentity().getModelConfiguration());
        configs.add(comp.getIdentity().getModel());
      }
    }
  }
  for (  Component comp : Components.list()) {
    if (comp.isRunningLocally()) {
      if (!comp.getIdentity().isCloudLocal()) {
        LOG.info("-> Preparing component cfg: " + comp.getIdentity().getModelConfiguration());
        configs.add(comp.getIdentity().getModel());
      }
    }
  }
  for (  ConfigResource cfg : configs) {
    LOG.info("-> Loaded cfg: " + cfg.getUrl());
  }
  try {
    buildContext(configs);
  }
 catch (  Exception e) {
    LOG.fatal("Failed to bootstrap services.",e);
    return false;
  }
  return true;
}

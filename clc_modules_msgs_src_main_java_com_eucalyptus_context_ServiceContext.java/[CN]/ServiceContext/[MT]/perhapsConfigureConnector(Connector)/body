{
  if (!connector.isStarted())   try {
    connector.start();
  }
 catch (  IllegalArgumentException e) {
    if (!connector.isStarted()) {
      throw new ConnectorException(MessageFactory.createStaticMessage("Error starting connector"),connector,e);
    }
  }
  if (connector instanceof VMConnector) {
    final VMConnector vmConnector=(VMConnector)connector;
    final ScheduledExecutorService scheduledExecutorService=vmConnector.getScheduler();
    if (scheduledExecutorService instanceof ScheduledThreadPoolExecutor) {
      final ScheduledThreadPoolExecutor threadPoolExecutor=(ScheduledThreadPoolExecutor)scheduledExecutorService;
      if (threadPoolExecutor.getCorePoolSize() < MIN_SCHEDULER_CORE_SIZE) {
        threadPoolExecutor.setCorePoolSize(MIN_SCHEDULER_CORE_SIZE);
      }
    }
  }
}

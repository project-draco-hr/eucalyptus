def waitForState(client, instanceid, state):
    instances = client.get_instances()
    while instances:
        for inst in instances['results']:
            if (inst['id'] == instanceid):
                print inst['state']
                if (inst['state'] == state):
                    return
        time.sleep(5)
        instances = client.get_instances()
